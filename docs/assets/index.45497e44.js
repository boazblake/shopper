const Yr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};Yr();var Bt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function zt(e,t,n,r,i,o){return{tag:e,key:t,attrs:n,children:r,text:i,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}zt.normalize=function(e){return Array.isArray(e)?zt("[",void 0,void 0,zt.normalizeChildren(e),void 0,void 0):e==null||typeof e=="boolean"?null:typeof e=="object"?e:zt("#",void 0,void 0,String(e),void 0,void 0)};zt.normalizeChildren=function(e){var t=[];if(e.length){for(var n=e[0]!=null&&e[0].key!=null,r=1;r<e.length;r++)if((e[r]!=null&&e[r].key!=null)!==n)throw new TypeError(n&&(e[r]!=null||typeof e[r]=="boolean")?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var r=0;r<e.length;r++)t[r]=zt.normalize(e[r])}return t};var jt=zt,Wr=jt,nr=function(){var e=arguments[this],t=this+1,n;if(e==null?e={}:(typeof e!="object"||e.tag!=null||Array.isArray(e))&&(e={},t=this),arguments.length===t+1)n=arguments[t],Array.isArray(n)||(n=[n]);else for(n=[];t<arguments.length;)n.push(arguments[t++]);return Wr("",e.key,e,n)},Me={}.hasOwnProperty,Gr=jt,Kr=nr,Yt=Me,Jr=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,rr={};function On(e){for(var t in e)if(Yt.call(e,t))return!1;return!0}function Vr(e){for(var t,n="div",r=[],i={};t=Jr.exec(e);){var o=t[1],l=t[2];if(o===""&&l!=="")n=l;else if(o==="#")i.id=l;else if(o===".")r.push(l);else if(t[3][0]==="["){var u=t[6];u&&(u=u.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),t[4]==="class"?r.push(u):i[t[4]]=u===""?u:u||!0}}return r.length>0&&(i.className=r.join(" ")),rr[e]={tag:n,attrs:i}}function Qr(e,t){var n=t.attrs,r=Yt.call(n,"class"),i=r?n.class:n.className;if(t.tag=e.tag,t.attrs={},!On(e.attrs)&&!On(n)){var o={};for(var l in n)Yt.call(n,l)&&(o[l]=n[l]);n=o}for(var l in e.attrs)Yt.call(e.attrs,l)&&l!=="className"&&!Yt.call(n,l)&&(n[l]=e.attrs[l]);(i!=null||e.attrs.className!=null)&&(n.className=i!=null?e.attrs.className!=null?String(e.attrs.className)+" "+String(i):i:e.attrs.className!=null?e.attrs.className:null),r&&(n.class=null);for(var l in n)if(Yt.call(n,l)&&l!=="key"){t.attrs=n;break}return t}function Zr(e){if(e==null||typeof e!="string"&&typeof e!="function"&&typeof e.view!="function")throw Error("The selector must be either a string or a component.");var t=Kr.apply(1,arguments);return typeof e=="string"&&(t.children=Gr.normalizeChildren(t.children),e!=="[")?Qr(rr[e]||Vr(e),t):(t.tag=e,t)}var ir=Zr,ti=jt,ei=function(e){return e==null&&(e=""),ti("<",void 0,void 0,e,void 0,void 0)},ni=jt,ri=nr,ii=function(){var e=ri.apply(0,arguments);return e.tag="[",e.children=ni.normalizeChildren(e.children),e},cn=ir;cn.trust=ei;cn.fragment=ii;var ai=cn,le={exports:{}},it=function(e){if(!(this instanceof it))throw new Error("Promise must be called with 'new'.");if(typeof e!="function")throw new TypeError("executor must be a function.");var t=this,n=[],r=[],i=c(n,!0),o=c(r,!1),l=t._instance={resolvers:n,rejectors:r},u=typeof setImmediate=="function"?setImmediate:setTimeout;function c(g,d){return function w(S){var E;try{if(d&&S!=null&&(typeof S=="object"||typeof S=="function")&&typeof(E=S.then)=="function"){if(S===t)throw new TypeError("Promise can't be resolved with itself.");p(E.bind(S))}else u(function(){!d&&g.length===0&&console.error("Possible unhandled promise rejection:",S);for(var b=0;b<g.length;b++)g[b](S);n.length=0,r.length=0,l.state=d,l.retry=function(){w(S)}})}catch(b){o(b)}}}function p(g){var d=0;function w(E){return function(b){d++>0||E(b)}}var S=w(o);try{g(w(i),S)}catch(E){S(E)}}p(e)};it.prototype.then=function(e,t){var n=this,r=n._instance;function i(c,p,g,d){p.push(function(w){if(typeof c!="function")g(w);else try{o(c(w))}catch(S){l&&l(S)}}),typeof r.retry=="function"&&d===r.state&&r.retry()}var o,l,u=new it(function(c,p){o=c,l=p});return i(e,r.resolvers,o,!0),i(t,r.rejectors,l,!1),u};it.prototype.catch=function(e){return this.then(null,e)};it.prototype.finally=function(e){return this.then(function(t){return it.resolve(e()).then(function(){return t})},function(t){return it.resolve(e()).then(function(){return it.reject(t)})})};it.resolve=function(e){return e instanceof it?e:new it(function(t){t(e)})};it.reject=function(e){return new it(function(t,n){n(e)})};it.all=function(e){return new it(function(t,n){var r=e.length,i=0,o=[];if(e.length===0)t([]);else for(var l=0;l<e.length;l++)(function(u){function c(p){i++,o[u]=p,i===r&&t(o)}e[u]!=null&&(typeof e[u]=="object"||typeof e[u]=="function")&&typeof e[u].then=="function"?e[u].then(c,n):c(e[u])})(l)})};it.race=function(e){return new it(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})};var ar=it,ne=ar;typeof window!="undefined"?(typeof window.Promise=="undefined"?window.Promise=ne:window.Promise.prototype.finally||(window.Promise.prototype.finally=ne.prototype.finally),le.exports=window.Promise):typeof Bt!="undefined"?(typeof Bt.Promise=="undefined"?Bt.Promise=ne:Bt.Promise.prototype.finally||(Bt.Promise.prototype.finally=ne.prototype.finally),le.exports=Bt.Promise):le.exports=ne;var Ge=jt,oi=function(e){var t=e&&e.document,n,r={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function i(s){return s.attrs&&s.attrs.xmlns||r[s.tag]}function o(s,a){if(s.state!==a)throw new Error("'vnode.state' must not be modified.")}function l(s){var a=s.state;try{return this.apply(a,arguments)}finally{o(s,a)}}function u(){try{return t.activeElement}catch{return null}}function c(s,a,f,h,m,_,P){for(var R=f;R<h;R++){var D=a[R];D!=null&&p(s,D,m,P,_)}}function p(s,a,f,h,m){var _=a.tag;if(typeof _=="string")switch(a.state={},a.attrs!=null&&qe(a.attrs,a,f),_){case"#":g(s,a,m);break;case"<":w(s,a,h,m);break;case"[":S(s,a,f,h,m);break;default:E(s,a,f,h,m)}else k(s,a,f,h,m)}function g(s,a,f){a.dom=t.createTextNode(a.children),et(s,a.dom,f)}var d={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function w(s,a,f,h){var m=a.children.match(/^\s*?<(\w+)/im)||[],_=t.createElement(d[m[1]]||"div");f==="http://www.w3.org/2000/svg"?(_.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+a.children+"</svg>",_=_.firstChild):_.innerHTML=a.children,a.dom=_.firstChild,a.domSize=_.childNodes.length,a.instance=[];for(var P=t.createDocumentFragment(),R;R=_.firstChild;)a.instance.push(R),P.appendChild(R);et(s,P,h)}function S(s,a,f,h,m){var _=t.createDocumentFragment();if(a.children!=null){var P=a.children;c(_,P,0,P.length,f,null,h)}a.dom=_.firstChild,a.domSize=_.childNodes.length,et(s,_,m)}function E(s,a,f,h,m){var _=a.tag,P=a.attrs,R=P&&P.is;h=i(a)||h;var D=h?R?t.createElementNS(h,_,{is:R}):t.createElementNS(h,_):R?t.createElement(_,{is:R}):t.createElement(_);if(a.dom=D,P!=null&&me(a,P,h),et(s,D,m),!Pt(a)&&a.children!=null){var B=a.children;c(D,B,0,B.length,f,null,h),a.tag==="select"&&P!=null&&$r(a,P)}}function b(s,a){var f;if(typeof s.tag.view=="function"){if(s.state=Object.create(s.tag),f=s.state.view,f.$$reentrantLock$$!=null)return;f.$$reentrantLock$$=!0}else{if(s.state=void 0,f=s.tag,f.$$reentrantLock$$!=null)return;f.$$reentrantLock$$=!0,s.state=s.tag.prototype!=null&&typeof s.tag.prototype.view=="function"?new s.tag(s):s.tag(s)}if(qe(s.state,s,a),s.attrs!=null&&qe(s.attrs,s,a),s.instance=Ge.normalize(l.call(s.state.view,s)),s.instance===s)throw Error("A view cannot return the vnode it received as argument");f.$$reentrantLock$$=null}function k(s,a,f,h,m){b(a,f),a.instance!=null?(p(s,a.instance,f,h,m),a.dom=a.instance.dom,a.domSize=a.dom!=null?a.instance.domSize:0):a.domSize=0}function q(s,a,f,h,m,_){if(!(a===f||a==null&&f==null))if(a==null||a.length===0)c(s,f,0,f.length,h,m,_);else if(f==null||f.length===0)ht(s,a,0,a.length);else{var P=a[0]!=null&&a[0].key!=null,R=f[0]!=null&&f[0].key!=null,D=0,B=0;if(!P)for(;B<a.length&&a[B]==null;)B++;if(!R)for(;D<f.length&&f[D]==null;)D++;if(P!==R)ht(s,a,B,a.length),c(s,f,D,f.length,h,m,_);else if(R){for(var ft=a.length-1,rt=f.length-1,ye,ct,Z,st,X,Be;ft>=B&&rt>=D&&(st=a[ft],X=f[rt],st.key===X.key);)st!==X&&F(s,st,X,h,m,_),X.dom!=null&&(m=X.dom),ft--,rt--;for(;ft>=B&&rt>=D&&(ct=a[B],Z=f[D],ct.key===Z.key);)B++,D++,ct!==Z&&F(s,ct,Z,h,J(a,B,m),_);for(;ft>=B&&rt>=D&&!(D===rt||ct.key!==X.key||st.key!==Z.key);)Be=J(a,B,m),wt(s,st,Be),st!==Z&&F(s,st,Z,h,Be,_),++D<=--rt&&wt(s,ct,m),ct!==X&&F(s,ct,X,h,m,_),X.dom!=null&&(m=X.dom),B++,ft--,st=a[ft],X=f[rt],ct=a[B],Z=f[D];for(;ft>=B&&rt>=D&&st.key===X.key;)st!==X&&F(s,st,X,h,m,_),X.dom!=null&&(m=X.dom),ft--,rt--,st=a[ft],X=f[rt];if(D>rt)ht(s,a,B,ft+1);else if(B>ft)c(s,f,D,rt+1,h,m,_);else{var Ur=m,Cn=rt-D+1,ee=new Array(Cn),Xe=0,V=0,Ue=2147483647,Ye=0,ye,We;for(V=0;V<Cn;V++)ee[V]=-1;for(V=rt;V>=D;V--){ye==null&&(ye=j(a,B,ft+1)),X=f[V];var Ht=ye[X.key];Ht!=null&&(Ue=Ht<Ue?Ht:-1,ee[V-D]=Ht,st=a[Ht],a[Ht]=null,st!==X&&F(s,st,X,h,m,_),X.dom!=null&&(m=X.dom),Ye++)}if(m=Ur,Ye!==ft-B+1&&ht(s,a,B,ft+1),Ye===0)c(s,f,D,rt+1,h,m,_);else if(Ue===-1)for(We=K(ee),Xe=We.length-1,V=rt;V>=D;V--)Z=f[V],ee[V-D]===-1?p(s,Z,h,_,m):We[Xe]===V-D?Xe--:wt(s,Z,m),Z.dom!=null&&(m=f[V].dom);else for(V=rt;V>=D;V--)Z=f[V],ee[V-D]===-1&&p(s,Z,h,_,m),Z.dom!=null&&(m=f[V].dom)}}else{var He=a.length<f.length?a.length:f.length;for(D=D<B?D:B;D<He;D++)ct=a[D],Z=f[D],!(ct===Z||ct==null&&Z==null)&&(ct==null?p(s,Z,h,_,J(a,D+1,m)):Z==null?Dt(s,ct):F(s,ct,Z,h,J(a,D+1,m),_));a.length>He&&ht(s,a,D,a.length),f.length>He&&c(s,f,D,f.length,h,m,_)}}}function F(s,a,f,h,m,_){var P=a.tag,R=f.tag;if(P===R){if(f.state=a.state,f.events=a.events,Xr(f,a))return;if(typeof P=="string")switch(f.attrs!=null&&ze(f.attrs,f,h),P){case"#":N(a,f);break;case"<":T(s,a,f,_,m);break;case"[":M(s,a,f,h,m,_);break;default:C(a,f,h,_)}else H(s,a,f,h,m,_)}else Dt(s,a),p(s,f,h,_,m)}function N(s,a){s.children.toString()!==a.children.toString()&&(s.dom.nodeValue=a.children),a.dom=s.dom}function T(s,a,f,h,m){a.children!==f.children?(xt(s,a),w(s,f,h,m)):(f.dom=a.dom,f.domSize=a.domSize,f.instance=a.instance)}function M(s,a,f,h,m,_){q(s,a.children,f.children,h,m,_);var P=0,R=f.children;if(f.dom=null,R!=null){for(var D=0;D<R.length;D++){var B=R[D];B!=null&&B.dom!=null&&(f.dom==null&&(f.dom=B.dom),P+=B.domSize||1)}P!==1&&(f.domSize=P)}}function C(s,a,f,h){var m=a.dom=s.dom;h=i(a)||h,a.tag==="textarea"&&a.attrs==null&&(a.attrs={}),qr(a,s.attrs,a.attrs,h),Pt(a)||q(m,s.children,a.children,f,null,h)}function H(s,a,f,h,m,_){if(f.instance=Ge.normalize(l.call(f.state.view,f)),f.instance===f)throw Error("A view cannot return the vnode it received as argument");ze(f.state,f,h),f.attrs!=null&&ze(f.attrs,f,h),f.instance!=null?(a.instance==null?p(s,f.instance,h,_,m):F(s,a.instance,f.instance,h,m,_),f.dom=f.instance.dom,f.domSize=f.instance.domSize):a.instance!=null?(Dt(s,a.instance),f.dom=void 0,f.domSize=0):(f.dom=a.dom,f.domSize=a.domSize)}function j(s,a,f){for(var h=Object.create(null);a<f;a++){var m=s[a];if(m!=null){var _=m.key;_!=null&&(h[_]=a)}}return h}var O=[];function K(s){for(var a=[0],f=0,h=0,m=0,_=O.length=s.length,m=0;m<_;m++)O[m]=s[m];for(var m=0;m<_;++m)if(s[m]!==-1){var P=a[a.length-1];if(s[P]<s[m]){O[m]=P,a.push(m);continue}for(f=0,h=a.length-1;f<h;){var R=(f>>>1)+(h>>>1)+(f&h&1);s[a[R]]<s[m]?f=R+1:h=R}s[m]<s[a[f]]&&(f>0&&(O[m]=a[f-1]),a[f]=m)}for(f=a.length,h=a[f-1];f-- >0;)a[f]=h,h=O[h];return O.length=0,a}function J(s,a,f){for(;a<s.length;a++)if(s[a]!=null&&s[a].dom!=null)return s[a].dom;return f}function wt(s,a,f){var h=t.createDocumentFragment();ot(s,h,a),et(s,h,f)}function ot(s,a,f){for(;f.dom!=null&&f.dom.parentNode===s;){if(typeof f.tag!="string"){if(f=f.instance,f!=null)continue}else if(f.tag==="<")for(var h=0;h<f.instance.length;h++)a.appendChild(f.instance[h]);else if(f.tag!=="[")a.appendChild(f.dom);else if(f.children.length===1){if(f=f.children[0],f!=null)continue}else for(var h=0;h<f.children.length;h++){var m=f.children[h];m!=null&&ot(s,a,m)}break}}function et(s,a,f){f!=null?s.insertBefore(a,f):s.appendChild(a)}function Pt(s){if(s.attrs==null||s.attrs.contenteditable==null&&s.attrs.contentEditable==null)return!1;var a=s.children;if(a!=null&&a.length===1&&a[0].tag==="<"){var f=a[0].children;s.dom.innerHTML!==f&&(s.dom.innerHTML=f)}else if(a!=null&&a.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function ht(s,a,f,h){for(var m=f;m<h;m++){var _=a[m];_!=null&&Dt(s,_)}}function Dt(s,a){var f=0,h=a.state,m,_;if(typeof a.tag!="string"&&typeof a.state.onbeforeremove=="function"){var P=l.call(a.state.onbeforeremove,a);P!=null&&typeof P.then=="function"&&(f=1,m=P)}if(a.attrs&&typeof a.attrs.onbeforeremove=="function"){var P=l.call(a.attrs.onbeforeremove,a);P!=null&&typeof P.then=="function"&&(f|=2,_=P)}if(o(a,h),!f)Qt(a),Vt(s,a);else{if(m!=null){var R=function(){f&1&&(f&=2,f||D())};m.then(R,R)}if(_!=null){var R=function(){f&2&&(f&=1,f||D())};_.then(R,R)}}function D(){o(a,h),Qt(a),Vt(s,a)}}function xt(s,a){for(var f=0;f<a.instance.length;f++)s.removeChild(a.instance[f])}function Vt(s,a){for(;a.dom!=null&&a.dom.parentNode===s;){if(typeof a.tag!="string"){if(a=a.instance,a!=null)continue}else if(a.tag==="<")xt(s,a);else{if(a.tag!=="["&&(s.removeChild(a.dom),!Array.isArray(a.children)))break;if(a.children.length===1){if(a=a.children[0],a!=null)continue}else for(var f=0;f<a.children.length;f++){var h=a.children[f];h!=null&&Vt(s,h)}}break}}function Qt(s){if(typeof s.tag!="string"&&typeof s.state.onremove=="function"&&l.call(s.state.onremove,s),s.attrs&&typeof s.attrs.onremove=="function"&&l.call(s.attrs.onremove,s),typeof s.tag!="string")s.instance!=null&&Qt(s.instance);else{var a=s.children;if(Array.isArray(a))for(var f=0;f<a.length;f++){var h=a[f];h!=null&&Qt(h)}}}function me(s,a,f){s.tag==="input"&&a.type!=null&&s.dom.setAttribute("type",a.type);var h=a!=null&&s.tag==="input"&&a.type==="file";for(var m in a)Zt(s,m,null,a[m],f,h)}function Zt(s,a,f,h,m,_){if(!(a==="key"||a==="is"||h==null||Sn(a)||f===h&&!zr(s,a)&&typeof h!="object"||a==="type"&&s.tag==="input")){if(a[0]==="o"&&a[1]==="n")return Dn(s,a,h);if(a.slice(0,6)==="xlink:")s.dom.setAttributeNS("http://www.w3.org/1999/xlink",a.slice(6),h);else if(a==="style")Tn(s.dom,f,h);else if(_n(s,a,m)){if(a==="value"){if((s.tag==="input"||s.tag==="textarea")&&s.dom.value===""+h&&(_||s.dom===u())||s.tag==="select"&&f!==null&&s.dom.value===""+h||s.tag==="option"&&f!==null&&s.dom.value===""+h)return;if(_&&""+h!=""){console.error("`value` is read-only on file inputs!");return}}s.dom[a]=h}else typeof h=="boolean"?h?s.dom.setAttribute(a,""):s.dom.removeAttribute(a):s.dom.setAttribute(a==="className"?"class":a,h)}}function Lr(s,a,f,h){if(!(a==="key"||a==="is"||f==null||Sn(a)))if(a[0]==="o"&&a[1]==="n")Dn(s,a,void 0);else if(a==="style")Tn(s.dom,f,null);else if(_n(s,a,h)&&a!=="className"&&a!=="title"&&!(a==="value"&&(s.tag==="option"||s.tag==="select"&&s.dom.selectedIndex===-1&&s.dom===u()))&&!(s.tag==="input"&&a==="type"))s.dom[a]=null;else{var m=a.indexOf(":");m!==-1&&(a=a.slice(m+1)),f!==!1&&s.dom.removeAttribute(a==="className"?"class":a)}}function $r(s,a){if("value"in a)if(a.value===null)s.dom.selectedIndex!==-1&&(s.dom.value=null);else{var f=""+a.value;(s.dom.value!==f||s.dom.selectedIndex===-1)&&(s.dom.value=f)}"selectedIndex"in a&&Zt(s,"selectedIndex",null,a.selectedIndex,void 0)}function qr(s,a,f,h){if(a&&a===f&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),f!=null){s.tag==="input"&&f.type!=null&&s.dom.setAttribute("type",f.type);var m=s.tag==="input"&&f.type==="file";for(var _ in f)Zt(s,_,a&&a[_],f[_],h,m)}var P;if(a!=null)for(var _ in a)(P=a[_])!=null&&(f==null||f[_]==null)&&Lr(s,_,P,h)}function zr(s,a){return a==="value"||a==="checked"||a==="selectedIndex"||a==="selected"&&s.dom===u()||s.tag==="option"&&s.dom.parentNode===t.activeElement}function Sn(s){return s==="oninit"||s==="oncreate"||s==="onupdate"||s==="onremove"||s==="onbeforeremove"||s==="onbeforeupdate"}function _n(s,a,f){return f===void 0&&(s.tag.indexOf("-")>-1||s.attrs!=null&&s.attrs.is||a!=="href"&&a!=="list"&&a!=="form"&&a!=="width"&&a!=="height")&&a in s.dom}var Hr=/[A-Z]/g;function Br(s){return"-"+s.toLowerCase()}function Le(s){return s[0]==="-"&&s[1]==="-"?s:s==="cssFloat"?"float":s.replace(Hr,Br)}function Tn(s,a,f){if(a!==f)if(f==null)s.style.cssText="";else if(typeof f!="object")s.style.cssText=f;else if(a==null||typeof a!="object"){s.style.cssText="";for(var h in f){var m=f[h];m!=null&&s.style.setProperty(Le(h),String(m))}}else{for(var h in f){var m=f[h];m!=null&&(m=String(m))!==String(a[h])&&s.style.setProperty(Le(h),m)}for(var h in a)a[h]!=null&&f[h]==null&&s.style.removeProperty(Le(h))}}function $e(){this._=n}$e.prototype=Object.create(null),$e.prototype.handleEvent=function(s){var a=this["on"+s.type],f;typeof a=="function"?f=a.call(s.currentTarget,s):typeof a.handleEvent=="function"&&a.handleEvent(s),this._&&s.redraw!==!1&&(0,this._)(),f===!1&&(s.preventDefault(),s.stopPropagation())};function Dn(s,a,f){if(s.events!=null){if(s.events._=n,s.events[a]===f)return;f!=null&&(typeof f=="function"||typeof f=="object")?(s.events[a]==null&&s.dom.addEventListener(a.slice(2),s.events,!1),s.events[a]=f):(s.events[a]!=null&&s.dom.removeEventListener(a.slice(2),s.events,!1),s.events[a]=void 0)}else f!=null&&(typeof f=="function"||typeof f=="object")&&(s.events=new $e,s.dom.addEventListener(a.slice(2),s.events,!1),s.events[a]=f)}function qe(s,a,f){typeof s.oninit=="function"&&l.call(s.oninit,a),typeof s.oncreate=="function"&&f.push(l.bind(s.oncreate,a))}function ze(s,a,f){typeof s.onupdate=="function"&&f.push(l.bind(s.onupdate,a))}function Xr(s,a){do{if(s.attrs!=null&&typeof s.attrs.onbeforeupdate=="function"){var f=l.call(s.attrs.onbeforeupdate,s,a);if(f!==void 0&&!f)break}if(typeof s.tag!="string"&&typeof s.state.onbeforeupdate=="function"){var f=l.call(s.state.onbeforeupdate,s,a);if(f!==void 0&&!f)break}return!1}while(!1);return s.dom=a.dom,s.domSize=a.domSize,s.instance=a.instance,s.attrs=a.attrs,s.children=a.children,s.text=a.text,!0}var te;return function(s,a,f){if(!s)throw new TypeError("DOM element being rendered to does not exist.");if(te!=null&&s.contains(te))throw new TypeError("Node is currently being rendered to and thus is locked.");var h=n,m=te,_=[],P=u(),R=s.namespaceURI;te=s,n=typeof f=="function"?f:void 0;try{s.vnodes==null&&(s.textContent=""),a=Ge.normalizeChildren(Array.isArray(a)?a:[a]),q(s,s.vnodes,a,_,null,R==="http://www.w3.org/1999/xhtml"?void 0:R),s.vnodes=a,P!=null&&u()!==P&&typeof P.focus=="function"&&P.focus();for(var D=0;D<_.length;D++)_[D]()}finally{n=h,te=m}}},or=oi(typeof window!="undefined"?window:null),An=jt,li=function(e,t,n){var r=[],i=!1,o=-1;function l(){for(o=0;o<r.length;o+=2)try{e(r[o],An(r[o+1]),u)}catch(p){n.error(p)}o=-1}function u(){i||(i=!0,t(function(){i=!1,l()}))}u.sync=l;function c(p,g){if(g!=null&&g.view==null&&typeof g!="function")throw new TypeError("m.mount expects a component, not a vnode.");var d=r.indexOf(p);d>=0&&(r.splice(d,2),d<=o&&(o-=2),e(p,[])),g!=null&&(r.push(p,g),e(p,An(g),u))}return{mount:c,redraw:u}},si=or,pn=li(si,typeof requestAnimationFrame!="undefined"?requestAnimationFrame:null,typeof console!="undefined"?console:null),lr=function(e){if(Object.prototype.toString.call(e)!=="[object Object]")return"";var t=[];for(var n in e)r(n,e[n]);return t.join("&");function r(i,o){if(Array.isArray(o))for(var l=0;l<o.length;l++)r(i+"["+l+"]",o[l]);else if(Object.prototype.toString.call(o)==="[object Object]")for(var l in o)r(i+"["+l+"]",o[l]);else t.push(encodeURIComponent(i)+(o!=null&&o!==""?"="+encodeURIComponent(o):""))}},ui=Me,sr=Object.assign||function(e,t){for(var n in t)ui.call(t,n)&&(e[n]=t[n])},fi=lr,ci=sr,hn=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(t==null)return e;var n=e.indexOf("?"),r=e.indexOf("#"),i=r<0?e.length:r,o=n<0?i:n,l=e.slice(0,o),u={};ci(u,t);var c=l.replace(/:([^\/\.-]+)(\.{3})?/g,function(b,k,q){return delete u[k],t[k]==null?b:q?t[k]:encodeURIComponent(String(t[k]))}),p=c.indexOf("?"),g=c.indexOf("#"),d=g<0?c.length:g,w=p<0?d:p,S=c.slice(0,w);n>=0&&(S+=e.slice(n,i)),p>=0&&(S+=(n<0?"?":"&")+c.slice(p,d));var E=fi(u);return E&&(S+=(n<0&&p<0?"?":"&")+E),r>=0&&(S+=e.slice(r)),g>=0&&(S+=(r<0?"":"&")+c.slice(g)),S},pi=hn,In=Me,hi=function(e,t,n){var r=0;function i(u){return new t(u)}i.prototype=t.prototype,i.__proto__=t;function o(u){return function(c,p){typeof c!="string"?(p=c,c=c.url):p==null&&(p={});var g=new t(function(E,b){u(pi(c,p.params),p,function(k){if(typeof p.type=="function")if(Array.isArray(k))for(var q=0;q<k.length;q++)k[q]=new p.type(k[q]);else k=new p.type(k);E(k)},b)});if(p.background===!0)return g;var d=0;function w(){--d===0&&typeof n=="function"&&n()}return S(g);function S(E){var b=E.then;return E.constructor=i,E.then=function(){d++;var k=b.apply(E,arguments);return k.then(w,function(q){if(w(),d===0)throw q}),S(k)},E}}}function l(u,c){for(var p in u.headers)if(In.call(u.headers,p)&&p.toLowerCase()===c)return!0;return!1}return{request:o(function(u,c,p,g){var d=c.method!=null?c.method.toUpperCase():"GET",w=c.body,S=(c.serialize==null||c.serialize===JSON.serialize)&&!(w instanceof e.FormData||w instanceof e.URLSearchParams),E=c.responseType||(typeof c.extract=="function"?"":"json"),b=new e.XMLHttpRequest,k=!1,q=!1,F=b,N,T=b.abort;b.abort=function(){k=!0,T.call(this)},b.open(d,u,c.async!==!1,typeof c.user=="string"?c.user:void 0,typeof c.password=="string"?c.password:void 0),S&&w!=null&&!l(c,"content-type")&&b.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof c.deserialize!="function"&&!l(c,"accept")&&b.setRequestHeader("Accept","application/json, text/*"),c.withCredentials&&(b.withCredentials=c.withCredentials),c.timeout&&(b.timeout=c.timeout),b.responseType=E;for(var M in c.headers)In.call(c.headers,M)&&b.setRequestHeader(M,c.headers[M]);b.onreadystatechange=function(C){if(!k&&C.target.readyState===4)try{var H=C.target.status>=200&&C.target.status<300||C.target.status===304||/^file:\/\//i.test(u),j=C.target.response,O;if(E==="json"){if(!C.target.responseType&&typeof c.extract!="function")try{j=JSON.parse(C.target.responseText)}catch{j=null}}else(!E||E==="text")&&j==null&&(j=C.target.responseText);if(typeof c.extract=="function"?(j=c.extract(C.target,c),H=!0):typeof c.deserialize=="function"&&(j=c.deserialize(j)),H)p(j);else{var K=function(){try{O=C.target.responseText}catch{O=j}var J=new Error(O);J.code=C.target.status,J.response=j,g(J)};b.status===0?setTimeout(function(){q||K()}):K()}}catch(J){g(J)}},b.ontimeout=function(C){q=!0;var H=new Error("Request timed out");H.code=C.target.status,g(H)},typeof c.config=="function"&&(b=c.config(b,c,u)||b,b!==F&&(N=b.abort,b.abort=function(){k=!0,N.call(this)})),w==null?b.send():typeof c.serialize=="function"?b.send(c.serialize(w)):w instanceof e.FormData||w instanceof e.URLSearchParams?b.send(w):b.send(JSON.stringify(w))}),jsonp:o(function(u,c,p,g){var d=c.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+r++,w=e.document.createElement("script");e[d]=function(S){delete e[d],w.parentNode.removeChild(w),p(S)},w.onerror=function(){delete e[d],w.parentNode.removeChild(w),g(new Error("JSONP request failed"))},w.src=u+(u.indexOf("?")<0?"?":"&")+encodeURIComponent(c.callbackKey||"callback")+"="+encodeURIComponent(d),e.document.documentElement.appendChild(w)})}},di=le.exports,gi=pn,mi=hi(typeof window!="undefined"?window:null,di,gi.redraw);function Pn(e){try{return decodeURIComponent(e)}catch{return e}}var ur=function(e){if(e===""||e==null)return{};e.charAt(0)==="?"&&(e=e.slice(1));for(var t=e.split("&"),n={},r={},i=0;i<t.length;i++){var o=t[i].split("="),l=Pn(o[0]),u=o.length===2?Pn(o[1]):"";u==="true"?u=!0:u==="false"&&(u=!1);var c=l.split(/\]\[?|\[/),p=r;l.indexOf("[")>-1&&c.pop();for(var g=0;g<c.length;g++){var d=c[g],w=c[g+1],S=w==""||!isNaN(parseInt(w,10));if(d===""){var l=c.slice(0,g).join();n[l]==null&&(n[l]=Array.isArray(p)?p.length:0),d=n[l]++}else if(d==="__proto__")break;if(g===c.length-1)p[d]=u;else{var E=Object.getOwnPropertyDescriptor(p,d);E!=null&&(E=E.value),E==null&&(p[d]=E=S?[]:{}),p=E}}}return r},yi=ur,dn=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),r=n<0?e.length:n,i=t<0?r:t,o=e.slice(0,i).replace(/\/{2,}/g,"/");return o?(o[0]!=="/"&&(o="/"+o),o.length>1&&o[o.length-1]==="/"&&(o=o.slice(0,-1))):o="/",{path:o,params:t<0?{}:yi(e.slice(t+1,r))}},wi=dn,vi=function(e){var t=wi(e),n=Object.keys(t.params),r=[],i=new RegExp("^"+t.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(o,l,u){return l==null?"\\"+o:(r.push({k:l,r:u==="..."}),u==="..."?"(.*)":u==="."?"([^/]+)\\.":"([^/]+)"+(u||""))})+"$");return function(o){for(var l=0;l<n.length;l++)if(t.params[n[l]]!==o.params[n[l]])return!1;if(!r.length)return i.test(o.path);var u=i.exec(o.path);if(u==null)return!1;for(var l=0;l<r.length;l++)o.params[r[l].k]=r[l].r?u[l+1]:decodeURIComponent(u[l+1]);return!0}},xn=Me,Nn=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$"),fr=function(e,t){var n={};if(t!=null)for(var r in e)xn.call(e,r)&&!Nn.test(r)&&t.indexOf(r)<0&&(n[r]=e[r]);else for(var r in e)xn.call(e,r)&&!Nn.test(r)&&(n[r]=e[r]);return n},bi=jt,Ei=ir,Si=le.exports,kn=hn,Mn=dn,_i=vi,Ti=sr,Di=fr,Ke={};function Ci(e){try{return decodeURIComponent(e)}catch{return e}}var Oi=function(e,t){var n=e==null?null:typeof e.setImmediate=="function"?e.setImmediate:e.setTimeout,r=Si.resolve(),i=!1,o=!1,l=0,u,c,p=Ke,g,d,w,S,E={onbeforeupdate:function(){return l=l?2:1,!(!l||Ke===p)},onremove:function(){e.removeEventListener("popstate",q,!1),e.removeEventListener("hashchange",k,!1)},view:function(){if(!(!l||Ke===p)){var T=[bi(g,d.key,d)];return p&&(T=p.render(T[0])),T}}},b=N.SKIP={};function k(){i=!1;var T=e.location.hash;N.prefix[0]!=="#"&&(T=e.location.search+T,N.prefix[0]!=="?"&&(T=e.location.pathname+T,T[0]!=="/"&&(T="/"+T)));var M=T.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,Ci).slice(N.prefix.length),C=Mn(M);Ti(C.params,e.history.state);function H(O){console.error(O),F(c,null,{replace:!0})}j(0);function j(O){for(;O<u.length;O++)if(u[O].check(C)){var K=u[O].component,J=u[O].route,wt=K,ot=S=function(et){if(ot===S){if(et===b)return j(O+1);g=et!=null&&(typeof et.view=="function"||typeof et=="function")?et:"div",d=C.params,w=M,S=null,p=K.render?K:null,l===2?t.redraw():(l=2,t.redraw.sync())}};K.view||typeof K=="function"?(K={},ot(wt)):K.onmatch?r.then(function(){return K.onmatch(C.params,M,J)}).then(ot,M===c?null:H):ot("div");return}if(M===c)throw new Error("Could not resolve default route "+c+".");F(c,null,{replace:!0})}}function q(){i||(i=!0,n(k))}function F(T,M,C){if(T=kn(T,M),o){q();var H=C?C.state:null,j=C?C.title:null;C&&C.replace?e.history.replaceState(H,j,N.prefix+T):e.history.pushState(H,j,N.prefix+T)}else e.location.href=N.prefix+T}function N(T,M,C){if(!T)throw new TypeError("DOM element being rendered to does not exist.");if(u=Object.keys(C).map(function(j){if(j[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(j))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:j,component:C[j],check:_i(j)}}),c=M,M!=null){var H=Mn(M);if(!u.some(function(j){return j.check(H)}))throw new ReferenceError("Default route doesn't match any known routes.")}typeof e.history.pushState=="function"?e.addEventListener("popstate",q,!1):N.prefix[0]==="#"&&e.addEventListener("hashchange",k,!1),o=!0,t.mount(T,E),k()}return N.set=function(T,M,C){S!=null&&(C=C||{},C.replace=!0),S=null,F(T,M,C)},N.get=function(){return w},N.prefix="#!",N.Link={view:function(T){var M=Ei(T.attrs.selector||"a",Di(T.attrs,["options","params","selector","onclick"]),T.children),C,H,j;return(M.attrs.disabled=Boolean(M.attrs.disabled))?(M.attrs.href=null,M.attrs["aria-disabled"]="true"):(C=T.attrs.options,H=T.attrs.onclick,j=kn(M.attrs.href,T.attrs.params),M.attrs.href=N.prefix+j,M.attrs.onclick=function(O){var K;typeof H=="function"?K=H.call(O.currentTarget,O):H==null||typeof H!="object"||typeof H.handleEvent=="function"&&H.handleEvent(O),K!==!1&&!O.defaultPrevented&&(O.button===0||O.which===0||O.which===1)&&(!O.currentTarget.target||O.currentTarget.target==="_self")&&!O.ctrlKey&&!O.metaKey&&!O.shiftKey&&!O.altKey&&(O.preventDefault(),O.redraw=!1,N.set(j,null,C))}),M}},N.param=function(T){return d&&T!=null?d[T]:d},N},Ai=pn,Ii=Oi(typeof window!="undefined"?window:null,Ai),je=ai,cr=mi,pr=pn,at=function(){return je.apply(this,arguments)};at.m=je;at.trust=je.trust;at.fragment=je.fragment;at.Fragment="[";at.mount=pr.mount;at.route=Ii;at.render=or;at.redraw=pr.redraw;at.request=cr.request;at.jsonp=cr.jsonp;at.parseQueryString=ur;at.buildQueryString=lr;at.parsePathname=dn;at.buildPathname=hn;at.vnode=jt;at.PromisePolyfill=ar;at.censor=fr;var y=at;function W(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function bt(e){return function t(n){return arguments.length===0||W(n)?t:e.apply(this,arguments)}}function $t(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return W(n)?t:bt(function(i){return e(n,i)});default:return W(n)&&W(r)?t:W(n)?bt(function(i){return e(i,r)}):W(r)?bt(function(i){return e(n,i)}):e(n,r)}}}function Pi(e){return function t(n,r,i){switch(arguments.length){case 0:return t;case 1:return W(n)?t:$t(function(o,l){return e(n,o,l)});case 2:return W(n)&&W(r)?t:W(n)?$t(function(o,l){return e(o,r,l)}):W(r)?$t(function(o,l){return e(n,o,l)}):bt(function(o){return e(n,r,o)});default:return W(n)&&W(r)&&W(i)?t:W(n)&&W(r)?$t(function(o,l){return e(o,l,i)}):W(n)&&W(i)?$t(function(o,l){return e(o,r,l)}):W(r)&&W(i)?$t(function(o,l){return e(n,o,l)}):W(n)?bt(function(o){return e(o,r,i)}):W(r)?bt(function(o){return e(n,o,i)}):W(i)?bt(function(o){return e(n,r,o)}):e(n,r,i)}}}var xi=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function Ni(e){return Object.prototype.toString.call(e)==="[object String]"}function Ae(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var jn=Object.prototype.toString,ki=function(){return jn.call(arguments)==="[object Arguments]"?function(t){return jn.call(t)==="[object Arguments]"}:function(t){return Ae("callee",t)}}(),hr=ki,Mi=!{toString:null}.propertyIsEnumerable("toString"),Rn=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Fn=function(){return arguments.propertyIsEnumerable("length")}(),ji=function(t,n){for(var r=0;r<t.length;){if(t[r]===n)return!0;r+=1}return!1},Ri=bt(typeof Object.keys=="function"&&!Fn?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var n,r,i=[],o=Fn&&hr(t);for(n in t)Ae(n,t)&&(!o||n!=="length")&&(i[i.length]=n);if(Mi)for(r=Rn.length-1;r>=0;)n=Rn[r],Ae(n,t)&&!ji(i,n)&&(i[i.length]=n),r-=1;return i}),Ln=Ri,Fi=bt(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}),$n=Fi;function qn(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function zn(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}function Li(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function $i(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Je=typeof Object.is=="function"?Object.is:$i;function Hn(e,t,n,r){var i=qn(e),o=qn(t);function l(u,c){return gn(u,c,n.slice(),r.slice())}return!zn(function(u,c){return!zn(l,c,u)},o,i)}function gn(e,t,n,r){if(Je(e,t))return!0;var i=$n(e);if(i!==$n(t)||e==null||t==null)return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(i){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&Li(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&Je(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!Je(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var o=n.length-1;o>=0;){if(n[o]===e)return r[o]===t;o-=1}switch(i){case"Map":return e.size!==t.size?!1:Hn(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size!==t.size?!1:Hn(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var l=Ln(e);if(l.length!==Ln(t).length)return!1;var u=n.concat([e]),c=r.concat([t]);for(o=l.length-1;o>=0;){var p=l[o];if(!(Ae(p,t)&&gn(t[p],e[p],u,c)))return!1;o-=1}return!0}var qi=$t(function(t,n){return gn(t,n,[],[])}),dr=qi;function zi(e){return Object.prototype.toString.call(e)==="[object Object]"}var Hi=bt(function(t){return t!=null&&typeof t["fantasy-land/empty"]=="function"?t["fantasy-land/empty"]():t!=null&&t.constructor!=null&&typeof t.constructor["fantasy-land/empty"]=="function"?t.constructor["fantasy-land/empty"]():t!=null&&typeof t.empty=="function"?t.empty():t!=null&&t.constructor!=null&&typeof t.constructor.empty=="function"?t.constructor.empty():xi(t)?[]:Ni(t)?"":zi(t)?{}:hr(t)?function(){return arguments}():void 0}),Bi=Hi,Xi=bt(function(t){return t!=null&&dr(t,Bi(t))}),Bn=Xi,Ui=Pi(function(t,n,r){return dr(n,r[t])}),Ct=Ui,gr=typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout,Yi=$;function $(e,t){this.fork=e,this.cleanup=t||function(){}}$.prototype.of=function(t){return new $(function(n,r){return r(t)})};$.of=$.prototype.of;$.prototype.rejected=function(t){return new $(function(n){return n(t)})};$.rejected=$.prototype.rejected;$.prototype.map=function(t){var n=this.fork,r=this.cleanup;return new $(function(i,o){return n(function(l){return i(l)},function(l){return o(t(l))})},r)};$.prototype.chain=function(t){var n=this.fork,r=this.cleanup;return new $(function(i,o){return n(function(l){return i(l)},function(l){return t(l).fork(i,o)})},r)};$.prototype.ap=function(t){var n=this.fork,r=t.fork,i=this.cleanup,o=t.cleanup;function l(u){i(u[0]),o(u[1])}return new $(function(u,c){var p,g=!1,d,w=!1,S=!1,E,b=n(F,q(function(N){g=!0,p=N})),k=r(F,q(function(N){w=!0,d=N}));function q(N){return function(T){if(!S)return N(T),g&&w?(gr(function(){l(E)}),c(p(d))):T}}function F(N){if(!S)return S=!0,u(N)}return E=[b,k]},l)};$.prototype.concat=function(t){var n=this.fork,r=t.fork,i=this.cleanup,o=t.cleanup;function l(u){i(u[0]),o(u[1])}return new $(function(u,c){var p=!1,g,d=n(S(u),S(c)),w=r(S(u),S(c));return g=[d,w];function S(E){return function(b){if(!p)return p=!0,gr(function(){l(g)}),E(b)}}},l)};$.empty=function(){return new $(function(){})};$.prototype.empty=$.empty;$.prototype.toString=function(){return"Task"};$.prototype.orElse=function(t){var n=this.fork,r=this.cleanup;return new $(function(i,o){return n(function(l){return t(l).fork(i,o)},function(l){return o(l)})},r)};$.prototype.fold=function(t,n){var r=this.fork,i=this.cleanup;return new $(function(o,l){return r(function(u){return l(t(u))},function(u){return l(n(u))})},i)};$.prototype.cata=function(t){return this.fold(t.Rejected,t.Resolved)};$.prototype.swap=function(){var t=this.fork,n=this.cleanup;return new $(function(r,i){return t(function(o){return i(o)},function(o){return r(o)})},n)};$.prototype.bimap=function(t,n){var r=this.fork,i=this.cleanup;return new $(function(o,l){return r(function(u){return o(t(u))},function(u){return l(n(u))})},i)};$.prototype.rejectedMap=function(t){var n=this.fork,r=this.cleanup;return new $(function(i,o){return n(function(l){return i(t(l))},function(l){return o(l)})},r)};var mr=Yi;const Wi="https://shopper.deno.dev/",Gi={"Content-Type":"application/json"},Ki=e=>t=>n=>t(JSON.parse(JSON.stringify(n))),Ji=e=>t=>n=>t(n),we=e=>t=>n=>r=>new mr((i,o)=>y.request({method:e,url:Wi+n,headers:Gi,body:r,withCredentials:!1}).then(Ji()(o),Ki()(i))),Vi={getTask:(e,t)=>we("GET")(e)(t)(),postTask:(e,t,n)=>we("POST")(e)(t)(n),putTask:(e,t,n)=>we("PUT")(e)(t)(n),deleteTask:(e,t)=>we("DELETE")(e)(t)()},yr=()=>"xxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}),wr=e=>t=>(console.log(e,t),t);window.log=wr;const Qi=["of them","bag(s)","box(s)","can(s)","gram(s)","kilogram(s)","pound(s)","liter(s)","mliter(s)","ounce(s)"],Zi=e=>{var t;return e.stores.find(Ct("id",(t=e.currentStore)==null?void 0:t.id))||e.stores[0]},Rt=e=>{const t=l=>l.http.getTask(l,"stores"),n=l=>l.http.getTask(l,"cats"),r=l=>l.http.getTask(l,"items"),i=({stores:l,cats:u,items:c})=>{let p=u.map(g=>(g.items=c.filter(Ct("catId",g.id)).sort((d,w)=>d.order-w.order),g)).sort((g,d)=>g.order-d.order);return{cats:p,stores:l.map(g=>(g.cats=p.filter(Ct("storeId",g.id)).sort((d,w)=>d.order-w.order),g)),items:c}},o=({stores:l,cats:u,items:c})=>{e.stores=l,e.cats=u,e.items=c,e.currentStore=Zi(e)};mr.of(l=>u=>c=>i({stores:l,cats:u,items:c})).ap(t(e)).ap(n(e)).ap(r(e)).fork(wr("error"),o)},ta=({catId:e,title:t,notes:n,quantity:r,unit:i,price:o,order:l})=>({id:yr(),title:t,notes:n,catId:e,order:l,quantity:r,unit:i,price:o,notes:n,purchased:!1}),ea=(e,t=0)=>({title:e,id:yr(),order:t}),se={state:{},http:Vi,settings:{},state:{dragging:{isDragging:!0,item:"",swapItem:""},catIds:[],items:[],showModal:!1,modalContent:null},stores:[],cats:[],items:[],currentStore:null},mn=e=>{e.state.showModal=!1,e.state.modalContent=null},na=(e,t)=>{let n=ea(t.title);const r=log("error"),i=o=>{t.title="",e.state.showModal=!1,e.state.modalContent=null,Rt(e)};e.http.postTask(e,"stores",n).fork(r,i)},vr=()=>{const e={title:""};return{view:({attrs:{mdl:t}})=>y("form.w3-container.w3-card.w3-white.w3-animate-zoom",{onsubmit:n=>n.preventDefault()},y(".w3-section",y("label",y("b","Store Title")),y("input.w3-input.w3-border-bottom",{oncreate:({dom:n})=>{n.select(),n.focus()},type:"text",value:e.title,oninput:n=>e.title=n.target.value})),y("button.w3-button.w3-block.w3-orange.w3-section.w3-padding",{onclick:()=>na(t,e)},"add"))}},ra=(e,t)=>e.cats.find(Ct("id",t)).items.length||0,ia=(e,t,n)=>{const{catId:r,title:i,notes:o,order:l,quantity:u,unit:c,price:p,id:g}=t;let d=n?{catId:r,title:i,notes:o,order:l,quantity:u,unit:c,price:p,id:g}:ta({catId:r,title:i,notes:o,order:ra(e,r),quantity:u,unit:c,price:p});const w=E=>{t={catId:r,title:"",notes:"",order:0,quantity:"",unit:"",price:0},Rt(e),mn(e)};return((E,b)=>n?E.http.postTask(E,"items",b):E.http.putTask(E,`items/${b.id}`,b))(e,d).fork(log("error"),w)},aa=(e,t)=>e.http.deleteTask(e,`items/${t}`).fork(log("err"),()=>{Rt(e),mn(e)}),yn=({attrs:{mdl:e,catId:t,item:n,isEdit:r}})=>{const i={catId:t,catTitle:"",title:"",notes:"",order:"",quantity:"",unit:"",price:""};return t&&(i.catTitle=e.cats.find(Ct("id",t)).title),r&&(i.catId=n.catId,i.title=n.title,i.notes=n.notes,i.order=n.order,i.quantity=n.quantity,i.unit=n.unit,i.price=n.price,i.id=n.id),{view:({attrs:{mdl:o}})=>{var l;return y("form.w3-container.w3-card.w3-white.w3-animate-zoom",{onsubmit:u=>u.preventDefault()},y(".w3-section",y("button.w3-button.w3-black.w3-border-black.w3-text-white",{style:{position:"absolute",top:"-50px"},onclick:()=>mn(o)},y.trust("&#10005;"))),y(".w3-section",y("label",y("b","Item")),y("input.w3-input.w3-border-bottom",{oncreate:({dom:u})=>{u.select(),u.focus()},type:"text",value:i.title,oninput:u=>i.title=u.target.value})),y(".w3-section",y("label",y("b","Category")),y("select.w3-input.w3-border-bottom",{value:((l=o.cats.find(Ct("id",i.catId)))==null?void 0:l.title)||"",onchange:u=>{i.catTitle=u.target.value,i.catId=o.cats.find(Ct("title",i.catTitle)).id}},o.cats.map(u=>y(`option#${u.id}`,u.title)))),y(".w3-section",y("label",y("b","Quantity")),y("input.w3-input.w3-border-bottom",{type:"number",value:i.quantity,pattern:"[0-9]*",inputmode:"numeric",oninput:u=>i.quantity=u.target.value})),y(".w3-section",y("label",y("b","Unit")),y("select.w3-input.w3-border-bottom",{value:i.unit,onchange:u=>i.unit=u.target.value},Qi.map(u=>y("option",u)))),y(".w3-section",y("label",y("b","Price")),y("input.w3-input.w3-border-bottom",{pattern:"[0-9]*",inputmode:"numeric",value:i.price,oninput:u=>i.price=u.target.value})),y(".w3-section",y("label",y("b","Notes")),y("textarea.w3-input.w3-border-bottom",{oninput:u=>i.notes=u.target.value},i.notes)),y("button.w3-button.w3-block.w3-orange.w3-margin-bottom",{onclick:()=>ia(o,i,r)},r?"Update":"Add"),r&&y("button.w3-button.w3-red.w3-margin-top.w3-left",{onclick:()=>aa(o,n.id)},"Delete"))}}};/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xn(Object(n),!0).forEach(function(r){oa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _e(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_e=function(t){return typeof t}:_e=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(e)}function oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(){return At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},At.apply(this,arguments)}function la(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function sa(e,t){if(e==null)return{};var n=la(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}var ua="1.15.0";function Ot(e){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(e)}var It=Ot(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),de=Ot(/Edge/i),Un=Ot(/firefox/i),ue=Ot(/safari/i)&&!Ot(/chrome/i)&&!Ot(/android/i),br=Ot(/iP(ad|od|hone)/i),Er=Ot(/chrome/i)&&Ot(/android/i),Sr={capture:!1,passive:!1};function z(e,t,n){e.addEventListener(t,n,!It&&Sr)}function L(e,t,n){e.removeEventListener(t,n,!It&&Sr)}function Ie(e,t){if(!!t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function fa(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function St(e,t,n,r){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Ie(e,t):Ie(e,t))||r&&e===n)return e;if(e===n)break}while(e=fa(e))}return null}var Yn=/\s+/g;function gt(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(Yn," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(Yn," ")}}function I(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function Kt(e,t){var n="";if(typeof e=="string")n=e;else do{var r=I(e,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function _r(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function _t(){var e=document.scrollingElement;return e||document.documentElement}function nt(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var o,l,u,c,p,g,d;if(e!==window&&e.parentNode&&e!==_t()?(o=e.getBoundingClientRect(),l=o.top,u=o.left,c=o.bottom,p=o.right,g=o.height,d=o.width):(l=0,u=0,c=window.innerHeight,p=window.innerWidth,g=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!It))do if(i&&i.getBoundingClientRect&&(I(i,"transform")!=="none"||n&&I(i,"position")!=="static")){var w=i.getBoundingClientRect();l-=w.top+parseInt(I(i,"border-top-width")),u-=w.left+parseInt(I(i,"border-left-width")),c=l+o.height,p=u+o.width;break}while(i=i.parentNode);if(r&&e!==window){var S=Kt(i||e),E=S&&S.a,b=S&&S.d;S&&(l/=b,u/=E,d/=E,g/=b,c=l+g,p=u+d)}return{top:l,left:u,bottom:c,right:p,width:d,height:g}}}function Wn(e,t,n){for(var r=Mt(e,!0),i=nt(e)[t];r;){var o=nt(r)[n],l=void 0;if(n==="top"||n==="left"?l=i>=o:l=i<=o,!l)return r;if(r===_t())break;r=Mt(r,!1)}return!1}function Jt(e,t,n,r){for(var i=0,o=0,l=e.children;o<l.length;){if(l[o].style.display!=="none"&&l[o]!==A.ghost&&(r||l[o]!==A.dragged)&&St(l[o],n.draggable,e,!1)){if(i===t)return l[o];i++}o++}return null}function wn(e,t){for(var n=e.lastElementChild;n&&(n===A.ghost||I(n,"display")==="none"||t&&!Ie(n,t));)n=n.previousElementSibling;return n||null}function vt(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==A.clone&&(!t||Ie(e,t))&&n++;return n}function Gn(e){var t=0,n=0,r=_t();if(e)do{var i=Kt(e),o=i.a,l=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*l}while(e!==r&&(e=e.parentNode));return[t,n]}function ca(e,t){for(var n in e)if(!!e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function Mt(e,t){if(!e||!e.getBoundingClientRect)return _t();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=I(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return _t();if(r||t)return n;r=!0}}while(n=n.parentNode);return _t()}function pa(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Ve(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var fe;function Tr(e,t){return function(){if(!fe){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),fe=setTimeout(function(){fe=void 0},t)}}}function ha(){clearTimeout(fe),fe=void 0}function Dr(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Cr(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var yt="Sortable"+new Date().getTime();function da(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(I(i,"display")==="none"||i===A.ghost)){e.push({target:i,rect:nt(i)});var o=Tt({},e[e.length-1].rect);if(i.thisAnimationDuration){var l=Kt(i,!0);l&&(o.top-=l.f,o.left-=l.e)}i.fromRect=o}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(ca(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(t),typeof r=="function"&&r();return}var o=!1,l=0;e.forEach(function(u){var c=0,p=u.target,g=p.fromRect,d=nt(p),w=p.prevFromRect,S=p.prevToRect,E=u.rect,b=Kt(p,!0);b&&(d.top-=b.f,d.left-=b.e),p.toRect=d,p.thisAnimationDuration&&Ve(w,d)&&!Ve(g,d)&&(E.top-d.top)/(E.left-d.left)===(g.top-d.top)/(g.left-d.left)&&(c=ma(E,w,S,i.options)),Ve(d,g)||(p.prevFromRect=g,p.prevToRect=d,c||(c=i.options.animation),i.animate(p,E,d,c)),c&&(o=!0,l=Math.max(l,c),clearTimeout(p.animationResetTimer),p.animationResetTimer=setTimeout(function(){p.animationTime=0,p.prevFromRect=null,p.fromRect=null,p.prevToRect=null,p.thisAnimationDuration=null},c),p.thisAnimationDuration=c)}),clearTimeout(t),o?t=setTimeout(function(){typeof r=="function"&&r()},l):typeof r=="function"&&r(),e=[]},animate:function(r,i,o,l){if(l){I(r,"transition",""),I(r,"transform","");var u=Kt(this.el),c=u&&u.a,p=u&&u.d,g=(i.left-o.left)/(c||1),d=(i.top-o.top)/(p||1);r.animatingX=!!g,r.animatingY=!!d,I(r,"transform","translate3d("+g+"px,"+d+"px,0)"),this.forRepaintDummy=ga(r),I(r,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),I(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){I(r,"transition",""),I(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},l)}}}}function ga(e){return e.offsetWidth}function ma(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}var Xt=[],Qe={initializeByDefault:!0},ge={mount:function(t){for(var n in Qe)Qe.hasOwnProperty(n)&&!(n in t)&&(t[n]=Qe[n]);Xt.forEach(function(r){if(r.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Xt.push(t)},pluginEvent:function(t,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var o=t+"Global";Xt.forEach(function(l){!n[l.pluginName]||(n[l.pluginName][o]&&n[l.pluginName][o](Tt({sortable:n},r)),n.options[l.pluginName]&&n[l.pluginName][t]&&n[l.pluginName][t](Tt({sortable:n},r)))})},initializePlugins:function(t,n,r,i){Xt.forEach(function(u){var c=u.pluginName;if(!(!t.options[c]&&!u.initializeByDefault)){var p=new u(t,n,t.options);p.sortable=t,p.options=t.options,t[c]=p,At(r,p.defaults)}});for(var o in t.options)if(!!t.options.hasOwnProperty(o)){var l=this.modifyOption(t,o,t.options[o]);typeof l!="undefined"&&(t.options[o]=l)}},getEventProperties:function(t,n){var r={};return Xt.forEach(function(i){typeof i.eventProperties=="function"&&At(r,i.eventProperties.call(n[i.pluginName],t))}),r},modifyOption:function(t,n,r){var i;return Xt.forEach(function(o){!t[o.pluginName]||o.optionListeners&&typeof o.optionListeners[n]=="function"&&(i=o.optionListeners[n].call(t[o.pluginName],r))}),i}};function ya(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,l=e.toEl,u=e.fromEl,c=e.oldIndex,p=e.newIndex,g=e.oldDraggableIndex,d=e.newDraggableIndex,w=e.originalEvent,S=e.putSortable,E=e.extraEventProperties;if(t=t||n&&n[yt],!!t){var b,k=t.options,q="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!It&&!de?b=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(r,!0,!0)),b.to=l||n,b.from=u||n,b.item=i||n,b.clone=o,b.oldIndex=c,b.newIndex=p,b.oldDraggableIndex=g,b.newDraggableIndex=d,b.originalEvent=w,b.pullMode=S?S.lastPutMode:void 0;var F=Tt(Tt({},E),ge.getEventProperties(r,t));for(var N in F)b[N]=F[N];n&&n.dispatchEvent(b),k[q]&&k[q].call(t,b)}}var wa=["evt"],dt=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,o=sa(r,wa);ge.pluginEvent.bind(A)(t,n,Tt({dragEl:v,parentEl:Q,ghostEl:x,rootEl:U,nextEl:qt,lastDownEl:Te,cloneEl:Y,cloneHidden:kt,dragStarted:ie,putSortable:lt,activeSortable:A.active,originalEvent:i,oldIndex:Gt,oldDraggableIndex:ce,newIndex:mt,newDraggableIndex:Nt,hideGhostForTarget:Pr,unhideGhostForTarget:xr,cloneNowHidden:function(){kt=!0},cloneNowShown:function(){kt=!1},dispatchSortableEvent:function(u){pt({sortable:n,name:u,originalEvent:i})}},o))};function pt(e){ya(Tt({putSortable:lt,cloneEl:Y,targetEl:v,rootEl:U,oldIndex:Gt,oldDraggableIndex:ce,newIndex:mt,newDraggableIndex:Nt},e))}var v,Q,x,U,qt,Te,Y,kt,Gt,mt,ce,Nt,ve,lt,Wt=!1,Pe=!1,xe=[],Ft,Et,Ze,tn,Kn,Jn,ie,Ut,pe,he=!1,be=!1,De,ut,en=[],ln=!1,Ne=[],Re=typeof document!="undefined",Ee=br,Vn=de||It?"cssFloat":"float",va=Re&&!Er&&!br&&"draggable"in document.createElement("div"),Or=function(){if(!!Re){if(It)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Ar=function(t,n){var r=I(t),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=Jt(t,0,n),l=Jt(t,1,n),u=o&&I(o),c=l&&I(l),p=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+nt(o).width,g=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+nt(l).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&u.float&&u.float!=="none"){var d=u.float==="left"?"left":"right";return l&&(c.clear==="both"||c.clear===d)?"vertical":"horizontal"}return o&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||p>=i&&r[Vn]==="none"||l&&r[Vn]==="none"&&p+g>i)?"vertical":"horizontal"},ba=function(t,n,r){var i=r?t.left:t.top,o=r?t.right:t.bottom,l=r?t.width:t.height,u=r?n.left:n.top,c=r?n.right:n.bottom,p=r?n.width:n.height;return i===u||o===c||i+l/2===u+p/2},Ea=function(t,n){var r;return xe.some(function(i){var o=i[yt].options.emptyInsertThreshold;if(!(!o||wn(i))){var l=nt(i),u=t>=l.left-o&&t<=l.right+o,c=n>=l.top-o&&n<=l.bottom+o;if(u&&c)return r=i}}),r},Ir=function(t){function n(o,l){return function(u,c,p,g){var d=u.options.group.name&&c.options.group.name&&u.options.group.name===c.options.group.name;if(o==null&&(l||d))return!0;if(o==null||o===!1)return!1;if(l&&o==="clone")return o;if(typeof o=="function")return n(o(u,c,p,g),l)(u,c,p,g);var w=(l?u:c).options.group.name;return o===!0||typeof o=="string"&&o===w||o.join&&o.indexOf(w)>-1}}var r={},i=t.group;(!i||_e(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,t.group=r},Pr=function(){!Or&&x&&I(x,"display","none")},xr=function(){!Or&&x&&I(x,"display","")};Re&&!Er&&document.addEventListener("click",function(e){if(Pe)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Pe=!1,!1},!0);var Lt=function(t){if(v){t=t.touches?t.touches[0]:t;var n=Ea(t.clientX,t.clientY);if(n){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[yt]._onDragOver(r)}}},Sa=function(t){v&&v.parentNode[yt]._isOutsideThisEl(t.target)};function A(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=At({},t),e[yt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ar(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,u){l.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:A.supportPointer!==!1&&"PointerEvent"in window&&!ue,emptyInsertThreshold:5};ge.initializePlugins(this,e,n);for(var r in n)!(r in t)&&(t[r]=n[r]);Ir(t);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:va,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?z(e,"pointerdown",this._onTapStart):(z(e,"mousedown",this._onTapStart),z(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(z(e,"dragover",this),z(e,"dragenter",this)),xe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),At(this,da())}A.prototype={constructor:A,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ut=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,v):this.options.direction},_onTapStart:function(t){if(!!t.cancelable){var n=this,r=this.el,i=this.options,o=i.preventOnFilter,l=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,c=(u||t).target,p=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||c,g=i.filter;if(Pa(r),!v&&!(/mousedown|pointerdown/.test(l)&&t.button!==0||i.disabled)&&!p.isContentEditable&&!(!this.nativeDraggable&&ue&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=St(c,i.draggable,r,!1),!(c&&c.animated)&&Te!==c)){if(Gt=vt(c),ce=vt(c,i.draggable),typeof g=="function"){if(g.call(this,t,c,this)){pt({sortable:n,rootEl:p,name:"filter",targetEl:c,toEl:r,fromEl:r}),dt("filter",n,{evt:t}),o&&t.cancelable&&t.preventDefault();return}}else if(g&&(g=g.split(",").some(function(d){if(d=St(p,d.trim(),r,!1),d)return pt({sortable:n,rootEl:d,name:"filter",targetEl:c,fromEl:r,toEl:r}),dt("filter",n,{evt:t}),!0}),g)){o&&t.cancelable&&t.preventDefault();return}i.handle&&!St(p,i.handle,r,!1)||this._prepareDragStart(t,u,c)}}},_prepareDragStart:function(t,n,r){var i=this,o=i.el,l=i.options,u=o.ownerDocument,c;if(r&&!v&&r.parentNode===o){var p=nt(r);if(U=o,v=r,Q=v.parentNode,qt=v.nextSibling,Te=r,ve=l.group,A.dragged=v,Ft={target:v,clientX:(n||t).clientX,clientY:(n||t).clientY},Kn=Ft.clientX-p.left,Jn=Ft.clientY-p.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,v.style["will-change"]="all",c=function(){if(dt("delayEnded",i,{evt:t}),A.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Un&&i.nativeDraggable&&(v.draggable=!0),i._triggerDragStart(t,n),pt({sortable:i,name:"choose",originalEvent:t}),gt(v,l.chosenClass,!0)},l.ignore.split(",").forEach(function(g){_r(v,g.trim(),nn)}),z(u,"dragover",Lt),z(u,"mousemove",Lt),z(u,"touchmove",Lt),z(u,"mouseup",i._onDrop),z(u,"touchend",i._onDrop),z(u,"touchcancel",i._onDrop),Un&&this.nativeDraggable&&(this.options.touchStartThreshold=4,v.draggable=!0),dt("delayStart",this,{evt:t}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(de||It))){if(A.eventCanceled){this._onDrop();return}z(u,"mouseup",i._disableDelayedDrag),z(u,"touchend",i._disableDelayedDrag),z(u,"touchcancel",i._disableDelayedDrag),z(u,"mousemove",i._delayedDragTouchMoveHandler),z(u,"touchmove",i._delayedDragTouchMoveHandler),l.supportPointer&&z(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(c,l.delay)}else c()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&nn(v),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;L(t,"mouseup",this._disableDelayedDrag),L(t,"touchend",this._disableDelayedDrag),L(t,"touchcancel",this._disableDelayedDrag),L(t,"mousemove",this._delayedDragTouchMoveHandler),L(t,"touchmove",this._delayedDragTouchMoveHandler),L(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?z(document,"pointermove",this._onTouchMove):n?z(document,"touchmove",this._onTouchMove):z(document,"mousemove",this._onTouchMove):(z(v,"dragend",this),z(U,"dragstart",this._onDragStart));try{document.selection?Ce(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Wt=!1,U&&v){dt("dragStarted",this,{evt:n}),this.nativeDraggable&&z(document,"dragover",Sa);var r=this.options;!t&&gt(v,r.dragClass,!1),gt(v,r.ghostClass,!0),A.active=this,t&&this._appendGhost(),pt({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Et){this._lastX=Et.clientX,this._lastY=Et.clientY,Pr();for(var t=document.elementFromPoint(Et.clientX,Et.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Et.clientX,Et.clientY),t!==n);)n=t;if(v.parentNode[yt]._isOutsideThisEl(t),n)do{if(n[yt]){var r=void 0;if(r=n[yt]._onDragOver({clientX:Et.clientX,clientY:Et.clientY,target:t,rootEl:n}),r&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);xr()}},_onTouchMove:function(t){if(Ft){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,o=t.touches?t.touches[0]:t,l=x&&Kt(x,!0),u=x&&l&&l.a,c=x&&l&&l.d,p=Ee&&ut&&Gn(ut),g=(o.clientX-Ft.clientX+i.x)/(u||1)+(p?p[0]-en[0]:0)/(u||1),d=(o.clientY-Ft.clientY+i.y)/(c||1)+(p?p[1]-en[1]:0)/(c||1);if(!A.active&&!Wt){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(t,!0)}if(x){l?(l.e+=g-(Ze||0),l.f+=d-(tn||0)):l={a:1,b:0,c:0,d:1,e:g,f:d};var w="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");I(x,"webkitTransform",w),I(x,"mozTransform",w),I(x,"msTransform",w),I(x,"transform",w),Ze=g,tn=d,Et=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!x){var t=this.options.fallbackOnBody?document.body:U,n=nt(v,!0,Ee,!0,t),r=this.options;if(Ee){for(ut=t;I(ut,"position")==="static"&&I(ut,"transform")==="none"&&ut!==document;)ut=ut.parentNode;ut!==document.body&&ut!==document.documentElement?(ut===document&&(ut=_t()),n.top+=ut.scrollTop,n.left+=ut.scrollLeft):ut=_t(),en=Gn(ut)}x=v.cloneNode(!0),gt(x,r.ghostClass,!1),gt(x,r.fallbackClass,!0),gt(x,r.dragClass,!0),I(x,"transition",""),I(x,"transform",""),I(x,"box-sizing","border-box"),I(x,"margin",0),I(x,"top",n.top),I(x,"left",n.left),I(x,"width",n.width),I(x,"height",n.height),I(x,"opacity","0.8"),I(x,"position",Ee?"absolute":"fixed"),I(x,"zIndex","100000"),I(x,"pointerEvents","none"),A.ghost=x,t.appendChild(x),I(x,"transform-origin",Kn/parseInt(x.style.width)*100+"% "+Jn/parseInt(x.style.height)*100+"%")}},_onDragStart:function(t,n){var r=this,i=t.dataTransfer,o=r.options;if(dt("dragStart",this,{evt:t}),A.eventCanceled){this._onDrop();return}dt("setupClone",this),A.eventCanceled||(Y=Cr(v),Y.removeAttribute("id"),Y.draggable=!1,Y.style["will-change"]="",this._hideClone(),gt(Y,this.options.chosenClass,!1),A.clone=Y),r.cloneId=Ce(function(){dt("clone",r),!A.eventCanceled&&(r.options.removeCloneOnHide||U.insertBefore(Y,v),r._hideClone(),pt({sortable:r,name:"clone"}))}),!n&&gt(v,o.dragClass,!0),n?(Pe=!0,r._loopId=setInterval(r._emulateDragOver,50)):(L(document,"mouseup",r._onDrop),L(document,"touchend",r._onDrop),L(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(r,i,v)),z(document,"drop",r),I(v,"transform","translateZ(0)")),Wt=!0,r._dragStartId=Ce(r._dragStarted.bind(r,n,t)),z(document,"selectstart",r),ie=!0,ue&&I(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,r=t.target,i,o,l,u=this.options,c=u.group,p=A.active,g=ve===c,d=u.sort,w=lt||p,S,E=this,b=!1;if(ln)return;function k(xt,Vt){dt(xt,E,Tt({evt:t,isOwner:g,axis:S?"vertical":"horizontal",revert:l,dragRect:i,targetRect:o,canSort:d,fromSortable:w,target:r,completed:F,onMove:function(me,Zt){return Se(U,n,v,i,me,nt(me),t,Zt)},changed:N},Vt))}function q(){k("dragOverAnimationCapture"),E.captureAnimationState(),E!==w&&w.captureAnimationState()}function F(xt){return k("dragOverCompleted",{insertion:xt}),xt&&(g?p._hideClone():p._showClone(E),E!==w&&(gt(v,lt?lt.options.ghostClass:p.options.ghostClass,!1),gt(v,u.ghostClass,!0)),lt!==E&&E!==A.active?lt=E:E===A.active&&lt&&(lt=null),w===E&&(E._ignoreWhileAnimating=r),E.animateAll(function(){k("dragOverAnimationComplete"),E._ignoreWhileAnimating=null}),E!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(r===v&&!v.animated||r===n&&!r.animated)&&(Ut=null),!u.dragoverBubble&&!t.rootEl&&r!==document&&(v.parentNode[yt]._isOutsideThisEl(t.target),!xt&&Lt(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),b=!0}function N(){mt=vt(v),Nt=vt(v,u.draggable),pt({sortable:E,name:"change",toEl:n,newIndex:mt,newDraggableIndex:Nt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),r=St(r,u.draggable,n,!0),k("dragOver"),A.eventCanceled)return b;if(v.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||E._ignoreWhileAnimating===r)return F(!1);if(Pe=!1,p&&!u.disabled&&(g?d||(l=Q!==U):lt===this||(this.lastPutMode=ve.checkPull(this,p,v,t))&&c.checkPut(this,p,v,t))){if(S=this._getDirection(t,r)==="vertical",i=nt(v),k("dragOverValid"),A.eventCanceled)return b;if(l)return Q=U,q(),this._hideClone(),k("revert"),A.eventCanceled||(qt?U.insertBefore(v,qt):U.appendChild(v)),F(!0);var T=wn(n,u.draggable);if(!T||Ca(t,S,this)&&!T.animated){if(T===v)return F(!1);if(T&&n===t.target&&(r=T),r&&(o=nt(r)),Se(U,n,v,i,r,o,t,!!r)!==!1)return q(),T&&T.nextSibling?n.insertBefore(v,T.nextSibling):n.appendChild(v),Q=n,N(),F(!0)}else if(T&&Da(t,S,this)){var M=Jt(n,0,u,!0);if(M===v)return F(!1);if(r=M,o=nt(r),Se(U,n,v,i,r,o,t,!1)!==!1)return q(),n.insertBefore(v,M),Q=n,N(),F(!0)}else if(r.parentNode===n){o=nt(r);var C=0,H,j=v.parentNode!==n,O=!ba(v.animated&&v.toRect||i,r.animated&&r.toRect||o,S),K=S?"top":"left",J=Wn(r,"top","top")||Wn(v,"top","top"),wt=J?J.scrollTop:void 0;Ut!==r&&(H=o[K],he=!1,be=!O&&u.invertSwap||j),C=Oa(t,r,o,S,O?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,be,Ut===r);var ot;if(C!==0){var et=vt(v);do et-=C,ot=Q.children[et];while(ot&&(I(ot,"display")==="none"||ot===x))}if(C===0||ot===r)return F(!1);Ut=r,pe=C;var Pt=r.nextElementSibling,ht=!1;ht=C===1;var Dt=Se(U,n,v,i,r,o,t,ht);if(Dt!==!1)return(Dt===1||Dt===-1)&&(ht=Dt===1),ln=!0,setTimeout(Ta,30),q(),ht&&!Pt?n.appendChild(v):r.parentNode.insertBefore(v,ht?Pt:r),J&&Dr(J,0,wt-J.scrollTop),Q=v.parentNode,H!==void 0&&!be&&(De=Math.abs(H-nt(r)[K])),N(),F(!0)}if(n.contains(v))return F(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){L(document,"mousemove",this._onTouchMove),L(document,"touchmove",this._onTouchMove),L(document,"pointermove",this._onTouchMove),L(document,"dragover",Lt),L(document,"mousemove",Lt),L(document,"touchmove",Lt)},_offUpEvents:function(){var t=this.el.ownerDocument;L(t,"mouseup",this._onDrop),L(t,"touchend",this._onDrop),L(t,"pointerup",this._onDrop),L(t,"touchcancel",this._onDrop),L(document,"selectstart",this)},_onDrop:function(t){var n=this.el,r=this.options;if(mt=vt(v),Nt=vt(v,r.draggable),dt("drop",this,{evt:t}),Q=v&&v.parentNode,mt=vt(v),Nt=vt(v,r.draggable),A.eventCanceled){this._nulling();return}Wt=!1,be=!1,he=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),sn(this.cloneId),sn(this._dragStartId),this.nativeDraggable&&(L(document,"drop",this),L(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ue&&I(document.body,"user-select",""),I(v,"transform",""),t&&(ie&&(t.cancelable&&t.preventDefault(),!r.dropBubble&&t.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(U===Q||lt&&lt.lastPutMode!=="clone")&&Y&&Y.parentNode&&Y.parentNode.removeChild(Y),v&&(this.nativeDraggable&&L(v,"dragend",this),nn(v),v.style["will-change"]="",ie&&!Wt&&gt(v,lt?lt.options.ghostClass:this.options.ghostClass,!1),gt(v,this.options.chosenClass,!1),pt({sortable:this,name:"unchoose",toEl:Q,newIndex:null,newDraggableIndex:null,originalEvent:t}),U!==Q?(mt>=0&&(pt({rootEl:Q,name:"add",toEl:Q,fromEl:U,originalEvent:t}),pt({sortable:this,name:"remove",toEl:Q,originalEvent:t}),pt({rootEl:Q,name:"sort",toEl:Q,fromEl:U,originalEvent:t}),pt({sortable:this,name:"sort",toEl:Q,originalEvent:t})),lt&&lt.save()):mt!==Gt&&mt>=0&&(pt({sortable:this,name:"update",toEl:Q,originalEvent:t}),pt({sortable:this,name:"sort",toEl:Q,originalEvent:t})),A.active&&((mt==null||mt===-1)&&(mt=Gt,Nt=ce),pt({sortable:this,name:"end",toEl:Q,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){dt("nulling",this),U=v=Q=x=qt=Y=Te=kt=Ft=Et=ie=mt=Nt=Gt=ce=Ut=pe=lt=ve=A.dragged=A.ghost=A.clone=A.active=null,Ne.forEach(function(t){t.checked=!0}),Ne.length=Ze=tn=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":v&&(this._onDragOver(t),_a(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,r=this.el.children,i=0,o=r.length,l=this.options;i<o;i++)n=r[i],St(n,l.draggable,this.el,!1)&&t.push(n.getAttribute(l.dataIdAttr)||Ia(n));return t},sort:function(t,n){var r={},i=this.el;this.toArray().forEach(function(o,l){var u=i.children[l];St(u,this.options.draggable,i,!1)&&(r[o]=u)},this),n&&this.captureAnimationState(),t.forEach(function(o){r[o]&&(i.removeChild(r[o]),i.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return St(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var r=this.options;if(n===void 0)return r[t];var i=ge.modifyOption(this,t,n);typeof i!="undefined"?r[t]=i:r[t]=n,t==="group"&&Ir(r)},destroy:function(){dt("destroy",this);var t=this.el;t[yt]=null,L(t,"mousedown",this._onTapStart),L(t,"touchstart",this._onTapStart),L(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(L(t,"dragover",this),L(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),xe.splice(xe.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!kt){if(dt("hideClone",this),A.eventCanceled)return;I(Y,"display","none"),this.options.removeCloneOnHide&&Y.parentNode&&Y.parentNode.removeChild(Y),kt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(kt){if(dt("showClone",this),A.eventCanceled)return;v.parentNode==U&&!this.options.group.revertClone?U.insertBefore(Y,v):qt?U.insertBefore(Y,qt):U.appendChild(Y),this.options.group.revertClone&&this.animate(v,Y),I(Y,"display",""),kt=!1}}};function _a(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Se(e,t,n,r,i,o,l,u){var c,p=e[yt],g=p.options.onMove,d;return window.CustomEvent&&!It&&!de?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=t,c.from=e,c.dragged=n,c.draggedRect=r,c.related=i||t,c.relatedRect=o||nt(t),c.willInsertAfter=u,c.originalEvent=l,e.dispatchEvent(c),g&&(d=g.call(p,c,l)),d}function nn(e){e.draggable=!1}function Ta(){ln=!1}function Da(e,t,n){var r=nt(Jt(n.el,0,n.options,!0)),i=10;return t?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function Ca(e,t,n){var r=nt(wn(n.el,n.options.draggable)),i=10;return t?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function Oa(e,t,n,r,i,o,l,u){var c=r?e.clientY:e.clientX,p=r?n.height:n.width,g=r?n.top:n.left,d=r?n.bottom:n.right,w=!1;if(!l){if(u&&De<p*i){if(!he&&(pe===1?c>g+p*o/2:c<d-p*o/2)&&(he=!0),he)w=!0;else if(pe===1?c<g+De:c>d-De)return-pe}else if(c>g+p*(1-i)/2&&c<d-p*(1-i)/2)return Aa(t)}return w=w||l,w&&(c<g+p*o/2||c>d-p*o/2)?c>g+p/2?1:-1:0}function Aa(e){return vt(v)<vt(e)?1:-1}function Ia(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Pa(e){Ne.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Ne.push(r)}}function Ce(e){return setTimeout(e,0)}function sn(e){return clearTimeout(e)}Re&&z(document,"touchmove",function(e){(A.active||Wt)&&e.cancelable&&e.preventDefault()});A.utils={on:z,off:L,css:I,find:_r,is:function(t,n){return!!St(t,n,t,!1)},extend:pa,throttle:Tr,closest:St,toggleClass:gt,clone:Cr,index:vt,nextTick:Ce,cancelNextTick:sn,detectDirection:Ar,getChild:Jt};A.get=function(e){return e[yt]};A.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(A.utils=Tt(Tt({},A.utils),r.utils)),ge.mount(r)})};A.create=function(e,t){return new A(e,t)};A.version=ua;var tt=[],ae,un,fn=!1,rn,an,ke,oe;function xa(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):r.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?L(document,"dragover",this._handleAutoScroll):(L(document,"pointermove",this._handleFallbackAutoScroll),L(document,"touchmove",this._handleFallbackAutoScroll),L(document,"mousemove",this._handleFallbackAutoScroll)),Qn(),Oe(),ha()},nulling:function(){ke=un=ae=fn=oe=rn=an=null,tt.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,o=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,u=document.elementFromPoint(o,l);if(ke=n,r||this.options.forceAutoScrollFallback||de||It||ue){on(n,this.options,u,r);var c=Mt(u,!0);fn&&(!oe||o!==rn||l!==an)&&(oe&&Qn(),oe=setInterval(function(){var p=Mt(document.elementFromPoint(o,l),!0);p!==c&&(c=p,Oe()),on(n,i.options,p,r)},10),rn=o,an=l)}else{if(!this.options.bubbleScroll||Mt(u,!0)===_t()){Oe();return}on(n,this.options,Mt(u,!1),!1)}}},At(e,{pluginName:"scroll",initializeByDefault:!0})}function Oe(){tt.forEach(function(e){clearInterval(e.pid)}),tt=[]}function Qn(){clearInterval(oe)}var on=Tr(function(e,t,n,r){if(!!t.scroll){var i=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,u=t.scrollSpeed,c=_t(),p=!1,g;un!==n&&(un=n,Oe(),ae=t.scroll,g=t.scrollFn,ae===!0&&(ae=Mt(n,!0)));var d=0,w=ae;do{var S=w,E=nt(S),b=E.top,k=E.bottom,q=E.left,F=E.right,N=E.width,T=E.height,M=void 0,C=void 0,H=S.scrollWidth,j=S.scrollHeight,O=I(S),K=S.scrollLeft,J=S.scrollTop;S===c?(M=N<H&&(O.overflowX==="auto"||O.overflowX==="scroll"||O.overflowX==="visible"),C=T<j&&(O.overflowY==="auto"||O.overflowY==="scroll"||O.overflowY==="visible")):(M=N<H&&(O.overflowX==="auto"||O.overflowX==="scroll"),C=T<j&&(O.overflowY==="auto"||O.overflowY==="scroll"));var wt=M&&(Math.abs(F-i)<=l&&K+N<H)-(Math.abs(q-i)<=l&&!!K),ot=C&&(Math.abs(k-o)<=l&&J+T<j)-(Math.abs(b-o)<=l&&!!J);if(!tt[d])for(var et=0;et<=d;et++)tt[et]||(tt[et]={});(tt[d].vx!=wt||tt[d].vy!=ot||tt[d].el!==S)&&(tt[d].el=S,tt[d].vx=wt,tt[d].vy=ot,clearInterval(tt[d].pid),(wt!=0||ot!=0)&&(p=!0,tt[d].pid=setInterval(function(){r&&this.layer===0&&A.active._onTouchMove(ke);var Pt=tt[this.layer].vy?tt[this.layer].vy*u:0,ht=tt[this.layer].vx?tt[this.layer].vx*u:0;typeof g=="function"&&g.call(A.dragged.parentNode[yt],ht,Pt,e,ke,tt[this.layer].el)!=="continue"||Dr(tt[this.layer].el,ht,Pt)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&w!==c&&(w=Mt(w,!1)));fn=p}},30),Nr=function(t){var n=t.originalEvent,r=t.putSortable,i=t.dragEl,o=t.activeSortable,l=t.dispatchSortableEvent,u=t.hideGhostForTarget,c=t.unhideGhostForTarget;if(!!n){var p=r||o;u();var g=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(g.clientX,g.clientY);c(),p&&!p.el.contains(d)&&(l("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function vn(){}vn.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,r=t.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Jt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:Nr};At(vn,{pluginName:"revertOnSpill"});function bn(){}bn.prototype={onSpill:function(t){var n=t.dragEl,r=t.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:Nr};At(bn,{pluginName:"removeOnSpill"});A.mount(new xa);A.mount(bn,vn);const Na=(e,{newIndex:t,item:n})=>{console.log(e,n);const r=e.cats.find(Ct("id",n.id));r.order=t,e.http.putTask(e,`cats/${n.id}`,r).fork(log("error"),()=>Rt(e))},ka=e=>({dom:t})=>{const n={ghostClass:"dragging",animation:150,onEnd:r=>Na(e,r)};e.state.dragList=A.create(t,n)},re=new Set,Ma=(e,t)=>{e.http.deleteTask(e,`stores/${t}`).fork(log("error deleteing"),()=>Rt(e))},ja=(e,t)=>{e.http.deleteTask(e,`cats/${t}`).fork(log("error deleteing"),()=>Rt(e))},Ra=(e,t)=>Promise.resolve(e.setCat(t)),Zn=(e,t,n)=>Promise.resolve(e.currentStore=n).then(()=>t.toggleSideBar(t)),Fa=()=>({view:({attrs:{mdl:e,state:t}})=>y(".w3-sidebar#sidebar.w3-bar-block.w3-collapse.w3-card.w3-animate-left",{style:{width:e.settings.profile=="desktop"?"300px":"90%",display:t.sidebar.open?"block":"none"}},e.settings.profile!="desktop"&&y("button.w3-bar-item.w3-button.w3-large",{onclick:()=>t.toggleSideBar(t)},"Close "),y("button.w3-button.w3-orange",{onclick:()=>{e.state.modalContent=y(vr,{mdl:e}),e.state.showModal=!0}},"New Store"),e.stores.map((n,r)=>y(".w3-right-align.w3-row",{key:n.id},y("button.w3-button.w3-left-align.w3-col",{class:e.currentStore.id==n.id?"w3-leftbar w3-border-orange w3-border-10":"",onclick:i=>{i.stopPropagation(),Zn(e,t,n)}},y(".w3-left-align.w3-col.s4",y("button.pointer.w3-badge.w3-pink.w3-border-0.w3-circle.w3-hover-red.w3-left-align",{onclick:i=>{i.stopPropagation(),Ma(e,n.id)}},"x")),y("label.w3-label.w3-col.s4.w3-left-align.pointer",n.title),!Bn(n.cats)&&y(".w3-col.s4.w3-right-align",{onclick:i=>{i.stopPropagation(),re.has(n.id)?re.delete(n.id):re.add(n.id)}},y("i.w3-tiny.w3-btn",re.has(n.id)?"Hide":"Show"))),!Bn(n.cats)&&y(".w3-list",{class:re.has(n.id)?"w3-show":"w3-hide",id:n.id,oncreate:ka(e)},n.cats.map((i,o)=>{var l;return y(".pointer.w3-row",{key:i.id,id:i.id,draggable:!0,onclick:()=>{Ra(t,i.id).then(()=>Zn(e,t,n))}},y("button.pointer.w3-badge.w3-pink.w3-border-0.w3-circle.w3-hover-red.w3-left-align",{onclick:u=>{u.stopPropagation(),ja(e,i.id)}},"x"),y("label.w3-col s4",i.title),y(".w3-right-align.w3-col s4",y(".w3-tag w3-orange",(l=i.items)==null?void 0:l.length)))})))))}),La=()=>({view:({attrs:{mdl:e,state:t}})=>y("nav.w3-fixed.w3-container",e.currentStore&&y(".w3-row",y("button.w3-button.w3-hide-large.w3-border.w3-col s4",{onclick:()=>t.toggleSideBar(t)},"MENU"),y(".w3-col s4 w3-center",e.currentStore.title),y("button.w3-button.w3-border.w3-col s4",{onclick:()=>{e.state.modalContent=y(yn,{mdl:e,catId:null}),e.state.showModal=!0}},"Add an Item"),e.state.dragging.isDragging&&y("button.w3-block.w3-button.w3-green",{onclick:()=>e.state.dragging.isDragging=!1},"Save Changes")))}),$a=(e,t)=>{e.state.showModal=!0,e.state.modalContent=y(yn,{catId:t.catId,mdl:e,item:t,isEdit:!0})},qa=(e,t,n)=>{t.left=!0,$a(e,n),En(e,t)},za=(e,t,n)=>{t.right=!0,e.state.dragging.isDragging=!e.state.dragging.isDragging,En(e,t)},En=(e,t,n)=>{t.left=!1,t.right=!1},Ha=e=>e.classList.contains("swipe-container"),kr=e=>Ha(e)?e:kr(e.parentElement),Ba=({leftAction:e,rightAction:t,resetAction:n},r)=>{const i=kr(r.target),o=i.clientWidth*30/100,l=i.scrollLeft-i.clientWidth;l<o*-1?e():l>o?t():n()},Xa=(e,t,n)=>r=>{e.state.dragging.isDragging||Ba({leftAction:()=>qa(e,t,n),rightAction:()=>za(e,t),resetAction:()=>En(e,t)},r)},Ua=({attrs:{mdl:e}})=>{const t={highlight:!1};return{view:({attrs:{item:n,mdl:r}})=>y("li.w3-leftbar",{class:t.highlight?"w3-border-bottom":"w3-border-top",id:n.id,draggable:r.state.dragging.isDragging},y(".swipe-container",{ontouchend:Xa(r,t,n)},y(".swipe-action.swipe-left",y("icon",y.trust("&#9997;"))),y(".swipe-element",y("img.w3-left",{src:n.img,style:{maxWidth:"85px"}}),y(".w3-block",{style:{fontSize:"1.2rem"}},n.title),y(".w3-bar",y(".w3-bar-item",n.quantity>0&&y("",`${n.quantity} ${n.unit}`)),y(".w3-bar-item",n.price>0&&y("",`$ ${n.price}`)))),y(".swipe-action.swipe-right",y("icon",y.trust("&#9888;")))))}},Ya=(e,{newIndex:t,item:n})=>{const r=e.items.find(Ct("id",n.id));r.order=t,e.http.putTask(e,`items/${n.id}`,r).fork(log("error"),()=>Rt(e))},Wa=e=>({dom:t})=>{const n={ghostClass:"dragging",animation:150,onEnd:r=>Ya(e,r)};e.state.dragList=A.create(t,n)},Ga=({attrs:{mdl:e,cat:t}})=>(t.id,t.title,t.items,{view:({attrs:{cat:n,mdl:r,key:i}})=>y("section.w3-section.w3-border-left",{key:i,id:n.id},y(".w3-bar",{style:{position:"-webkit-sticky",position:"sticky",backgroundColor:"white"}},y("strong.w3-right.w3-button",{onclick:()=>{r.state.modalContent=y(yn,{mdl:r,catId:n.id}),r.state.showModal=!0},style:{padding:"0 16px"}},n.title.toUpperCase())),y(".w3-list",{oncreate:Wa(r)},n.items.map((o,l)=>y(Ua,{key:o.id,item:o,mdl:r}))))}),Ka=()=>({view:({attrs:{mdl:e,state:t}})=>y("section.w3-section.w3-row w3-ul.w3-padding-row",{style:{height:"90dvh",overflowX:"hidden",overflowY:"auto"}},e.currentStore?e.currentStore.cats.map((n,r)=>y(Ga,{key:r,cat:n,mdl:e,state:t})):y("section.w3-section",y("button.w3-border w3-button w3-panel.w3-display-middle w3-light-grey w3-col-1",{onclick:()=>{e.state.modalContent=y(vr,{mdl:e}),e.state.showModal=!0}},"Create a Store to Begin")))}),Ja=({attrs:{mdl:e}})=>({view:()=>y(".w3-modal#modal",{onclick:t=>{t.target.id=="modal"&&(e.state.showModal=!1,e.state.modalContent=null)},style:{display:e.state.showModal?"block":"none"}},y("modal.w3-modal-content",y(".w3-container",e.state.modalContent)))});G.SKIP={};G.lift=Za;G.scan=Va;G.merge=Mr;G.combine=Fe;G.scanMerge=Qa;G["fantasy-land/of"]=G;var tr=!1;Object.defineProperty(G,"HALT",{get:function(){return tr||console.log("HALT is deprecated and has been renamed to SKIP"),tr=!0,G.SKIP}});function G(e){var t=[],n=[];function r(l){return arguments.length&&l!==G.SKIP&&(e=l,er(r)&&(r.changing(),r.state="active",t.forEach(function(u,c){u(n[c](e))}))),e}r.constructor=G,r.state=arguments.length&&e!==G.SKIP?"active":"pending",r.parents=[],r.changing=function(){er(r)&&(r.state="changing"),t.forEach(function(l){l.changing()})},r.map=function(l,u){var c=r.state==="active"&&u!==G.SKIP?G(l(e)):G();return c.parents.push(r),t.push(c),n.push(l),c};var i;function o(){return i=G(),i.map(function(l){return l===!0&&(r.parents.forEach(function(u){u.unregisterChild(r)}),r.state="ended",r.parents.length=t.length=n.length=0),l}),i}return r.toJSON=function(){return e!=null&&typeof e.toJSON=="function"?e.toJSON():e},r["fantasy-land/map"]=r.map,r["fantasy-land/ap"]=function(l){return Fe(function(u,c){return u()(c())},[l,r])},r.unregisterChild=function(l){var u=t.indexOf(l);u!==-1&&(t.splice(u,1),n.splice(u,1))},Object.defineProperty(r,"end",{get:function(){return i||o()}}),r}function Fe(e,t){var n=t.every(function(u){if(u.constructor!==G)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return u.state==="active"}),r=n?G(e.apply(null,t.concat([t]))):G(),i=[],o=t.map(function(u){return u.map(function(c){return i.push(u),(n||t.every(function(p){return p.state!=="pending"}))&&(n=!0,r(e.apply(null,t.concat([i]))),i=[]),c},G.SKIP)}),l=r.end.map(function(u){u===!0&&(o.forEach(function(c){c.end(!0)}),l.end(!0))});return r}function Mr(e){return Fe(function(){return e.map(function(t){return t()})},e)}function Va(e,t,n){var r=n.map(function(i){var o=e(t,i);return o!==G.SKIP&&(t=o),o});return r(t),r}function Qa(e,t){var n=e.map(function(i){return i[0]}),r=Fe(function(){var i=arguments[arguments.length-1];return n.forEach(function(o,l){i.indexOf(o)>-1&&(t=e[l][1](t,o()))}),t},n);return r(t),r}function Za(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Mr(t).map(function(n){return e.apply(void 0,n)})}function er(e){return e.state==="pending"||e.state==="active"||e.state==="changing"}const to=e=>({maxHeight:"100dvh",overflow:"hidden",marginLeft:e.settings.profile=="desktop"?"300px":"0"}),eo=e=>{const t={sidebar:{open:!1},setCat:G(null),toggleSideBar:n=>n.sidebar.open=!n.sidebar.open};return Rt(e),{view:()=>y("page.w3-theme",y(Ja,{mdl:e}),y(Fa,{mdl:e,state:t}),y("section.#main",{style:to(e)},y(La,{mdl:e,state:t}),y(Ka,{mdl:e,state:t})))}},no=document.body;let jr=window.innerWidth;"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(e=>{console.log("\u2699\uFE0F SW registered: ",e)}).catch(e=>{console.log("\u{1F9DF} SW registration failed: ",e)})});const Rr=e=>e<=411?"phone":e<=990?"tablet":"desktop",Fr=e=>{const t=window.innerWidth;if(e!==t){e=t;var n=se.settings.profile;se.settings.profile=Rr(t),n!=se.settings.profile&&y.redraw()}return requestAnimationFrame(Fr)};se.settings.profile=Rr(jr);Fr(jr);y.mount(no,eo(se));
