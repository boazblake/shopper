const Qe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const c of f.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerpolicy&&(f.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?f.credentials="include":o.crossorigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(o){if(o.ep)return;o.ep=!0;const f=i(o);fetch(o.href,f)}};Qe();var ot=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function nt(t,e,i,u,o,f){return{tag:t,key:e,attrs:i,children:u,text:o,dom:f,domSize:void 0,state:void 0,events:void 0,instance:void 0}}nt.normalize=function(t){return Array.isArray(t)?nt("[",void 0,void 0,nt.normalizeChildren(t),void 0,void 0):t==null||typeof t=="boolean"?null:typeof t=="object"?t:nt("#",void 0,void 0,String(t),void 0,void 0)};nt.normalizeChildren=function(t){var e=[];if(t.length){for(var i=t[0]!=null&&t[0].key!=null,u=1;u<t.length;u++)if((t[u]!=null&&t[u].key!=null)!==i)throw new TypeError(i&&(t[u]!=null||typeof t[u]=="boolean")?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var u=0;u<t.length;u++)e[u]=nt.normalize(t[u])}return e};var tt=nt,Ge=tt,de=function(){var t=arguments[this],e=this+1,i;if(t==null?t={}:(typeof t!="object"||t.tag!=null||Array.isArray(t))&&(t={},e=this),arguments.length===e+1)i=arguments[e],Array.isArray(i)||(i=[i]);else for(i=[];e<arguments.length;)i.push(arguments[e++]);return Ge("",t.key,t,i)},Tt={}.hasOwnProperty,Xe=tt,Ye=de,ct=Tt,Ze=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,be={};function Yt(t){for(var e in t)if(ct.call(t,e))return!1;return!0}function tr(t){for(var e,i="div",u=[],o={};e=Ze.exec(t);){var f=e[1],c=e[2];if(f===""&&c!=="")i=c;else if(f==="#")o.id=c;else if(f===".")u.push(c);else if(e[3][0]==="["){var l=e[6];l&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),e[4]==="class"?u.push(l):o[e[4]]=l===""?l:l||!0}}return u.length>0&&(o.className=u.join(" ")),be[t]={tag:i,attrs:o}}function er(t,e){var i=e.attrs,u=ct.call(i,"class"),o=u?i.class:i.className;if(e.tag=t.tag,e.attrs={},!Yt(t.attrs)&&!Yt(i)){var f={};for(var c in i)ct.call(i,c)&&(f[c]=i[c]);i=f}for(var c in t.attrs)ct.call(t.attrs,c)&&c!=="className"&&!ct.call(i,c)&&(i[c]=t.attrs[c]);(o!=null||t.attrs.className!=null)&&(i.className=o!=null?t.attrs.className!=null?String(t.attrs.className)+" "+String(o):o:t.attrs.className!=null?t.attrs.className:null),u&&(i.class=null);for(var c in i)if(ct.call(i,c)&&c!=="key"){e.attrs=i;break}return e}function rr(t){if(t==null||typeof t!="string"&&typeof t!="function"&&typeof t.view!="function")throw Error("The selector must be either a string or a component.");var e=Ye.apply(1,arguments);return typeof t=="string"&&(e.children=Xe.normalizeChildren(e.children),t!=="[")?er(be[t]||tr(t),e):(e.tag=t,e)}var ve=rr,nr=tt,ir=function(t){return t==null&&(t=""),nr("<",void 0,void 0,t,void 0,void 0)},ar=tt,ur=de,or=function(){var t=ur.apply(0,arguments);return t.tag="[",t.children=ar.normalizeChildren(t.children),t},zt=ve;zt.trust=ir;zt.fragment=or;var cr=zt,gt={exports:{}},F=function(t){if(!(this instanceof F))throw new Error("Promise must be called with 'new'.");if(typeof t!="function")throw new TypeError("executor must be a function.");var e=this,i=[],u=[],o=p(i,!0),f=p(u,!1),c=e._instance={resolvers:i,rejectors:u},l=typeof setImmediate=="function"?setImmediate:setTimeout;function p(y,d){return function v(k){var S;try{if(d&&k!=null&&(typeof k=="object"||typeof k=="function")&&typeof(S=k.then)=="function"){if(k===e)throw new TypeError("Promise can't be resolved with itself.");m(S.bind(k))}else l(function(){!d&&y.length===0&&console.error("Possible unhandled promise rejection:",k);for(var T=0;T<y.length;T++)y[T](k);i.length=0,u.length=0,c.state=d,c.retry=function(){v(k)}})}catch(T){f(T)}}}function m(y){var d=0;function v(S){return function(T){d++>0||S(T)}}var k=v(f);try{y(v(o),k)}catch(S){k(S)}}m(t)};F.prototype.then=function(t,e){var i=this,u=i._instance;function o(p,m,y,d){m.push(function(v){if(typeof p!="function")y(v);else try{f(p(v))}catch(k){c&&c(k)}}),typeof u.retry=="function"&&d===u.state&&u.retry()}var f,c,l=new F(function(p,m){f=p,c=m});return o(t,u.resolvers,f,!0),o(e,u.rejectors,c,!1),l};F.prototype.catch=function(t){return this.then(null,t)};F.prototype.finally=function(t){return this.then(function(e){return F.resolve(t()).then(function(){return e})},function(e){return F.resolve(t()).then(function(){return F.reject(e)})})};F.resolve=function(t){return t instanceof F?t:new F(function(e){e(t)})};F.reject=function(t){return new F(function(e,i){i(t)})};F.all=function(t){return new F(function(e,i){var u=t.length,o=0,f=[];if(t.length===0)e([]);else for(var c=0;c<t.length;c++)(function(l){function p(m){o++,f[l]=m,o===u&&e(f)}t[l]!=null&&(typeof t[l]=="object"||typeof t[l]=="function")&&typeof t[l].then=="function"?t[l].then(p,i):p(t[l])})(c)})};F.race=function(t){return new F(function(e,i){for(var u=0;u<t.length;u++)t[u].then(e,i)})};var Te=F,pt=Te;typeof window!="undefined"?(typeof window.Promise=="undefined"?window.Promise=pt:window.Promise.prototype.finally||(window.Promise.prototype.finally=pt.prototype.finally),gt.exports=window.Promise):typeof ot!="undefined"?(typeof ot.Promise=="undefined"?ot.Promise=pt:ot.Promise.prototype.finally||(ot.Promise.prototype.finally=pt.prototype.finally),gt.exports=ot.Promise):gt.exports=pt;var Lt=tt,fr=function(t){var e=t&&t.document,i,u={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function o(n){return n.attrs&&n.attrs.xmlns||u[n.tag]}function f(n,r){if(n.state!==r)throw new Error("'vnode.state' must not be modified.")}function c(n){var r=n.state;try{return this.apply(r,arguments)}finally{f(n,r)}}function l(){try{return e.activeElement}catch{return null}}function p(n,r,a,s,h,w,C){for(var A=a;A<s;A++){var b=r[A];b!=null&&m(n,b,h,C,w)}}function m(n,r,a,s,h){var w=r.tag;if(typeof w=="string")switch(r.state={},r.attrs!=null&&At(r.attrs,r,a),w){case"#":y(n,r,h);break;case"<":v(n,r,s,h);break;case"[":k(n,r,a,s,h);break;default:S(n,r,a,s,h)}else q(n,r,a,s,h)}function y(n,r,a){r.dom=e.createTextNode(r.children),Y(n,r.dom,a)}var d={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function v(n,r,a,s){var h=r.children.match(/^\s*?<(\w+)/im)||[],w=e.createElement(d[h[1]]||"div");a==="http://www.w3.org/2000/svg"?(w.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+r.children+"</svg>",w=w.firstChild):w.innerHTML=r.children,r.dom=w.firstChild,r.domSize=w.childNodes.length,r.instance=[];for(var C=e.createDocumentFragment(),A;A=w.firstChild;)r.instance.push(A),C.appendChild(A);Y(n,C,s)}function k(n,r,a,s,h){var w=e.createDocumentFragment();if(r.children!=null){var C=r.children;p(w,C,0,C.length,a,null,s)}r.dom=w.firstChild,r.domSize=w.childNodes.length,Y(n,w,h)}function S(n,r,a,s,h){var w=r.tag,C=r.attrs,A=C&&C.is;s=o(r)||s;var b=s?A?e.createElementNS(s,w,{is:A}):e.createElementNS(s,w):A?e.createElement(w,{is:A}):e.createElement(w);if(r.dom=b,C!=null&&De(r,C,s),Y(n,b,h),!Bt(r)&&r.children!=null){var N=r.children;p(b,N,0,N.length,a,null,s),r.tag==="select"&&C!=null&&He(r,C)}}function T(n,r){var a;if(typeof n.tag.view=="function"){if(n.state=Object.create(n.tag),a=n.state.view,a.$$reentrantLock$$!=null)return;a.$$reentrantLock$$=!0}else{if(n.state=void 0,a=n.tag,a.$$reentrantLock$$!=null)return;a.$$reentrantLock$$=!0,n.state=n.tag.prototype!=null&&typeof n.tag.prototype.view=="function"?new n.tag(n):n.tag(n)}if(At(n.state,n,r),n.attrs!=null&&At(n.attrs,n,r),n.instance=Lt.normalize(c.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");a.$$reentrantLock$$=null}function q(n,r,a,s,h){T(r,a),r.instance!=null?(m(n,r.instance,a,s,h),r.dom=r.instance.dom,r.domSize=r.dom!=null?r.instance.domSize:0):r.domSize=0}function R(n,r,a,s,h,w){if(!(r===a||r==null&&a==null))if(r==null||r.length===0)p(n,a,0,a.length,s,h,w);else if(a==null||a.length===0)ft(n,r,0,r.length);else{var C=r[0]!=null&&r[0].key!=null,A=a[0]!=null&&a[0].key!=null,b=0,N=0;if(!C)for(;N<r.length&&r[N]==null;)N++;if(!A)for(;b<a.length&&a[b]==null;)b++;if(C!==A)ft(n,r,N,r.length),p(n,a,b,a.length,s,h,w);else if(A){for(var W=r.length-1,H=a.length-1,dt,Q,U,V,_,jt;W>=N&&H>=b&&(V=r[W],_=a[H],V.key===_.key);)V!==_&&B(n,V,_,s,h,w),_.dom!=null&&(h=_.dom),W--,H--;for(;W>=N&&H>=b&&(Q=r[N],U=a[b],Q.key===U.key);)N++,b++,Q!==U&&B(n,Q,U,s,G(r,N,h),w);for(;W>=N&&H>=b&&!(b===H||Q.key!==_.key||V.key!==U.key);)jt=G(r,N,h),at(n,V,jt),V!==U&&B(n,V,U,s,jt,w),++b<=--H&&at(n,Q,h),Q!==_&&B(n,Q,_,s,h,w),_.dom!=null&&(h=_.dom),N++,W--,V=r[W],_=a[H],Q=r[N],U=a[b];for(;W>=N&&H>=b&&V.key===_.key;)V!==_&&B(n,V,_,s,h,w),_.dom!=null&&(h=_.dom),W--,H--,V=r[W],_=a[H];if(b>H)ft(n,r,N,W+1);else if(N>W)p(n,a,b,H+1,s,h,w);else{var We=h,Xt=H-b+1,st=new Array(Xt),Nt=0,D=0,qt=2147483647,$t=0,dt,_t;for(D=0;D<Xt;D++)st[D]=-1;for(D=H;D>=b;D--){dt==null&&(dt=x(r,N,W+1)),_=a[D];var ut=dt[_.key];ut!=null&&(qt=ut<qt?ut:-1,st[D-b]=ut,V=r[ut],r[ut]=null,V!==_&&B(n,V,_,s,h,w),_.dom!=null&&(h=_.dom),$t++)}if(h=We,$t!==W-N+1&&ft(n,r,N,W+1),$t===0)p(n,a,b,H+1,s,h,w);else if(qt===-1)for(_t=J(st),Nt=_t.length-1,D=H;D>=b;D--)U=a[D],st[D-b]===-1?m(n,U,s,w,h):_t[Nt]===D-b?Nt--:at(n,U,h),U.dom!=null&&(h=a[D].dom);else for(D=H;D>=b;D--)U=a[D],st[D-b]===-1&&m(n,U,s,w,h),U.dom!=null&&(h=a[D].dom)}}else{var xt=r.length<a.length?r.length:a.length;for(b=b<N?b:N;b<xt;b++)Q=r[b],U=a[b],!(Q===U||Q==null&&U==null)&&(Q==null?m(n,U,s,w,G(r,b+1,h)):U==null?wt(n,Q):B(n,Q,U,s,G(r,b+1,h),w));r.length>xt&&ft(n,r,b,r.length),a.length>xt&&p(n,a,b,a.length,s,h,w)}}}function B(n,r,a,s,h,w){var C=r.tag,A=a.tag;if(C===A){if(a.state=r.state,a.events=r.events,Ve(a,r))return;if(typeof C=="string")switch(a.attrs!=null&&It(a.attrs,a,s),C){case"#":j(r,a);break;case"<":E(n,r,a,w,h);break;case"[":$(n,r,a,s,h,w);break;default:O(r,a,s,w)}else z(n,r,a,s,h,w)}else wt(n,r),m(n,a,s,w,h)}function j(n,r){n.children.toString()!==r.children.toString()&&(n.dom.nodeValue=r.children),r.dom=n.dom}function E(n,r,a,s,h){r.children!==a.children?(Jt(n,r),v(n,a,s,h)):(a.dom=r.dom,a.domSize=r.domSize,a.instance=r.instance)}function $(n,r,a,s,h,w){R(n,r.children,a.children,s,h,w);var C=0,A=a.children;if(a.dom=null,A!=null){for(var b=0;b<A.length;b++){var N=A[b];N!=null&&N.dom!=null&&(a.dom==null&&(a.dom=N.dom),C+=N.domSize||1)}C!==1&&(a.domSize=C)}}function O(n,r,a,s){var h=r.dom=n.dom;s=o(r)||s,r.tag==="textarea"&&r.attrs==null&&(r.attrs={}),Fe(r,n.attrs,r.attrs,s),Bt(r)||R(h,n.children,r.children,a,null,s)}function z(n,r,a,s,h,w){if(a.instance=Lt.normalize(c.call(a.state.view,a)),a.instance===a)throw Error("A view cannot return the vnode it received as argument");It(a.state,a,s),a.attrs!=null&&It(a.attrs,a,s),a.instance!=null?(r.instance==null?m(n,a.instance,s,w,h):B(n,r.instance,a.instance,s,h,w),a.dom=a.instance.dom,a.domSize=a.instance.domSize):r.instance!=null?(wt(n,r.instance),a.dom=void 0,a.domSize=0):(a.dom=r.dom,a.domSize=r.domSize)}function x(n,r,a){for(var s=Object.create(null);r<a;r++){var h=n[r];if(h!=null){var w=h.key;w!=null&&(s[w]=r)}}return s}var P=[];function J(n){for(var r=[0],a=0,s=0,h=0,w=P.length=n.length,h=0;h<w;h++)P[h]=n[h];for(var h=0;h<w;++h)if(n[h]!==-1){var C=r[r.length-1];if(n[C]<n[h]){P[h]=C,r.push(h);continue}for(a=0,s=r.length-1;a<s;){var A=(a>>>1)+(s>>>1)+(a&s&1);n[r[A]]<n[h]?a=A+1:s=A}n[h]<n[r[a]]&&(a>0&&(P[h]=r[a-1]),r[a]=h)}for(a=r.length,s=r[a-1];a-- >0;)r[a]=s,s=P[s];return P.length=0,r}function G(n,r,a){for(;r<n.length;r++)if(n[r]!=null&&n[r].dom!=null)return n[r].dom;return a}function at(n,r,a){var s=e.createDocumentFragment();et(n,s,r),Y(n,s,a)}function et(n,r,a){for(;a.dom!=null&&a.dom.parentNode===n;){if(typeof a.tag!="string"){if(a=a.instance,a!=null)continue}else if(a.tag==="<")for(var s=0;s<a.instance.length;s++)r.appendChild(a.instance[s]);else if(a.tag!=="[")r.appendChild(a.dom);else if(a.children.length===1){if(a=a.children[0],a!=null)continue}else for(var s=0;s<a.children.length;s++){var h=a.children[s];h!=null&&et(n,r,h)}break}}function Y(n,r,a){a!=null?n.insertBefore(r,a):n.appendChild(r)}function Bt(n){if(n.attrs==null||n.attrs.contenteditable==null&&n.attrs.contentEditable==null)return!1;var r=n.children;if(r!=null&&r.length===1&&r[0].tag==="<"){var a=r[0].children;n.dom.innerHTML!==a&&(n.dom.innerHTML=a)}else if(r!=null&&r.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function ft(n,r,a,s){for(var h=a;h<s;h++){var w=r[h];w!=null&&wt(n,w)}}function wt(n,r){var a=0,s=r.state,h,w;if(typeof r.tag!="string"&&typeof r.state.onbeforeremove=="function"){var C=c.call(r.state.onbeforeremove,r);C!=null&&typeof C.then=="function"&&(a=1,h=C)}if(r.attrs&&typeof r.attrs.onbeforeremove=="function"){var C=c.call(r.attrs.onbeforeremove,r);C!=null&&typeof C.then=="function"&&(a|=2,w=C)}if(f(r,s),!a)yt(r),Ct(n,r);else{if(h!=null){var A=function(){a&1&&(a&=2,a||b())};h.then(A,A)}if(w!=null){var A=function(){a&2&&(a&=1,a||b())};w.then(A,A)}}function b(){f(r,s),yt(r),Ct(n,r)}}function Jt(n,r){for(var a=0;a<r.instance.length;a++)n.removeChild(r.instance[a])}function Ct(n,r){for(;r.dom!=null&&r.dom.parentNode===n;){if(typeof r.tag!="string"){if(r=r.instance,r!=null)continue}else if(r.tag==="<")Jt(n,r);else{if(r.tag!=="["&&(n.removeChild(r.dom),!Array.isArray(r.children)))break;if(r.children.length===1){if(r=r.children[0],r!=null)continue}else for(var a=0;a<r.children.length;a++){var s=r.children[a];s!=null&&Ct(n,s)}}break}}function yt(n){if(typeof n.tag!="string"&&typeof n.state.onremove=="function"&&c.call(n.state.onremove,n),n.attrs&&typeof n.attrs.onremove=="function"&&c.call(n.attrs.onremove,n),typeof n.tag!="string")n.instance!=null&&yt(n.instance);else{var r=n.children;if(Array.isArray(r))for(var a=0;a<r.length;a++){var s=r[a];s!=null&&yt(s)}}}function De(n,r,a){n.tag==="input"&&r.type!=null&&n.dom.setAttribute("type",r.type);var s=r!=null&&n.tag==="input"&&r.type==="file";for(var h in r)Et(n,h,null,r[h],a,s)}function Et(n,r,a,s,h,w){if(!(r==="key"||r==="is"||s==null||Vt(r)||a===s&&!Ke(n,r)&&typeof s!="object"||r==="type"&&n.tag==="input")){if(r[0]==="o"&&r[1]==="n")return Gt(n,r,s);if(r.slice(0,6)==="xlink:")n.dom.setAttributeNS("http://www.w3.org/1999/xlink",r.slice(6),s);else if(r==="style")Qt(n.dom,a,s);else if(Wt(n,r,h)){if(r==="value"){if((n.tag==="input"||n.tag==="textarea")&&n.dom.value===""+s&&(w||n.dom===l())||n.tag==="select"&&a!==null&&n.dom.value===""+s||n.tag==="option"&&a!==null&&n.dom.value===""+s)return;if(w&&""+s!=""){console.error("`value` is read-only on file inputs!");return}}n.dom[r]=s}else typeof s=="boolean"?s?n.dom.setAttribute(r,""):n.dom.removeAttribute(r):n.dom.setAttribute(r==="className"?"class":r,s)}}function Ue(n,r,a,s){if(!(r==="key"||r==="is"||a==null||Vt(r)))if(r[0]==="o"&&r[1]==="n")Gt(n,r,void 0);else if(r==="style")Qt(n.dom,a,null);else if(Wt(n,r,s)&&r!=="className"&&r!=="title"&&!(r==="value"&&(n.tag==="option"||n.tag==="select"&&n.dom.selectedIndex===-1&&n.dom===l()))&&!(n.tag==="input"&&r==="type"))n.dom[r]=null;else{var h=r.indexOf(":");h!==-1&&(r=r.slice(h+1)),a!==!1&&n.dom.removeAttribute(r==="className"?"class":r)}}function He(n,r){if("value"in r)if(r.value===null)n.dom.selectedIndex!==-1&&(n.dom.value=null);else{var a=""+r.value;(n.dom.value!==a||n.dom.selectedIndex===-1)&&(n.dom.value=a)}"selectedIndex"in r&&Et(n,"selectedIndex",null,r.selectedIndex,void 0)}function Fe(n,r,a,s){if(r&&r===a&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),a!=null){n.tag==="input"&&a.type!=null&&n.dom.setAttribute("type",a.type);var h=n.tag==="input"&&a.type==="file";for(var w in a)Et(n,w,r&&r[w],a[w],s,h)}var C;if(r!=null)for(var w in r)(C=r[w])!=null&&(a==null||a[w]==null)&&Ue(n,w,C,s)}function Ke(n,r){return r==="value"||r==="checked"||r==="selectedIndex"||r==="selected"&&n.dom===l()||n.tag==="option"&&n.dom.parentNode===e.activeElement}function Vt(n){return n==="oninit"||n==="oncreate"||n==="onupdate"||n==="onremove"||n==="onbeforeremove"||n==="onbeforeupdate"}function Wt(n,r,a){return a===void 0&&(n.tag.indexOf("-")>-1||n.attrs!=null&&n.attrs.is||r!=="href"&&r!=="list"&&r!=="form"&&r!=="width"&&r!=="height")&&r in n.dom}var Be=/[A-Z]/g;function Je(n){return"-"+n.toLowerCase()}function Ot(n){return n[0]==="-"&&n[1]==="-"?n:n==="cssFloat"?"float":n.replace(Be,Je)}function Qt(n,r,a){if(r!==a)if(a==null)n.style.cssText="";else if(typeof a!="object")n.style.cssText=a;else if(r==null||typeof r!="object"){n.style.cssText="";for(var s in a){var h=a[s];h!=null&&n.style.setProperty(Ot(s),String(h))}}else{for(var s in a){var h=a[s];h!=null&&(h=String(h))!==String(r[s])&&n.style.setProperty(Ot(s),h)}for(var s in r)r[s]!=null&&a[s]==null&&n.style.removeProperty(Ot(s))}}function Pt(){this._=i}Pt.prototype=Object.create(null),Pt.prototype.handleEvent=function(n){var r=this["on"+n.type],a;typeof r=="function"?a=r.call(n.currentTarget,n):typeof r.handleEvent=="function"&&r.handleEvent(n),this._&&n.redraw!==!1&&(0,this._)(),a===!1&&(n.preventDefault(),n.stopPropagation())};function Gt(n,r,a){if(n.events!=null){if(n.events._=i,n.events[r]===a)return;a!=null&&(typeof a=="function"||typeof a=="object")?(n.events[r]==null&&n.dom.addEventListener(r.slice(2),n.events,!1),n.events[r]=a):(n.events[r]!=null&&n.dom.removeEventListener(r.slice(2),n.events,!1),n.events[r]=void 0)}else a!=null&&(typeof a=="function"||typeof a=="object")&&(n.events=new Pt,n.dom.addEventListener(r.slice(2),n.events,!1),n.events[r]=a)}function At(n,r,a){typeof n.oninit=="function"&&c.call(n.oninit,r),typeof n.oncreate=="function"&&a.push(c.bind(n.oncreate,r))}function It(n,r,a){typeof n.onupdate=="function"&&a.push(c.bind(n.onupdate,r))}function Ve(n,r){do{if(n.attrs!=null&&typeof n.attrs.onbeforeupdate=="function"){var a=c.call(n.attrs.onbeforeupdate,n,r);if(a!==void 0&&!a)break}if(typeof n.tag!="string"&&typeof n.state.onbeforeupdate=="function"){var a=c.call(n.state.onbeforeupdate,n,r);if(a!==void 0&&!a)break}return!1}while(!1);return n.dom=r.dom,n.domSize=r.domSize,n.instance=r.instance,n.attrs=r.attrs,n.children=r.children,n.text=r.text,!0}var lt;return function(n,r,a){if(!n)throw new TypeError("DOM element being rendered to does not exist.");if(lt!=null&&n.contains(lt))throw new TypeError("Node is currently being rendered to and thus is locked.");var s=i,h=lt,w=[],C=l(),A=n.namespaceURI;lt=n,i=typeof a=="function"?a:void 0;try{n.vnodes==null&&(n.textContent=""),r=Lt.normalizeChildren(Array.isArray(r)?r:[r]),R(n,n.vnodes,r,w,null,A==="http://www.w3.org/1999/xhtml"?void 0:A),n.vnodes=r,C!=null&&l()!==C&&typeof C.focus=="function"&&C.focus();for(var b=0;b<w.length;b++)w[b]()}finally{i=s,lt=h}}},ke=fr(typeof window!="undefined"?window:null),Zt=tt,lr=function(t,e,i){var u=[],o=!1,f=-1;function c(){for(f=0;f<u.length;f+=2)try{t(u[f],Zt(u[f+1]),l)}catch(m){i.error(m)}f=-1}function l(){o||(o=!0,e(function(){o=!1,c()}))}l.sync=c;function p(m,y){if(y!=null&&y.view==null&&typeof y!="function")throw new TypeError("m.mount expects a component, not a vnode.");var d=u.indexOf(m);d>=0&&(u.splice(d,2),d<=f&&(f-=2),t(m,[])),y!=null&&(u.push(m,y),t(m,Zt(y),l))}return{mount:p,redraw:l}},sr=ke,Dt=lr(sr,typeof requestAnimationFrame!="undefined"?requestAnimationFrame:null,typeof console!="undefined"?console:null),Se=function(t){if(Object.prototype.toString.call(t)!=="[object Object]")return"";var e=[];for(var i in t)u(i,t[i]);return e.join("&");function u(o,f){if(Array.isArray(f))for(var c=0;c<f.length;c++)u(o+"["+c+"]",f[c]);else if(Object.prototype.toString.call(f)==="[object Object]")for(var c in f)u(o+"["+c+"]",f[c]);else e.push(encodeURIComponent(o)+(f!=null&&f!==""?"="+encodeURIComponent(f):""))}},pr=Tt,Ce=Object.assign||function(t,e){for(var i in e)pr.call(e,i)&&(t[i]=e[i])},hr=Se,gr=Ce,Ut=function(t,e){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(e==null)return t;var i=t.indexOf("?"),u=t.indexOf("#"),o=u<0?t.length:u,f=i<0?o:i,c=t.slice(0,f),l={};gr(l,e);var p=c.replace(/:([^\/\.-]+)(\.{3})?/g,function(T,q,R){return delete l[q],e[q]==null?T:R?e[q]:encodeURIComponent(String(e[q]))}),m=p.indexOf("?"),y=p.indexOf("#"),d=y<0?p.length:y,v=m<0?d:m,k=p.slice(0,v);i>=0&&(k+=t.slice(i,o)),m>=0&&(k+=(i<0?"?":"&")+p.slice(m,d));var S=hr(l);return S&&(k+=(i<0&&m<0?"?":"&")+S),u>=0&&(k+=t.slice(u)),y>=0&&(k+=(u<0?"":"&")+p.slice(y)),k},mr=Ut,te=Tt,wr=function(t,e,i){var u=0;function o(l){return new e(l)}o.prototype=e.prototype,o.__proto__=e;function f(l){return function(p,m){typeof p!="string"?(m=p,p=p.url):m==null&&(m={});var y=new e(function(S,T){l(mr(p,m.params),m,function(q){if(typeof m.type=="function")if(Array.isArray(q))for(var R=0;R<q.length;R++)q[R]=new m.type(q[R]);else q=new m.type(q);S(q)},T)});if(m.background===!0)return y;var d=0;function v(){--d===0&&typeof i=="function"&&i()}return k(y);function k(S){var T=S.then;return S.constructor=o,S.then=function(){d++;var q=T.apply(S,arguments);return q.then(v,function(R){if(v(),d===0)throw R}),k(q)},S}}}function c(l,p){for(var m in l.headers)if(te.call(l.headers,m)&&m.toLowerCase()===p)return!0;return!1}return{request:f(function(l,p,m,y){var d=p.method!=null?p.method.toUpperCase():"GET",v=p.body,k=(p.serialize==null||p.serialize===JSON.serialize)&&!(v instanceof t.FormData||v instanceof t.URLSearchParams),S=p.responseType||(typeof p.extract=="function"?"":"json"),T=new t.XMLHttpRequest,q=!1,R=!1,B=T,j,E=T.abort;T.abort=function(){q=!0,E.call(this)},T.open(d,l,p.async!==!1,typeof p.user=="string"?p.user:void 0,typeof p.password=="string"?p.password:void 0),k&&v!=null&&!c(p,"content-type")&&T.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof p.deserialize!="function"&&!c(p,"accept")&&T.setRequestHeader("Accept","application/json, text/*"),p.withCredentials&&(T.withCredentials=p.withCredentials),p.timeout&&(T.timeout=p.timeout),T.responseType=S;for(var $ in p.headers)te.call(p.headers,$)&&T.setRequestHeader($,p.headers[$]);T.onreadystatechange=function(O){if(!q&&O.target.readyState===4)try{var z=O.target.status>=200&&O.target.status<300||O.target.status===304||/^file:\/\//i.test(l),x=O.target.response,P;if(S==="json"){if(!O.target.responseType&&typeof p.extract!="function")try{x=JSON.parse(O.target.responseText)}catch{x=null}}else(!S||S==="text")&&x==null&&(x=O.target.responseText);if(typeof p.extract=="function"?(x=p.extract(O.target,p),z=!0):typeof p.deserialize=="function"&&(x=p.deserialize(x)),z)m(x);else{var J=function(){try{P=O.target.responseText}catch{P=x}var G=new Error(P);G.code=O.target.status,G.response=x,y(G)};T.status===0?setTimeout(function(){R||J()}):J()}}catch(G){y(G)}},T.ontimeout=function(O){R=!0;var z=new Error("Request timed out");z.code=O.target.status,y(z)},typeof p.config=="function"&&(T=p.config(T,p,l)||T,T!==B&&(j=T.abort,T.abort=function(){q=!0,j.call(this)})),v==null?T.send():typeof p.serialize=="function"?T.send(p.serialize(v)):v instanceof t.FormData||v instanceof t.URLSearchParams?T.send(v):T.send(JSON.stringify(v))}),jsonp:f(function(l,p,m,y){var d=p.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+u++,v=t.document.createElement("script");t[d]=function(k){delete t[d],v.parentNode.removeChild(v),m(k)},v.onerror=function(){delete t[d],v.parentNode.removeChild(v),y(new Error("JSONP request failed"))},v.src=l+(l.indexOf("?")<0?"?":"&")+encodeURIComponent(p.callbackKey||"callback")+"="+encodeURIComponent(d),t.document.documentElement.appendChild(v)})}},yr=gt.exports,dr=Dt,br=wr(typeof window!="undefined"?window:null,yr,dr.redraw);function ee(t){try{return decodeURIComponent(t)}catch{return t}}var Ee=function(t){if(t===""||t==null)return{};t.charAt(0)==="?"&&(t=t.slice(1));for(var e=t.split("&"),i={},u={},o=0;o<e.length;o++){var f=e[o].split("="),c=ee(f[0]),l=f.length===2?ee(f[1]):"";l==="true"?l=!0:l==="false"&&(l=!1);var p=c.split(/\]\[?|\[/),m=u;c.indexOf("[")>-1&&p.pop();for(var y=0;y<p.length;y++){var d=p[y],v=p[y+1],k=v==""||!isNaN(parseInt(v,10));if(d===""){var c=p.slice(0,y).join();i[c]==null&&(i[c]=Array.isArray(m)?m.length:0),d=i[c]++}else if(d==="__proto__")break;if(y===p.length-1)m[d]=l;else{var S=Object.getOwnPropertyDescriptor(m,d);S!=null&&(S=S.value),S==null&&(m[d]=S=k?[]:{}),m=S}}}return u},vr=Ee,Ht=function(t){var e=t.indexOf("?"),i=t.indexOf("#"),u=i<0?t.length:i,o=e<0?u:e,f=t.slice(0,o).replace(/\/{2,}/g,"/");return f?(f[0]!=="/"&&(f="/"+f),f.length>1&&f[f.length-1]==="/"&&(f=f.slice(0,-1))):f="/",{path:f,params:e<0?{}:vr(t.slice(e+1,u))}},Tr=Ht,kr=function(t){var e=Tr(t),i=Object.keys(e.params),u=[],o=new RegExp("^"+e.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(f,c,l){return c==null?"\\"+f:(u.push({k:c,r:l==="..."}),l==="..."?"(.*)":l==="."?"([^/]+)\\.":"([^/]+)"+(l||""))})+"$");return function(f){for(var c=0;c<i.length;c++)if(e.params[i[c]]!==f.params[i[c]])return!1;if(!u.length)return o.test(f.path);var l=o.exec(f.path);if(l==null)return!1;for(var c=0;c<u.length;c++)f.params[u[c].k]=u[c].r?l[c+1]:decodeURIComponent(l[c+1]);return!0}},re=Tt,ne=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$"),Oe=function(t,e){var i={};if(e!=null)for(var u in t)re.call(t,u)&&!ne.test(u)&&e.indexOf(u)<0&&(i[u]=t[u]);else for(var u in t)re.call(t,u)&&!ne.test(u)&&(i[u]=t[u]);return i},Sr=tt,Cr=ve,Er=gt.exports,ie=Ut,ae=Ht,Or=kr,Pr=Ce,Ar=Oe,Mt={};function Ir(t){try{return decodeURIComponent(t)}catch{return t}}var xr=function(t,e){var i=t==null?null:typeof t.setImmediate=="function"?t.setImmediate:t.setTimeout,u=Er.resolve(),o=!1,f=!1,c=0,l,p,m=Mt,y,d,v,k,S={onbeforeupdate:function(){return c=c?2:1,!(!c||Mt===m)},onremove:function(){t.removeEventListener("popstate",R,!1),t.removeEventListener("hashchange",q,!1)},view:function(){if(!(!c||Mt===m)){var E=[Sr(y,d.key,d)];return m&&(E=m.render(E[0])),E}}},T=j.SKIP={};function q(){o=!1;var E=t.location.hash;j.prefix[0]!=="#"&&(E=t.location.search+E,j.prefix[0]!=="?"&&(E=t.location.pathname+E,E[0]!=="/"&&(E="/"+E)));var $=E.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,Ir).slice(j.prefix.length),O=ae($);Pr(O.params,t.history.state);function z(P){console.error(P),B(p,null,{replace:!0})}x(0);function x(P){for(;P<l.length;P++)if(l[P].check(O)){var J=l[P].component,G=l[P].route,at=J,et=k=function(Y){if(et===k){if(Y===T)return x(P+1);y=Y!=null&&(typeof Y.view=="function"||typeof Y=="function")?Y:"div",d=O.params,v=$,k=null,m=J.render?J:null,c===2?e.redraw():(c=2,e.redraw.sync())}};J.view||typeof J=="function"?(J={},et(at)):J.onmatch?u.then(function(){return J.onmatch(O.params,$,G)}).then(et,$===p?null:z):et("div");return}if($===p)throw new Error("Could not resolve default route "+p+".");B(p,null,{replace:!0})}}function R(){o||(o=!0,i(q))}function B(E,$,O){if(E=ie(E,$),f){R();var z=O?O.state:null,x=O?O.title:null;O&&O.replace?t.history.replaceState(z,x,j.prefix+E):t.history.pushState(z,x,j.prefix+E)}else t.location.href=j.prefix+E}function j(E,$,O){if(!E)throw new TypeError("DOM element being rendered to does not exist.");if(l=Object.keys(O).map(function(x){if(x[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(x))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:x,component:O[x],check:Or(x)}}),p=$,$!=null){var z=ae($);if(!l.some(function(x){return x.check(z)}))throw new ReferenceError("Default route doesn't match any known routes.")}typeof t.history.pushState=="function"?t.addEventListener("popstate",R,!1):j.prefix[0]==="#"&&t.addEventListener("hashchange",q,!1),f=!0,e.mount(E,S),q()}return j.set=function(E,$,O){k!=null&&(O=O||{},O.replace=!0),k=null,B(E,$,O)},j.get=function(){return v},j.prefix="#!",j.Link={view:function(E){var $=Cr(E.attrs.selector||"a",Ar(E.attrs,["options","params","selector","onclick"]),E.children),O,z,x;return($.attrs.disabled=Boolean($.attrs.disabled))?($.attrs.href=null,$.attrs["aria-disabled"]="true"):(O=E.attrs.options,z=E.attrs.onclick,x=ie($.attrs.href,E.attrs.params),$.attrs.href=j.prefix+x,$.attrs.onclick=function(P){var J;typeof z=="function"?J=z.call(P.currentTarget,P):z==null||typeof z!="object"||typeof z.handleEvent=="function"&&z.handleEvent(P),J!==!1&&!P.defaultPrevented&&(P.button===0||P.which===0||P.which===1)&&(!P.currentTarget.target||P.currentTarget.target==="_self")&&!P.ctrlKey&&!P.metaKey&&!P.shiftKey&&!P.altKey&&(P.preventDefault(),P.redraw=!1,j.set(x,null,O))}),$}},j.param=function(E){return d&&E!=null?d[E]:d},j},jr=Dt,Nr=xr(typeof window!="undefined"?window:null,jr),kt=cr,Pe=br,Ae=Dt,K=function(){return kt.apply(this,arguments)};K.m=kt;K.trust=kt.trust;K.fragment=kt.fragment;K.Fragment="[";K.mount=Ae.mount;K.route=Nr;K.render=ke;K.redraw=Ae.redraw;K.request=Pe.request;K.jsonp=Pe.jsonp;K.parseQueryString=Ee;K.buildQueryString=Se;K.parsePathname=Ht;K.buildPathname=Ut;K.vnode=tt;K.PromisePolyfill=Te;K.censor=Oe;var g=K;function L(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function X(t){return function e(i){return arguments.length===0||L(i)?e:t.apply(this,arguments)}}function rt(t){return function e(i,u){switch(arguments.length){case 0:return e;case 1:return L(i)?e:X(function(o){return t(i,o)});default:return L(i)&&L(u)?e:L(i)?X(function(o){return t(o,u)}):L(u)?X(function(o){return t(i,o)}):t(i,u)}}}function qr(t){return function e(i,u,o){switch(arguments.length){case 0:return e;case 1:return L(i)?e:rt(function(f,c){return t(i,f,c)});case 2:return L(i)&&L(u)?e:L(i)?rt(function(f,c){return t(f,u,c)}):L(u)?rt(function(f,c){return t(i,f,c)}):X(function(f){return t(i,u,f)});default:return L(i)&&L(u)&&L(o)?e:L(i)&&L(u)?rt(function(f,c){return t(f,c,o)}):L(i)&&L(o)?rt(function(f,c){return t(f,u,c)}):L(u)&&L(o)?rt(function(f,c){return t(i,f,c)}):L(i)?X(function(f){return t(f,u,o)}):L(u)?X(function(f){return t(i,f,o)}):L(o)?X(function(f){return t(i,u,f)}):t(i,u,o)}}}var $r=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function _r(t){return Object.prototype.toString.call(t)==="[object String]"}function vt(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var ue=Object.prototype.toString,Lr=function(){return ue.call(arguments)==="[object Arguments]"?function(e){return ue.call(e)==="[object Arguments]"}:function(e){return vt("callee",e)}}(),Ie=Lr,Mr=!{toString:null}.propertyIsEnumerable("toString"),oe=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ce=function(){return arguments.propertyIsEnumerable("length")}(),Rr=function(e,i){for(var u=0;u<e.length;){if(e[u]===i)return!0;u+=1}return!1},zr=X(typeof Object.keys=="function"&&!ce?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var i,u,o=[],f=ce&&Ie(e);for(i in e)vt(i,e)&&(!f||i!=="length")&&(o[o.length]=i);if(Mr)for(u=oe.length-1;u>=0;)i=oe[u],vt(i,e)&&!Rr(o,i)&&(o[o.length]=i),u-=1;return o}),fe=zr,Dr=X(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),le=Dr;function se(t){for(var e=[],i;!(i=t.next()).done;)e.push(i.value);return e}function pe(t,e,i){for(var u=0,o=i.length;u<o;){if(t(e,i[u]))return!0;u+=1}return!1}function Ur(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function Hr(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Rt=typeof Object.is=="function"?Object.is:Hr;function he(t,e,i,u){var o=se(t),f=se(e);function c(l,p){return Ft(l,p,i.slice(),u.slice())}return!pe(function(l,p){return!pe(c,p,l)},f,o)}function Ft(t,e,i,u){if(Rt(t,e))return!0;var o=le(t);if(o!==le(e)||t==null||e==null)return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(o){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&Ur(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&Rt(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!Rt(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var f=i.length-1;f>=0;){if(i[f]===t)return u[f]===e;f-=1}switch(o){case"Map":return t.size!==e.size?!1:he(t.entries(),e.entries(),i.concat([t]),u.concat([e]));case"Set":return t.size!==e.size?!1:he(t.values(),e.values(),i.concat([t]),u.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=fe(t);if(c.length!==fe(e).length)return!1;var l=i.concat([t]),p=u.concat([e]);for(f=c.length-1;f>=0;){var m=c[f];if(!(vt(m,e)&&Ft(e[m],t[m],l,p)))return!1;f-=1}return!0}var Fr=rt(function(e,i){return Ft(e,i,[],[])}),xe=Fr;function Kr(t){return Object.prototype.toString.call(t)==="[object Object]"}var Br=X(function(e){return e!=null&&typeof e["fantasy-land/empty"]=="function"?e["fantasy-land/empty"]():e!=null&&e.constructor!=null&&typeof e.constructor["fantasy-land/empty"]=="function"?e.constructor["fantasy-land/empty"]():e!=null&&typeof e.empty=="function"?e.empty():e!=null&&e.constructor!=null&&typeof e.constructor.empty=="function"?e.constructor.empty():$r(e)?[]:_r(e)?"":Kr(e)?{}:Ie(e)?function(){return arguments}():void 0}),Jr=Br,Vr=X(function(e){return e!=null&&xe(e,Jr(e))}),ge=Vr,Wr=qr(function(e,i,u){return xe(i,u[e])}),Z=Wr,je=typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout,Qr=I;function I(t,e){this.fork=t,this.cleanup=e||function(){}}I.prototype.of=function(e){return new I(function(i,u){return u(e)})};I.of=I.prototype.of;I.prototype.rejected=function(e){return new I(function(i){return i(e)})};I.rejected=I.prototype.rejected;I.prototype.map=function(e){var i=this.fork,u=this.cleanup;return new I(function(o,f){return i(function(c){return o(c)},function(c){return f(e(c))})},u)};I.prototype.chain=function(e){var i=this.fork,u=this.cleanup;return new I(function(o,f){return i(function(c){return o(c)},function(c){return e(c).fork(o,f)})},u)};I.prototype.ap=function(e){var i=this.fork,u=e.fork,o=this.cleanup,f=e.cleanup;function c(l){o(l[0]),f(l[1])}return new I(function(l,p){var m,y=!1,d,v=!1,k=!1,S,T=i(B,R(function(j){y=!0,m=j})),q=u(B,R(function(j){v=!0,d=j}));function R(j){return function(E){if(!k)return j(E),y&&v?(je(function(){c(S)}),p(m(d))):E}}function B(j){if(!k)return k=!0,l(j)}return S=[T,q]},c)};I.prototype.concat=function(e){var i=this.fork,u=e.fork,o=this.cleanup,f=e.cleanup;function c(l){o(l[0]),f(l[1])}return new I(function(l,p){var m=!1,y,d=i(k(l),k(p)),v=u(k(l),k(p));return y=[d,v];function k(S){return function(T){if(!m)return m=!0,je(function(){c(y)}),S(T)}}},c)};I.empty=function(){return new I(function(){})};I.prototype.empty=I.empty;I.prototype.toString=function(){return"Task"};I.prototype.orElse=function(e){var i=this.fork,u=this.cleanup;return new I(function(o,f){return i(function(c){return e(c).fork(o,f)},function(c){return f(c)})},u)};I.prototype.fold=function(e,i){var u=this.fork,o=this.cleanup;return new I(function(f,c){return u(function(l){return c(e(l))},function(l){return c(i(l))})},o)};I.prototype.cata=function(e){return this.fold(e.Rejected,e.Resolved)};I.prototype.swap=function(){var e=this.fork,i=this.cleanup;return new I(function(u,o){return e(function(f){return o(f)},function(f){return u(f)})},i)};I.prototype.bimap=function(e,i){var u=this.fork,o=this.cleanup;return new I(function(f,c){return u(function(l){return f(e(l))},function(l){return c(i(l))})},o)};I.prototype.rejectedMap=function(e){var i=this.fork,u=this.cleanup;return new I(function(o,f){return i(function(c){return o(e(c))},function(c){return f(c)})},u)};var Ne=Qr;const Gr="http://localhost:8000/",Xr={"Content-Type":"application/json"},Yr=t=>e=>i=>e(JSON.parse(JSON.stringify(i))),Zr=t=>e=>i=>e(i),bt=t=>e=>i=>u=>new Ne((o,f)=>g.request({method:t,url:Gr+i,headers:Xr,body:u,withCredentials:!1}).then(Zr()(f),Yr()(o))),tn={getTask:(t,e)=>bt("GET")(t)(e)(),postTask:(t,e,i)=>bt("POST")(t)(e)(i),putTask:(t,e,i)=>bt("PUT")(t)(e)(i),deleteTask:(t,e)=>bt("DELETE")(t)(e)()},qe=()=>"xxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,i=t=="x"?e:e&3|8;return i.toString(16)}),$e=t=>e=>(console.log(t,e),e);window.log=$e;const en=["Of Them","Boxe(s)","Can(s)","gram(s)","kilogram(s)","pound(s)","liter(s)","mliter(s)","ounce(s)"],rn=t=>{var e;return t.stores.find(Z("id",(e=t.currentStore)==null?void 0:e.id))||t.stores[0]},it=t=>{const e=c=>c.http.getTask(c,"stores"),i=c=>c.http.getTask(c,"cats"),u=c=>c.http.getTask(c,"items"),o=({stores:c,cats:l,items:p})=>{let m=l.map(y=>(y.items=p.filter(Z("catId",y.id)).sort((d,v)=>d.order-v.order).reverse(),y)).sort((y,d)=>y.order-d.order);return{cats:m,stores:c.map(y=>(y.cats=m.filter(Z("storeId",y.id)).sort((d,v)=>d.order-v.order),y)),items:p}},f=({stores:c,cats:l,items:p})=>{t.stores=c,t.cats=l,t.items=p.reverse(),t.currentStore=rn(t)};Ne.of(c=>l=>p=>o({stores:c,cats:l,items:p})).ap(e(t)).ap(i(t)).ap(u(t)).fork($e("error"),f)},nn=({catId:t,title:e,notes:i,quantity:u,unit:o,price:f,order:c})=>({id:qe(),title:e,notes:i,catId:t,order:c,quantity:u,unit:o,price:f,notes:i,purchased:!1}),an=(t,e=0)=>({title:t,id:qe(),order:e}),mt={state:{},http:tn,settings:{},state:{dragging:{item:"",swapItem:""},catIds:[],items:[],showModal:!1,modalContent:null},stores:[],cats:[],items:[],currentStore:null},un=(t,e)=>{let i=an(e.title);const u=log("error"),o=f=>{e.title="",t.state.showModal=!1,t.state.modalContent=null,it(t)};t.http.postTask(t,"stores",i).fork(u,o)},_e=()=>{const t={title:""};return{view:({attrs:{mdl:e}})=>g("form.w3-container.w3-card.w3-white.w3-animate-zoom",{onsubmit:i=>i.preventDefault()},g("div.w3-section",g("label",g("b","Store Title")),g("input.w3-input.w3-border-bottom",{oncreate:({dom:i})=>{i.select(),i.focus()},type:"text",value:t.title,oninput:i=>t.title=i.target.value})),g("button.w3-button.w3-block.w3-orange.w3-section.w3-padding",{onclick:()=>un(e,t)},"add"))}},on=(t,e)=>t.cats.find(Z("id",e)).items.length,cn=(t,e,i)=>{const{catId:u,title:o,notes:f,order:c,quantity:l,unit:p,price:m,id:y}=e;let d=i?{catId:u,title:o,notes:f,order:c,quantity:l,unit:p,price:m,id:y}:nn({catId:u,title:o,notes:f,order:on(t,u),quantity:l,unit:p,price:m});const v=S=>{e={catId:u,title:"",notes:"",order:0,quantity:"",unit:"",price:0},it(t),t.state.showModal=!1,t.state.modalContent=null};return((S,T)=>i?S.http.postTask(S,"items",T):S.http.putTask(S,`items/${T.id}`,T))(t,d).fork(log("error"),v)},Kt=({attrs:{mdl:t,catId:e,item:i,isEdit:u}})=>{const o={catId:e,catTitle:"",title:"",notes:"",order:0,quantity:0,unit:"",price:0};return e&&(o.catTitle=t.cats.find(Z("id",e)).title),u&&(o.catId=i.catId,o.title=i.title,o.notes=i.notes,o.order=i.order,o.quantity=i.quantity,o.unit=i.unit,o.price=i.price,o.id=i.id),{view:({attrs:{mdl:f}})=>{var c;return g("form.w3-container.w3-card.w3-white.w3-animate-zoom",{onsubmit:l=>l.preventDefault()},g("div.w3-section",g("label",g("b","Title")),g("input.w3-input.w3-border-bottom",{oncreate:({dom:l})=>{l.select(),l.focus()},type:"text",value:o.title,oninput:l=>o.title=l.target.value})),g("div.w3-section",g("label",g("b","Category")),g("select.w3-input.w3-border-bottom",{value:((c=f.cats.find(Z("id",o.catId)))==null?void 0:c.title)||"",onchange:l=>{o.catTitle=l.target.value,o.catId=f.cats.find(Z("title",o.catTitle)).id}},f.cats.map(l=>g(`option#${l.id}`,l.title)))),g("div.w3-section",g("label",g("b","Quantity")),g("input.w3-input.w3-border-bottom",{type:"number",value:o.quantity,oninput:l=>o.quantity=l.target.value})),g("div.w3-section",g("label",g("b","Unit")),g("select.w3-input.w3-border-bottom",{value:o.unit,onchange:l=>o.unit=l.target.value},en.map(l=>g("option",l)))),g("div.w3-section",g("label",g("b","Price")),g("input.w3-input.w3-border-bottom",{type:"number",value:o.price,oninput:l=>o.price=l.target.value})),g("div.w3-section",g("label",g("b","Notes")),g("textarea.w3-input.w3-border-bottom",{oninput:l=>o.notes=l.target.value},o.notes)),g("button.w3-button.w3-block.w3-orange.w3-section.w3-padding",{onclick:()=>cn(f,o,u)},"add"))}}},ht=new Set,fn=(t,e)=>{t.http.deleteTask(t,`stores/${e}`).fork(log("error deleteing"),()=>it(t))},ln=(t,e)=>{t.http.deleteTask(t,`cats/${e}`).fork(log("error deleteing"),()=>it(t))},sn=(t,e)=>Promise.resolve(t.setCat(e)),me=(t,e,i)=>Promise.resolve(t.currentStore=i).then(()=>e.toggleSideBar(e)),pn=()=>({view:({attrs:{mdl:t,state:e}})=>g(".w3-sidebar#sidebar.w3-bar-block.w3-collapse.w3-card.w3-animate-left",{style:{width:t.settings.profile=="desktop"?"300px":"90%",display:e.sidebar.open?"block":"none"}},t.settings.profile!="desktop"&&g("button.w3-bar-item.w3-button.w3-large",{onclick:()=>e.toggleSideBar(e)},"Close "),g("button.w3-button.w3-orange",{onclick:()=>{t.state.modalContent=g(_e,{mdl:t}),t.state.showModal=!0}},"New Store"),t.stores.map((i,u)=>g(".w3-right-align.w3-row",{key:i.id},g("button.w3-button.w3-left-align.w3-col",{class:t.currentStore.id==i.id?"w3-leftbar w3-border-orange w3-border-10":"",onclick:o=>{o.stopPropagation(),me(t,e,i)}},g(".w3-left-align.w3-col.s4",g("button.pointer.w3-badge.w3-pink.w3-border-0.w3-circle.w3-hover-red.w3-left-align",{onclick:o=>{o.stopPropagation(),fn(t,i.id)}},"x")),g("label.w3-label.w3-col.s4.w3-left-align.pointer",i.title),!ge(i.cats)&&g(".w3-col.s4.w3-right-align",{onclick:o=>{o.stopPropagation(),ht.has(i.id)?ht.delete(i.id):ht.add(i.id)}},g("i.w3-btn.w3-circle",ht.has(i.id)?"V":">"))),!ge(i.cats)&&g("ul.w3-list",{class:ht.has(i.id)?"w3-show":"w3-hide",id:i.id},i.cats.map((o,f)=>{var c;return g(".w3-list-item.pointer.w3-row",{key:o.id,onclick:()=>{sn(e,o.id).then(()=>me(t,e,i))}},g("button.pointer.w3-badge.w3-pink.w3-border-0.w3-circle.w3-hover-red.w3-left-align",{onclick:l=>{l.stopPropagation(),ln(t,o.id)}},"x"),g("label.w3-col s4",o.title),g(".w3-right-align.w3-col s4",g(".w3-tag w3-orange",(c=o.issues)==null?void 0:c.length)))})))))}),hn=()=>({view:({attrs:{mdl:t,state:e}})=>g("nav.w3-bar.w3-container.w3-padding.w3-fixed",g("button.w3-button.w3-hide-large.w3-border",{onclick:()=>e.toggleSideBar(e)},"MENU"),t.currentStore&&g(".w3-row w3-section",g(".m6 w3-left",g("h1.w3-title w3-col",t.currentStore.title)),g(".m3 w3-right",g("button. w3-button  w3-border w3-large w3-col",{onclick:()=>{t.state.modalContent=g(Kt,{mdl:t,catId:null}),t.state.showModal=!0}},"+"))))}),gn=(t,e)=>{console.log(t,e),t.http.deleteTask(t,`items/${e}`).fork(log("err"),()=>it(t))},mn=(t,e)=>i=>{i.preventDefault();const u=()=>{it(t),e.highlight=!1,t.state.dragging.item=null,t.state.dragging.swapItem=null};return t.state.dragging.item.order=t.state.dragging.swapItem.order,t.http.putTask(t,`items/${t.state.dragging.item.id}`,t.state.dragging.item).fork(log("error"),u),t},wn=(t,e,i)=>u=>{e.highlight=!0,t.state.dragging.swapItem=i,u.preventDefault()},yn=(t,e,i)=>u=>(e.highlight=!0,t.state.dragging.swapItem=i,u.preventDefault(),!0),dn=t=>e=>(t.highlight=!1,e.preventDefault(),!0),bn=(t,e,i)=>u=>(e.highlight=!1,t.state.dragging.swapItem=i,u.preventDefault(),!0),vn=t=>{const i=document.querySelector(".swipe-container"),u=document.querySelector(".output"),o=i.scrollLeft-i.clientWidth;o<80*-1?console.log("lrft",t):o>80?console.log("right",t):(console.log("nothing",t),u.innerHTML=`did not swipe ${80}px`)},Tn=()=>{const t={highlight:!1,draggable:!1};return{view:({attrs:{item:e,mdl:i}})=>g("li.w3-list-item.w3-leftbar.w3-hover-border-orange.dragster-block",{id:e.id,draggable:!0,class:t.highlight?"w3-orange":"",ondrop:mn(i,t),ondragover:wn(i,t,e),ondragenter:yn(i,t,e),ondragend:bn(i,t,e),ondragleave:dn(t),ondragstart:()=>i.state.dragging.item=e},g(".w3-bar.swipe-container",{ontouchend:vn},g(".swipe-action.swipe-left",g("button.w3-button w3-border.w3-right",{onclick:()=>{i.state.showModal=!0,i.state.modalContent=g(Kt,{catId:e.catId,mdl:i,item:e,isEdit:!0})}},"Edit")),g(".swipe-element",e.img&&g("img.w3-bar-item.w3-circle",{src:e.img,style:{width:"85px"}}),g("h4.w3-bar-item",e.title)),g(".swipe-action.swipe-right",g("button.w3-button w3-border.w3-right",{onclick:()=>gn(i,e.id)},"Delete"))),g(".w3-bar",e.quantity>1&&g("p.w3-p",`${e.quantity} ${e.unit}`)))}},kn=({attrs:{mdl:t,cat:e}})=>{const i={catId:e.id,title:e.title,items:e.items,isSelected:!1,togglePinSection:{onclick:()=>i.isSelected=!i.isSelected}};return{view:({attrs:{cat:u,mdl:o,key:f}})=>g("section.w3-section.w3-border-left.",{key:f,id:u.id},g(".w3-panel.w3-bar",{style:{position:"-webkit-sticky",position:"sticky",top:0,backgroundColor:"white"}},g("p.w3-right",u.title.toUpperCase()),g("button.w3-btn w3-border-none w3-padding.w3-left",{onclick:()=>{o.state.modalContent=g(Kt,{mdl:o,catId:u.id}),o.state.showModal=!0}},"+")),g(".w3-ul w3-paddings w3-border-top.dragster-region",u.items.map((c,l)=>g(Tn,{key:c.id,item:c,mdl:o}))))}},Sn=()=>({view:({attrs:{mdl:t,state:e}})=>g("section.w3-section.w3-row w3-ul. w3-padding-row",{onupdate:({dom:i})=>{e.setCat()&&(Array.from(i.children).find(Z("id",e.setCat())).scrollIntoView({behavior:"smooth",block:"start",inline:"center"}),e.setCat(null))},style:{height:"80dvh",overflow:"auto"}},t.currentStore?t.currentStore.cats.map((i,u)=>g(kn,{key:u,cat:i,mdl:t,state:e})):g("section.w3-section",g("button.w3-border-0 w3-button w3-panel.w3-display-middle w3-light-grey w3-col-1",{onclick:()=>{t.state.modalContent=g(_e,{mdl:t}),t.state.showModal=!0}},"Create a Store to Begin")))}),Cn=({attrs:{mdl:t}})=>({view:()=>g(".w3-modal#modal",{onclick:e=>{e.target.id=="modal"&&(t.state.showModal=!1,t.state.modalContent=null)},style:{display:t.state.showModal?"block":"none"}},g("modal.w3-modal-content",g(".w3-container",t.state.modalContent)))});M.SKIP={};M.lift=Pn;M.scan=En;M.merge=Le;M.combine=St;M.scanMerge=On;M["fantasy-land/of"]=M;var we=!1;Object.defineProperty(M,"HALT",{get:function(){return we||console.log("HALT is deprecated and has been renamed to SKIP"),we=!0,M.SKIP}});function M(t){var e=[],i=[];function u(c){return arguments.length&&c!==M.SKIP&&(t=c,ye(u)&&(u.changing(),u.state="active",e.forEach(function(l,p){l(i[p](t))}))),t}u.constructor=M,u.state=arguments.length&&t!==M.SKIP?"active":"pending",u.parents=[],u.changing=function(){ye(u)&&(u.state="changing"),e.forEach(function(c){c.changing()})},u.map=function(c,l){var p=u.state==="active"&&l!==M.SKIP?M(c(t)):M();return p.parents.push(u),e.push(p),i.push(c),p};var o;function f(){return o=M(),o.map(function(c){return c===!0&&(u.parents.forEach(function(l){l.unregisterChild(u)}),u.state="ended",u.parents.length=e.length=i.length=0),c}),o}return u.toJSON=function(){return t!=null&&typeof t.toJSON=="function"?t.toJSON():t},u["fantasy-land/map"]=u.map,u["fantasy-land/ap"]=function(c){return St(function(l,p){return l()(p())},[c,u])},u.unregisterChild=function(c){var l=e.indexOf(c);l!==-1&&(e.splice(l,1),i.splice(l,1))},Object.defineProperty(u,"end",{get:function(){return o||f()}}),u}function St(t,e){var i=e.every(function(l){if(l.constructor!==M)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return l.state==="active"}),u=i?M(t.apply(null,e.concat([e]))):M(),o=[],f=e.map(function(l){return l.map(function(p){return o.push(l),(i||e.every(function(m){return m.state!=="pending"}))&&(i=!0,u(t.apply(null,e.concat([o]))),o=[]),p},M.SKIP)}),c=u.end.map(function(l){l===!0&&(f.forEach(function(p){p.end(!0)}),c.end(!0))});return u}function Le(t){return St(function(){return t.map(function(e){return e()})},t)}function En(t,e,i){var u=i.map(function(o){var f=t(e,o);return f!==M.SKIP&&(e=f),f});return u(e),u}function On(t,e){var i=t.map(function(o){return o[0]}),u=St(function(){var o=arguments[arguments.length-1];return i.forEach(function(f,c){o.indexOf(f)>-1&&(e=t[c][1](e,f()))}),e},i);return u(e),u}function Pn(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Le(e).map(function(i){return t.apply(void 0,i)})}function ye(t){return t.state==="pending"||t.state==="active"||t.state==="changing"}const An=t=>({maxHeight:"100dvh",overflow:"hidden",marginLeft:t.settings.profile=="desktop"?"300px":"0"}),In=t=>{const e={sidebar:{open:!1},setCat:M(null),toggleSideBar:i=>i.sidebar.open=!i.sidebar.open};return it(t),{view:()=>g("page.w3-theme",g(Cn,{mdl:t}),g(pn,{mdl:t,state:e}),g("section.#main",{style:An(t)},g(hn,{mdl:t,state:e}),g(Sn,{mdl:t,state:e})))}},xn=document.body;let Me=window.innerWidth;"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(t=>{console.log("\u2699\uFE0F SW registered: ",t)}).catch(t=>{console.log("\u{1F9DF} SW registration failed: ",t)})});const Re=t=>t<=411?"phone":t<=990?"tablet":"desktop",ze=t=>{const e=window.innerWidth;if(t!==e){t=e;var i=mt.settings.profile;mt.settings.profile=Re(e),i!=mt.settings.profile&&g.redraw()}return requestAnimationFrame(ze)};mt.settings.profile=Re(Me);ze(Me);g.mount(xn,In(mt));
