const Qe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}};Qe();var ot=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function nt(t,e,i,u,o,c){return{tag:t,key:e,attrs:i,children:u,text:o,dom:c,domSize:void 0,state:void 0,events:void 0,instance:void 0}}nt.normalize=function(t){return Array.isArray(t)?nt("[",void 0,void 0,nt.normalizeChildren(t),void 0,void 0):t==null||typeof t=="boolean"?null:typeof t=="object"?t:nt("#",void 0,void 0,String(t),void 0,void 0)};nt.normalizeChildren=function(t){var e=[];if(t.length){for(var i=t[0]!=null&&t[0].key!=null,u=1;u<t.length;u++)if((t[u]!=null&&t[u].key!=null)!==i)throw new TypeError(i&&(t[u]!=null||typeof t[u]=="boolean")?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var u=0;u<t.length;u++)e[u]=nt.normalize(t[u])}return e};var tt=nt,Ge=tt,de=function(){var t=arguments[this],e=this+1,i;if(t==null?t={}:(typeof t!="object"||t.tag!=null||Array.isArray(t))&&(t={},e=this),arguments.length===e+1)i=arguments[e],Array.isArray(i)||(i=[i]);else for(i=[];e<arguments.length;)i.push(arguments[e++]);return Ge("",t.key,t,i)},Tt={}.hasOwnProperty,Xe=tt,Ye=de,ft=Tt,Ze=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,be={};function Yt(t){for(var e in t)if(ft.call(t,e))return!1;return!0}function tr(t){for(var e,i="div",u=[],o={};e=Ze.exec(t);){var c=e[1],f=e[2];if(c===""&&f!=="")i=f;else if(c==="#")o.id=f;else if(c===".")u.push(f);else if(e[3][0]==="["){var l=e[6];l&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),e[4]==="class"?u.push(l):o[e[4]]=l===""?l:l||!0}}return u.length>0&&(o.className=u.join(" ")),be[t]={tag:i,attrs:o}}function er(t,e){var i=e.attrs,u=ft.call(i,"class"),o=u?i.class:i.className;if(e.tag=t.tag,e.attrs={},!Yt(t.attrs)&&!Yt(i)){var c={};for(var f in i)ft.call(i,f)&&(c[f]=i[f]);i=c}for(var f in t.attrs)ft.call(t.attrs,f)&&f!=="className"&&!ft.call(i,f)&&(i[f]=t.attrs[f]);(o!=null||t.attrs.className!=null)&&(i.className=o!=null?t.attrs.className!=null?String(t.attrs.className)+" "+String(o):o:t.attrs.className!=null?t.attrs.className:null),u&&(i.class=null);for(var f in i)if(ft.call(i,f)&&f!=="key"){e.attrs=i;break}return e}function rr(t){if(t==null||typeof t!="string"&&typeof t!="function"&&typeof t.view!="function")throw Error("The selector must be either a string or a component.");var e=Ye.apply(1,arguments);return typeof t=="string"&&(e.children=Xe.normalizeChildren(e.children),t!=="[")?er(be[t]||tr(t),e):(e.tag=t,e)}var ve=rr,nr=tt,ir=function(t){return t==null&&(t=""),nr("<",void 0,void 0,t,void 0,void 0)},ar=tt,ur=de,or=function(){var t=ur.apply(0,arguments);return t.tag="[",t.children=ar.normalizeChildren(t.children),t},zt=ve;zt.trust=ir;zt.fragment=or;var fr=zt,gt={exports:{}},H=function(t){if(!(this instanceof H))throw new Error("Promise must be called with 'new'.");if(typeof t!="function")throw new TypeError("executor must be a function.");var e=this,i=[],u=[],o=p(i,!0),c=p(u,!1),f=e._instance={resolvers:i,rejectors:u},l=typeof setImmediate=="function"?setImmediate:setTimeout;function p(w,d){return function v(k){var S;try{if(d&&k!=null&&(typeof k=="object"||typeof k=="function")&&typeof(S=k.then)=="function"){if(k===e)throw new TypeError("Promise can't be resolved with itself.");m(S.bind(k))}else l(function(){!d&&w.length===0&&console.error("Possible unhandled promise rejection:",k);for(var T=0;T<w.length;T++)w[T](k);i.length=0,u.length=0,f.state=d,f.retry=function(){v(k)}})}catch(T){c(T)}}}function m(w){var d=0;function v(S){return function(T){d++>0||S(T)}}var k=v(c);try{w(v(o),k)}catch(S){k(S)}}m(t)};H.prototype.then=function(t,e){var i=this,u=i._instance;function o(p,m,w,d){m.push(function(v){if(typeof p!="function")w(v);else try{c(p(v))}catch(k){f&&f(k)}}),typeof u.retry=="function"&&d===u.state&&u.retry()}var c,f,l=new H(function(p,m){c=p,f=m});return o(t,u.resolvers,c,!0),o(e,u.rejectors,f,!1),l};H.prototype.catch=function(t){return this.then(null,t)};H.prototype.finally=function(t){return this.then(function(e){return H.resolve(t()).then(function(){return e})},function(e){return H.resolve(t()).then(function(){return H.reject(e)})})};H.resolve=function(t){return t instanceof H?t:new H(function(e){e(t)})};H.reject=function(t){return new H(function(e,i){i(t)})};H.all=function(t){return new H(function(e,i){var u=t.length,o=0,c=[];if(t.length===0)e([]);else for(var f=0;f<t.length;f++)(function(l){function p(m){o++,c[l]=m,o===u&&e(c)}t[l]!=null&&(typeof t[l]=="object"||typeof t[l]=="function")&&typeof t[l].then=="function"?t[l].then(p,i):p(t[l])})(f)})};H.race=function(t){return new H(function(e,i){for(var u=0;u<t.length;u++)t[u].then(e,i)})};var Te=H,pt=Te;typeof window!="undefined"?(typeof window.Promise=="undefined"?window.Promise=pt:window.Promise.prototype.finally||(window.Promise.prototype.finally=pt.prototype.finally),gt.exports=window.Promise):typeof ot!="undefined"?(typeof ot.Promise=="undefined"?ot.Promise=pt:ot.Promise.prototype.finally||(ot.Promise.prototype.finally=pt.prototype.finally),gt.exports=ot.Promise):gt.exports=pt;var Lt=tt,cr=function(t){var e=t&&t.document,i,u={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function o(n){return n.attrs&&n.attrs.xmlns||u[n.tag]}function c(n,r){if(n.state!==r)throw new Error("'vnode.state' must not be modified.")}function f(n){var r=n.state;try{return this.apply(r,arguments)}finally{c(n,r)}}function l(){try{return e.activeElement}catch{return null}}function p(n,r,a,s,h,y,C){for(var P=a;P<s;P++){var b=r[P];b!=null&&m(n,b,h,C,y)}}function m(n,r,a,s,h){var y=r.tag;if(typeof y=="string")switch(r.state={},r.attrs!=null&&Pt(r.attrs,r,a),y){case"#":w(n,r,h);break;case"<":v(n,r,s,h);break;case"[":k(n,r,a,s,h);break;default:S(n,r,a,s,h)}else q(n,r,a,s,h)}function w(n,r,a){r.dom=e.createTextNode(r.children),Y(n,r.dom,a)}var d={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function v(n,r,a,s){var h=r.children.match(/^\s*?<(\w+)/im)||[],y=e.createElement(d[h[1]]||"div");a==="http://www.w3.org/2000/svg"?(y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+r.children+"</svg>",y=y.firstChild):y.innerHTML=r.children,r.dom=y.firstChild,r.domSize=y.childNodes.length,r.instance=[];for(var C=e.createDocumentFragment(),P;P=y.firstChild;)r.instance.push(P),C.appendChild(P);Y(n,C,s)}function k(n,r,a,s,h){var y=e.createDocumentFragment();if(r.children!=null){var C=r.children;p(y,C,0,C.length,a,null,s)}r.dom=y.firstChild,r.domSize=y.childNodes.length,Y(n,y,h)}function S(n,r,a,s,h){var y=r.tag,C=r.attrs,P=C&&C.is;s=o(r)||s;var b=s?P?e.createElementNS(s,y,{is:P}):e.createElementNS(s,y):P?e.createElement(y,{is:P}):e.createElement(y);if(r.dom=b,C!=null&&Ue(r,C,s),Y(n,b,h),!Bt(r)&&r.children!=null){var N=r.children;p(b,N,0,N.length,a,null,s),r.tag==="select"&&C!=null&&Fe(r,C)}}function T(n,r){var a;if(typeof n.tag.view=="function"){if(n.state=Object.create(n.tag),a=n.state.view,a.$$reentrantLock$$!=null)return;a.$$reentrantLock$$=!0}else{if(n.state=void 0,a=n.tag,a.$$reentrantLock$$!=null)return;a.$$reentrantLock$$=!0,n.state=n.tag.prototype!=null&&typeof n.tag.prototype.view=="function"?new n.tag(n):n.tag(n)}if(Pt(n.state,n,r),n.attrs!=null&&Pt(n.attrs,n,r),n.instance=Lt.normalize(f.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");a.$$reentrantLock$$=null}function q(n,r,a,s,h){T(r,a),r.instance!=null?(m(n,r.instance,a,s,h),r.dom=r.instance.dom,r.domSize=r.dom!=null?r.instance.domSize:0):r.domSize=0}function R(n,r,a,s,h,y){if(!(r===a||r==null&&a==null))if(r==null||r.length===0)p(n,a,0,a.length,s,h,y);else if(a==null||a.length===0)ct(n,r,0,r.length);else{var C=r[0]!=null&&r[0].key!=null,P=a[0]!=null&&a[0].key!=null,b=0,N=0;if(!C)for(;N<r.length&&r[N]==null;)N++;if(!P)for(;b<a.length&&a[b]==null;)b++;if(C!==P)ct(n,r,N,r.length),p(n,a,b,a.length,s,h,y);else if(P){for(var W=r.length-1,F=a.length-1,dt,Q,D,V,$,jt;W>=N&&F>=b&&(V=r[W],$=a[F],V.key===$.key);)V!==$&&B(n,V,$,s,h,y),$.dom!=null&&(h=$.dom),W--,F--;for(;W>=N&&F>=b&&(Q=r[N],D=a[b],Q.key===D.key);)N++,b++,Q!==D&&B(n,Q,D,s,G(r,N,h),y);for(;W>=N&&F>=b&&!(b===F||Q.key!==$.key||V.key!==D.key);)jt=G(r,N,h),at(n,V,jt),V!==D&&B(n,V,D,s,jt,y),++b<=--F&&at(n,Q,h),Q!==$&&B(n,Q,$,s,h,y),$.dom!=null&&(h=$.dom),N++,W--,V=r[W],$=a[F],Q=r[N],D=a[b];for(;W>=N&&F>=b&&V.key===$.key;)V!==$&&B(n,V,$,s,h,y),$.dom!=null&&(h=$.dom),W--,F--,V=r[W],$=a[F];if(b>F)ct(n,r,N,W+1);else if(N>W)p(n,a,b,F+1,s,h,y);else{var We=h,Xt=F-b+1,st=new Array(Xt),Nt=0,U=0,qt=2147483647,_t=0,dt,$t;for(U=0;U<Xt;U++)st[U]=-1;for(U=F;U>=b;U--){dt==null&&(dt=x(r,N,W+1)),$=a[U];var ut=dt[$.key];ut!=null&&(qt=ut<qt?ut:-1,st[U-b]=ut,V=r[ut],r[ut]=null,V!==$&&B(n,V,$,s,h,y),$.dom!=null&&(h=$.dom),_t++)}if(h=We,_t!==W-N+1&&ct(n,r,N,W+1),_t===0)p(n,a,b,F+1,s,h,y);else if(qt===-1)for($t=J(st),Nt=$t.length-1,U=F;U>=b;U--)D=a[U],st[U-b]===-1?m(n,D,s,y,h):$t[Nt]===U-b?Nt--:at(n,D,h),D.dom!=null&&(h=a[U].dom);else for(U=F;U>=b;U--)D=a[U],st[U-b]===-1&&m(n,D,s,y,h),D.dom!=null&&(h=a[U].dom)}}else{var xt=r.length<a.length?r.length:a.length;for(b=b<N?b:N;b<xt;b++)Q=r[b],D=a[b],!(Q===D||Q==null&&D==null)&&(Q==null?m(n,D,s,y,G(r,b+1,h)):D==null?yt(n,Q):B(n,Q,D,s,G(r,b+1,h),y));r.length>xt&&ct(n,r,b,r.length),a.length>xt&&p(n,a,b,a.length,s,h,y)}}}function B(n,r,a,s,h,y){var C=r.tag,P=a.tag;if(C===P){if(a.state=r.state,a.events=r.events,Ve(a,r))return;if(typeof C=="string")switch(a.attrs!=null&&It(a.attrs,a,s),C){case"#":j(r,a);break;case"<":E(n,r,a,y,h);break;case"[":_(n,r,a,s,h,y);break;default:O(r,a,s,y)}else z(n,r,a,s,h,y)}else yt(n,r),m(n,a,s,y,h)}function j(n,r){n.children.toString()!==r.children.toString()&&(n.dom.nodeValue=r.children),r.dom=n.dom}function E(n,r,a,s,h){r.children!==a.children?(Jt(n,r),v(n,a,s,h)):(a.dom=r.dom,a.domSize=r.domSize,a.instance=r.instance)}function _(n,r,a,s,h,y){R(n,r.children,a.children,s,h,y);var C=0,P=a.children;if(a.dom=null,P!=null){for(var b=0;b<P.length;b++){var N=P[b];N!=null&&N.dom!=null&&(a.dom==null&&(a.dom=N.dom),C+=N.domSize||1)}C!==1&&(a.domSize=C)}}function O(n,r,a,s){var h=r.dom=n.dom;s=o(r)||s,r.tag==="textarea"&&r.attrs==null&&(r.attrs={}),He(r,n.attrs,r.attrs,s),Bt(r)||R(h,n.children,r.children,a,null,s)}function z(n,r,a,s,h,y){if(a.instance=Lt.normalize(f.call(a.state.view,a)),a.instance===a)throw Error("A view cannot return the vnode it received as argument");It(a.state,a,s),a.attrs!=null&&It(a.attrs,a,s),a.instance!=null?(r.instance==null?m(n,a.instance,s,y,h):B(n,r.instance,a.instance,s,h,y),a.dom=a.instance.dom,a.domSize=a.instance.domSize):r.instance!=null?(yt(n,r.instance),a.dom=void 0,a.domSize=0):(a.dom=r.dom,a.domSize=r.domSize)}function x(n,r,a){for(var s=Object.create(null);r<a;r++){var h=n[r];if(h!=null){var y=h.key;y!=null&&(s[y]=r)}}return s}var A=[];function J(n){for(var r=[0],a=0,s=0,h=0,y=A.length=n.length,h=0;h<y;h++)A[h]=n[h];for(var h=0;h<y;++h)if(n[h]!==-1){var C=r[r.length-1];if(n[C]<n[h]){A[h]=C,r.push(h);continue}for(a=0,s=r.length-1;a<s;){var P=(a>>>1)+(s>>>1)+(a&s&1);n[r[P]]<n[h]?a=P+1:s=P}n[h]<n[r[a]]&&(a>0&&(A[h]=r[a-1]),r[a]=h)}for(a=r.length,s=r[a-1];a-- >0;)r[a]=s,s=A[s];return A.length=0,r}function G(n,r,a){for(;r<n.length;r++)if(n[r]!=null&&n[r].dom!=null)return n[r].dom;return a}function at(n,r,a){var s=e.createDocumentFragment();et(n,s,r),Y(n,s,a)}function et(n,r,a){for(;a.dom!=null&&a.dom.parentNode===n;){if(typeof a.tag!="string"){if(a=a.instance,a!=null)continue}else if(a.tag==="<")for(var s=0;s<a.instance.length;s++)r.appendChild(a.instance[s]);else if(a.tag!=="[")r.appendChild(a.dom);else if(a.children.length===1){if(a=a.children[0],a!=null)continue}else for(var s=0;s<a.children.length;s++){var h=a.children[s];h!=null&&et(n,r,h)}break}}function Y(n,r,a){a!=null?n.insertBefore(r,a):n.appendChild(r)}function Bt(n){if(n.attrs==null||n.attrs.contenteditable==null&&n.attrs.contentEditable==null)return!1;var r=n.children;if(r!=null&&r.length===1&&r[0].tag==="<"){var a=r[0].children;n.dom.innerHTML!==a&&(n.dom.innerHTML=a)}else if(r!=null&&r.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function ct(n,r,a,s){for(var h=a;h<s;h++){var y=r[h];y!=null&&yt(n,y)}}function yt(n,r){var a=0,s=r.state,h,y;if(typeof r.tag!="string"&&typeof r.state.onbeforeremove=="function"){var C=f.call(r.state.onbeforeremove,r);C!=null&&typeof C.then=="function"&&(a=1,h=C)}if(r.attrs&&typeof r.attrs.onbeforeremove=="function"){var C=f.call(r.attrs.onbeforeremove,r);C!=null&&typeof C.then=="function"&&(a|=2,y=C)}if(c(r,s),!a)wt(r),Ct(n,r);else{if(h!=null){var P=function(){a&1&&(a&=2,a||b())};h.then(P,P)}if(y!=null){var P=function(){a&2&&(a&=1,a||b())};y.then(P,P)}}function b(){c(r,s),wt(r),Ct(n,r)}}function Jt(n,r){for(var a=0;a<r.instance.length;a++)n.removeChild(r.instance[a])}function Ct(n,r){for(;r.dom!=null&&r.dom.parentNode===n;){if(typeof r.tag!="string"){if(r=r.instance,r!=null)continue}else if(r.tag==="<")Jt(n,r);else{if(r.tag!=="["&&(n.removeChild(r.dom),!Array.isArray(r.children)))break;if(r.children.length===1){if(r=r.children[0],r!=null)continue}else for(var a=0;a<r.children.length;a++){var s=r.children[a];s!=null&&Ct(n,s)}}break}}function wt(n){if(typeof n.tag!="string"&&typeof n.state.onremove=="function"&&f.call(n.state.onremove,n),n.attrs&&typeof n.attrs.onremove=="function"&&f.call(n.attrs.onremove,n),typeof n.tag!="string")n.instance!=null&&wt(n.instance);else{var r=n.children;if(Array.isArray(r))for(var a=0;a<r.length;a++){var s=r[a];s!=null&&wt(s)}}}function Ue(n,r,a){n.tag==="input"&&r.type!=null&&n.dom.setAttribute("type",r.type);var s=r!=null&&n.tag==="input"&&r.type==="file";for(var h in r)Et(n,h,null,r[h],a,s)}function Et(n,r,a,s,h,y){if(!(r==="key"||r==="is"||s==null||Vt(r)||a===s&&!Ke(n,r)&&typeof s!="object"||r==="type"&&n.tag==="input")){if(r[0]==="o"&&r[1]==="n")return Gt(n,r,s);if(r.slice(0,6)==="xlink:")n.dom.setAttributeNS("http://www.w3.org/1999/xlink",r.slice(6),s);else if(r==="style")Qt(n.dom,a,s);else if(Wt(n,r,h)){if(r==="value"){if((n.tag==="input"||n.tag==="textarea")&&n.dom.value===""+s&&(y||n.dom===l())||n.tag==="select"&&a!==null&&n.dom.value===""+s||n.tag==="option"&&a!==null&&n.dom.value===""+s)return;if(y&&""+s!=""){console.error("`value` is read-only on file inputs!");return}}n.dom[r]=s}else typeof s=="boolean"?s?n.dom.setAttribute(r,""):n.dom.removeAttribute(r):n.dom.setAttribute(r==="className"?"class":r,s)}}function De(n,r,a,s){if(!(r==="key"||r==="is"||a==null||Vt(r)))if(r[0]==="o"&&r[1]==="n")Gt(n,r,void 0);else if(r==="style")Qt(n.dom,a,null);else if(Wt(n,r,s)&&r!=="className"&&r!=="title"&&!(r==="value"&&(n.tag==="option"||n.tag==="select"&&n.dom.selectedIndex===-1&&n.dom===l()))&&!(n.tag==="input"&&r==="type"))n.dom[r]=null;else{var h=r.indexOf(":");h!==-1&&(r=r.slice(h+1)),a!==!1&&n.dom.removeAttribute(r==="className"?"class":r)}}function Fe(n,r){if("value"in r)if(r.value===null)n.dom.selectedIndex!==-1&&(n.dom.value=null);else{var a=""+r.value;(n.dom.value!==a||n.dom.selectedIndex===-1)&&(n.dom.value=a)}"selectedIndex"in r&&Et(n,"selectedIndex",null,r.selectedIndex,void 0)}function He(n,r,a,s){if(r&&r===a&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),a!=null){n.tag==="input"&&a.type!=null&&n.dom.setAttribute("type",a.type);var h=n.tag==="input"&&a.type==="file";for(var y in a)Et(n,y,r&&r[y],a[y],s,h)}var C;if(r!=null)for(var y in r)(C=r[y])!=null&&(a==null||a[y]==null)&&De(n,y,C,s)}function Ke(n,r){return r==="value"||r==="checked"||r==="selectedIndex"||r==="selected"&&n.dom===l()||n.tag==="option"&&n.dom.parentNode===e.activeElement}function Vt(n){return n==="oninit"||n==="oncreate"||n==="onupdate"||n==="onremove"||n==="onbeforeremove"||n==="onbeforeupdate"}function Wt(n,r,a){return a===void 0&&(n.tag.indexOf("-")>-1||n.attrs!=null&&n.attrs.is||r!=="href"&&r!=="list"&&r!=="form"&&r!=="width"&&r!=="height")&&r in n.dom}var Be=/[A-Z]/g;function Je(n){return"-"+n.toLowerCase()}function Ot(n){return n[0]==="-"&&n[1]==="-"?n:n==="cssFloat"?"float":n.replace(Be,Je)}function Qt(n,r,a){if(r!==a)if(a==null)n.style.cssText="";else if(typeof a!="object")n.style.cssText=a;else if(r==null||typeof r!="object"){n.style.cssText="";for(var s in a){var h=a[s];h!=null&&n.style.setProperty(Ot(s),String(h))}}else{for(var s in a){var h=a[s];h!=null&&(h=String(h))!==String(r[s])&&n.style.setProperty(Ot(s),h)}for(var s in r)r[s]!=null&&a[s]==null&&n.style.removeProperty(Ot(s))}}function At(){this._=i}At.prototype=Object.create(null),At.prototype.handleEvent=function(n){var r=this["on"+n.type],a;typeof r=="function"?a=r.call(n.currentTarget,n):typeof r.handleEvent=="function"&&r.handleEvent(n),this._&&n.redraw!==!1&&(0,this._)(),a===!1&&(n.preventDefault(),n.stopPropagation())};function Gt(n,r,a){if(n.events!=null){if(n.events._=i,n.events[r]===a)return;a!=null&&(typeof a=="function"||typeof a=="object")?(n.events[r]==null&&n.dom.addEventListener(r.slice(2),n.events,!1),n.events[r]=a):(n.events[r]!=null&&n.dom.removeEventListener(r.slice(2),n.events,!1),n.events[r]=void 0)}else a!=null&&(typeof a=="function"||typeof a=="object")&&(n.events=new At,n.dom.addEventListener(r.slice(2),n.events,!1),n.events[r]=a)}function Pt(n,r,a){typeof n.oninit=="function"&&f.call(n.oninit,r),typeof n.oncreate=="function"&&a.push(f.bind(n.oncreate,r))}function It(n,r,a){typeof n.onupdate=="function"&&a.push(f.bind(n.onupdate,r))}function Ve(n,r){do{if(n.attrs!=null&&typeof n.attrs.onbeforeupdate=="function"){var a=f.call(n.attrs.onbeforeupdate,n,r);if(a!==void 0&&!a)break}if(typeof n.tag!="string"&&typeof n.state.onbeforeupdate=="function"){var a=f.call(n.state.onbeforeupdate,n,r);if(a!==void 0&&!a)break}return!1}while(!1);return n.dom=r.dom,n.domSize=r.domSize,n.instance=r.instance,n.attrs=r.attrs,n.children=r.children,n.text=r.text,!0}var lt;return function(n,r,a){if(!n)throw new TypeError("DOM element being rendered to does not exist.");if(lt!=null&&n.contains(lt))throw new TypeError("Node is currently being rendered to and thus is locked.");var s=i,h=lt,y=[],C=l(),P=n.namespaceURI;lt=n,i=typeof a=="function"?a:void 0;try{n.vnodes==null&&(n.textContent=""),r=Lt.normalizeChildren(Array.isArray(r)?r:[r]),R(n,n.vnodes,r,y,null,P==="http://www.w3.org/1999/xhtml"?void 0:P),n.vnodes=r,C!=null&&l()!==C&&typeof C.focus=="function"&&C.focus();for(var b=0;b<y.length;b++)y[b]()}finally{i=s,lt=h}}},ke=cr(typeof window!="undefined"?window:null),Zt=tt,lr=function(t,e,i){var u=[],o=!1,c=-1;function f(){for(c=0;c<u.length;c+=2)try{t(u[c],Zt(u[c+1]),l)}catch(m){i.error(m)}c=-1}function l(){o||(o=!0,e(function(){o=!1,f()}))}l.sync=f;function p(m,w){if(w!=null&&w.view==null&&typeof w!="function")throw new TypeError("m.mount expects a component, not a vnode.");var d=u.indexOf(m);d>=0&&(u.splice(d,2),d<=c&&(c-=2),t(m,[])),w!=null&&(u.push(m,w),t(m,Zt(w),l))}return{mount:p,redraw:l}},sr=ke,Ut=lr(sr,typeof requestAnimationFrame!="undefined"?requestAnimationFrame:null,typeof console!="undefined"?console:null),Se=function(t){if(Object.prototype.toString.call(t)!=="[object Object]")return"";var e=[];for(var i in t)u(i,t[i]);return e.join("&");function u(o,c){if(Array.isArray(c))for(var f=0;f<c.length;f++)u(o+"["+f+"]",c[f]);else if(Object.prototype.toString.call(c)==="[object Object]")for(var f in c)u(o+"["+f+"]",c[f]);else e.push(encodeURIComponent(o)+(c!=null&&c!==""?"="+encodeURIComponent(c):""))}},pr=Tt,Ce=Object.assign||function(t,e){for(var i in e)pr.call(e,i)&&(t[i]=e[i])},hr=Se,gr=Ce,Dt=function(t,e){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(e==null)return t;var i=t.indexOf("?"),u=t.indexOf("#"),o=u<0?t.length:u,c=i<0?o:i,f=t.slice(0,c),l={};gr(l,e);var p=f.replace(/:([^\/\.-]+)(\.{3})?/g,function(T,q,R){return delete l[q],e[q]==null?T:R?e[q]:encodeURIComponent(String(e[q]))}),m=p.indexOf("?"),w=p.indexOf("#"),d=w<0?p.length:w,v=m<0?d:m,k=p.slice(0,v);i>=0&&(k+=t.slice(i,o)),m>=0&&(k+=(i<0?"?":"&")+p.slice(m,d));var S=hr(l);return S&&(k+=(i<0&&m<0?"?":"&")+S),u>=0&&(k+=t.slice(u)),w>=0&&(k+=(u<0?"":"&")+p.slice(w)),k},mr=Dt,te=Tt,yr=function(t,e,i){var u=0;function o(l){return new e(l)}o.prototype=e.prototype,o.__proto__=e;function c(l){return function(p,m){typeof p!="string"?(m=p,p=p.url):m==null&&(m={});var w=new e(function(S,T){l(mr(p,m.params),m,function(q){if(typeof m.type=="function")if(Array.isArray(q))for(var R=0;R<q.length;R++)q[R]=new m.type(q[R]);else q=new m.type(q);S(q)},T)});if(m.background===!0)return w;var d=0;function v(){--d===0&&typeof i=="function"&&i()}return k(w);function k(S){var T=S.then;return S.constructor=o,S.then=function(){d++;var q=T.apply(S,arguments);return q.then(v,function(R){if(v(),d===0)throw R}),k(q)},S}}}function f(l,p){for(var m in l.headers)if(te.call(l.headers,m)&&m.toLowerCase()===p)return!0;return!1}return{request:c(function(l,p,m,w){var d=p.method!=null?p.method.toUpperCase():"GET",v=p.body,k=(p.serialize==null||p.serialize===JSON.serialize)&&!(v instanceof t.FormData||v instanceof t.URLSearchParams),S=p.responseType||(typeof p.extract=="function"?"":"json"),T=new t.XMLHttpRequest,q=!1,R=!1,B=T,j,E=T.abort;T.abort=function(){q=!0,E.call(this)},T.open(d,l,p.async!==!1,typeof p.user=="string"?p.user:void 0,typeof p.password=="string"?p.password:void 0),k&&v!=null&&!f(p,"content-type")&&T.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof p.deserialize!="function"&&!f(p,"accept")&&T.setRequestHeader("Accept","application/json, text/*"),p.withCredentials&&(T.withCredentials=p.withCredentials),p.timeout&&(T.timeout=p.timeout),T.responseType=S;for(var _ in p.headers)te.call(p.headers,_)&&T.setRequestHeader(_,p.headers[_]);T.onreadystatechange=function(O){if(!q&&O.target.readyState===4)try{var z=O.target.status>=200&&O.target.status<300||O.target.status===304||/^file:\/\//i.test(l),x=O.target.response,A;if(S==="json"){if(!O.target.responseType&&typeof p.extract!="function")try{x=JSON.parse(O.target.responseText)}catch{x=null}}else(!S||S==="text")&&x==null&&(x=O.target.responseText);if(typeof p.extract=="function"?(x=p.extract(O.target,p),z=!0):typeof p.deserialize=="function"&&(x=p.deserialize(x)),z)m(x);else{var J=function(){try{A=O.target.responseText}catch{A=x}var G=new Error(A);G.code=O.target.status,G.response=x,w(G)};T.status===0?setTimeout(function(){R||J()}):J()}}catch(G){w(G)}},T.ontimeout=function(O){R=!0;var z=new Error("Request timed out");z.code=O.target.status,w(z)},typeof p.config=="function"&&(T=p.config(T,p,l)||T,T!==B&&(j=T.abort,T.abort=function(){q=!0,j.call(this)})),v==null?T.send():typeof p.serialize=="function"?T.send(p.serialize(v)):v instanceof t.FormData||v instanceof t.URLSearchParams?T.send(v):T.send(JSON.stringify(v))}),jsonp:c(function(l,p,m,w){var d=p.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+u++,v=t.document.createElement("script");t[d]=function(k){delete t[d],v.parentNode.removeChild(v),m(k)},v.onerror=function(){delete t[d],v.parentNode.removeChild(v),w(new Error("JSONP request failed"))},v.src=l+(l.indexOf("?")<0?"?":"&")+encodeURIComponent(p.callbackKey||"callback")+"="+encodeURIComponent(d),t.document.documentElement.appendChild(v)})}},wr=gt.exports,dr=Ut,br=yr(typeof window!="undefined"?window:null,wr,dr.redraw);function ee(t){try{return decodeURIComponent(t)}catch{return t}}var Ee=function(t){if(t===""||t==null)return{};t.charAt(0)==="?"&&(t=t.slice(1));for(var e=t.split("&"),i={},u={},o=0;o<e.length;o++){var c=e[o].split("="),f=ee(c[0]),l=c.length===2?ee(c[1]):"";l==="true"?l=!0:l==="false"&&(l=!1);var p=f.split(/\]\[?|\[/),m=u;f.indexOf("[")>-1&&p.pop();for(var w=0;w<p.length;w++){var d=p[w],v=p[w+1],k=v==""||!isNaN(parseInt(v,10));if(d===""){var f=p.slice(0,w).join();i[f]==null&&(i[f]=Array.isArray(m)?m.length:0),d=i[f]++}else if(d==="__proto__")break;if(w===p.length-1)m[d]=l;else{var S=Object.getOwnPropertyDescriptor(m,d);S!=null&&(S=S.value),S==null&&(m[d]=S=k?[]:{}),m=S}}}return u},vr=Ee,Ft=function(t){var e=t.indexOf("?"),i=t.indexOf("#"),u=i<0?t.length:i,o=e<0?u:e,c=t.slice(0,o).replace(/\/{2,}/g,"/");return c?(c[0]!=="/"&&(c="/"+c),c.length>1&&c[c.length-1]==="/"&&(c=c.slice(0,-1))):c="/",{path:c,params:e<0?{}:vr(t.slice(e+1,u))}},Tr=Ft,kr=function(t){var e=Tr(t),i=Object.keys(e.params),u=[],o=new RegExp("^"+e.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(c,f,l){return f==null?"\\"+c:(u.push({k:f,r:l==="..."}),l==="..."?"(.*)":l==="."?"([^/]+)\\.":"([^/]+)"+(l||""))})+"$");return function(c){for(var f=0;f<i.length;f++)if(e.params[i[f]]!==c.params[i[f]])return!1;if(!u.length)return o.test(c.path);var l=o.exec(c.path);if(l==null)return!1;for(var f=0;f<u.length;f++)c.params[u[f].k]=u[f].r?l[f+1]:decodeURIComponent(l[f+1]);return!0}},re=Tt,ne=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$"),Oe=function(t,e){var i={};if(e!=null)for(var u in t)re.call(t,u)&&!ne.test(u)&&e.indexOf(u)<0&&(i[u]=t[u]);else for(var u in t)re.call(t,u)&&!ne.test(u)&&(i[u]=t[u]);return i},Sr=tt,Cr=ve,Er=gt.exports,ie=Dt,ae=Ft,Or=kr,Ar=Ce,Pr=Oe,Mt={};function Ir(t){try{return decodeURIComponent(t)}catch{return t}}var xr=function(t,e){var i=t==null?null:typeof t.setImmediate=="function"?t.setImmediate:t.setTimeout,u=Er.resolve(),o=!1,c=!1,f=0,l,p,m=Mt,w,d,v,k,S={onbeforeupdate:function(){return f=f?2:1,!(!f||Mt===m)},onremove:function(){t.removeEventListener("popstate",R,!1),t.removeEventListener("hashchange",q,!1)},view:function(){if(!(!f||Mt===m)){var E=[Sr(w,d.key,d)];return m&&(E=m.render(E[0])),E}}},T=j.SKIP={};function q(){o=!1;var E=t.location.hash;j.prefix[0]!=="#"&&(E=t.location.search+E,j.prefix[0]!=="?"&&(E=t.location.pathname+E,E[0]!=="/"&&(E="/"+E)));var _=E.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,Ir).slice(j.prefix.length),O=ae(_);Ar(O.params,t.history.state);function z(A){console.error(A),B(p,null,{replace:!0})}x(0);function x(A){for(;A<l.length;A++)if(l[A].check(O)){var J=l[A].component,G=l[A].route,at=J,et=k=function(Y){if(et===k){if(Y===T)return x(A+1);w=Y!=null&&(typeof Y.view=="function"||typeof Y=="function")?Y:"div",d=O.params,v=_,k=null,m=J.render?J:null,f===2?e.redraw():(f=2,e.redraw.sync())}};J.view||typeof J=="function"?(J={},et(at)):J.onmatch?u.then(function(){return J.onmatch(O.params,_,G)}).then(et,_===p?null:z):et("div");return}if(_===p)throw new Error("Could not resolve default route "+p+".");B(p,null,{replace:!0})}}function R(){o||(o=!0,i(q))}function B(E,_,O){if(E=ie(E,_),c){R();var z=O?O.state:null,x=O?O.title:null;O&&O.replace?t.history.replaceState(z,x,j.prefix+E):t.history.pushState(z,x,j.prefix+E)}else t.location.href=j.prefix+E}function j(E,_,O){if(!E)throw new TypeError("DOM element being rendered to does not exist.");if(l=Object.keys(O).map(function(x){if(x[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(x))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:x,component:O[x],check:Or(x)}}),p=_,_!=null){var z=ae(_);if(!l.some(function(x){return x.check(z)}))throw new ReferenceError("Default route doesn't match any known routes.")}typeof t.history.pushState=="function"?t.addEventListener("popstate",R,!1):j.prefix[0]==="#"&&t.addEventListener("hashchange",q,!1),c=!0,e.mount(E,S),q()}return j.set=function(E,_,O){k!=null&&(O=O||{},O.replace=!0),k=null,B(E,_,O)},j.get=function(){return v},j.prefix="#!",j.Link={view:function(E){var _=Cr(E.attrs.selector||"a",Pr(E.attrs,["options","params","selector","onclick"]),E.children),O,z,x;return(_.attrs.disabled=Boolean(_.attrs.disabled))?(_.attrs.href=null,_.attrs["aria-disabled"]="true"):(O=E.attrs.options,z=E.attrs.onclick,x=ie(_.attrs.href,E.attrs.params),_.attrs.href=j.prefix+x,_.attrs.onclick=function(A){var J;typeof z=="function"?J=z.call(A.currentTarget,A):z==null||typeof z!="object"||typeof z.handleEvent=="function"&&z.handleEvent(A),J!==!1&&!A.defaultPrevented&&(A.button===0||A.which===0||A.which===1)&&(!A.currentTarget.target||A.currentTarget.target==="_self")&&!A.ctrlKey&&!A.metaKey&&!A.shiftKey&&!A.altKey&&(A.preventDefault(),A.redraw=!1,j.set(x,null,O))}),_}},j.param=function(E){return d&&E!=null?d[E]:d},j},jr=Ut,Nr=xr(typeof window!="undefined"?window:null,jr),kt=fr,Ae=br,Pe=Ut,K=function(){return kt.apply(this,arguments)};K.m=kt;K.trust=kt.trust;K.fragment=kt.fragment;K.Fragment="[";K.mount=Pe.mount;K.route=Nr;K.render=ke;K.redraw=Pe.redraw;K.request=Ae.request;K.jsonp=Ae.jsonp;K.parseQueryString=Ee;K.buildQueryString=Se;K.parsePathname=Ft;K.buildPathname=Dt;K.vnode=tt;K.PromisePolyfill=Te;K.censor=Oe;var g=K;function L(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}function X(t){return function e(i){return arguments.length===0||L(i)?e:t.apply(this,arguments)}}function rt(t){return function e(i,u){switch(arguments.length){case 0:return e;case 1:return L(i)?e:X(function(o){return t(i,o)});default:return L(i)&&L(u)?e:L(i)?X(function(o){return t(o,u)}):L(u)?X(function(o){return t(i,o)}):t(i,u)}}}function qr(t){return function e(i,u,o){switch(arguments.length){case 0:return e;case 1:return L(i)?e:rt(function(c,f){return t(i,c,f)});case 2:return L(i)&&L(u)?e:L(i)?rt(function(c,f){return t(c,u,f)}):L(u)?rt(function(c,f){return t(i,c,f)}):X(function(c){return t(i,u,c)});default:return L(i)&&L(u)&&L(o)?e:L(i)&&L(u)?rt(function(c,f){return t(c,f,o)}):L(i)&&L(o)?rt(function(c,f){return t(c,u,f)}):L(u)&&L(o)?rt(function(c,f){return t(i,c,f)}):L(i)?X(function(c){return t(c,u,o)}):L(u)?X(function(c){return t(i,c,o)}):L(o)?X(function(c){return t(i,u,c)}):t(i,u,o)}}}var _r=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function $r(t){return Object.prototype.toString.call(t)==="[object String]"}function vt(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var ue=Object.prototype.toString,Lr=function(){return ue.call(arguments)==="[object Arguments]"?function(e){return ue.call(e)==="[object Arguments]"}:function(e){return vt("callee",e)}}(),Ie=Lr,Mr=!{toString:null}.propertyIsEnumerable("toString"),oe=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],fe=function(){return arguments.propertyIsEnumerable("length")}(),Rr=function(e,i){for(var u=0;u<e.length;){if(e[u]===i)return!0;u+=1}return!1},zr=X(typeof Object.keys=="function"&&!fe?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var i,u,o=[],c=fe&&Ie(e);for(i in e)vt(i,e)&&(!c||i!=="length")&&(o[o.length]=i);if(Mr)for(u=oe.length-1;u>=0;)i=oe[u],vt(i,e)&&!Rr(o,i)&&(o[o.length]=i),u-=1;return o}),ce=zr,Ur=X(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),le=Ur;function se(t){for(var e=[],i;!(i=t.next()).done;)e.push(i.value);return e}function pe(t,e,i){for(var u=0,o=i.length;u<o;){if(t(e,i[u]))return!0;u+=1}return!1}function Dr(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}function Fr(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var Rt=typeof Object.is=="function"?Object.is:Fr;function he(t,e,i,u){var o=se(t),c=se(e);function f(l,p){return Ht(l,p,i.slice(),u.slice())}return!pe(function(l,p){return!pe(f,p,l)},c,o)}function Ht(t,e,i,u){if(Rt(t,e))return!0;var o=le(t);if(o!==le(e)||t==null||e==null)return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(o){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&Dr(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&Rt(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!Rt(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var c=i.length-1;c>=0;){if(i[c]===t)return u[c]===e;c-=1}switch(o){case"Map":return t.size!==e.size?!1:he(t.entries(),e.entries(),i.concat([t]),u.concat([e]));case"Set":return t.size!==e.size?!1:he(t.values(),e.values(),i.concat([t]),u.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var f=ce(t);if(f.length!==ce(e).length)return!1;var l=i.concat([t]),p=u.concat([e]);for(c=f.length-1;c>=0;){var m=f[c];if(!(vt(m,e)&&Ht(e[m],t[m],l,p)))return!1;c-=1}return!0}var Hr=rt(function(e,i){return Ht(e,i,[],[])}),xe=Hr;function Kr(t){return Object.prototype.toString.call(t)==="[object Object]"}var Br=X(function(e){return e!=null&&typeof e["fantasy-land/empty"]=="function"?e["fantasy-land/empty"]():e!=null&&e.constructor!=null&&typeof e.constructor["fantasy-land/empty"]=="function"?e.constructor["fantasy-land/empty"]():e!=null&&typeof e.empty=="function"?e.empty():e!=null&&e.constructor!=null&&typeof e.constructor.empty=="function"?e.constructor.empty():_r(e)?[]:$r(e)?"":Kr(e)?{}:Ie(e)?function(){return arguments}():void 0}),Jr=Br,Vr=X(function(e){return e!=null&&xe(e,Jr(e))}),ge=Vr,Wr=qr(function(e,i,u){return xe(i,u[e])}),Z=Wr,je=typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout,Qr=I;function I(t,e){this.fork=t,this.cleanup=e||function(){}}I.prototype.of=function(e){return new I(function(i,u){return u(e)})};I.of=I.prototype.of;I.prototype.rejected=function(e){return new I(function(i){return i(e)})};I.rejected=I.prototype.rejected;I.prototype.map=function(e){var i=this.fork,u=this.cleanup;return new I(function(o,c){return i(function(f){return o(f)},function(f){return c(e(f))})},u)};I.prototype.chain=function(e){var i=this.fork,u=this.cleanup;return new I(function(o,c){return i(function(f){return o(f)},function(f){return e(f).fork(o,c)})},u)};I.prototype.ap=function(e){var i=this.fork,u=e.fork,o=this.cleanup,c=e.cleanup;function f(l){o(l[0]),c(l[1])}return new I(function(l,p){var m,w=!1,d,v=!1,k=!1,S,T=i(B,R(function(j){w=!0,m=j})),q=u(B,R(function(j){v=!0,d=j}));function R(j){return function(E){if(!k)return j(E),w&&v?(je(function(){f(S)}),p(m(d))):E}}function B(j){if(!k)return k=!0,l(j)}return S=[T,q]},f)};I.prototype.concat=function(e){var i=this.fork,u=e.fork,o=this.cleanup,c=e.cleanup;function f(l){o(l[0]),c(l[1])}return new I(function(l,p){var m=!1,w,d=i(k(l),k(p)),v=u(k(l),k(p));return w=[d,v];function k(S){return function(T){if(!m)return m=!0,je(function(){f(w)}),S(T)}}},f)};I.empty=function(){return new I(function(){})};I.prototype.empty=I.empty;I.prototype.toString=function(){return"Task"};I.prototype.orElse=function(e){var i=this.fork,u=this.cleanup;return new I(function(o,c){return i(function(f){return e(f).fork(o,c)},function(f){return c(f)})},u)};I.prototype.fold=function(e,i){var u=this.fork,o=this.cleanup;return new I(function(c,f){return u(function(l){return f(e(l))},function(l){return f(i(l))})},o)};I.prototype.cata=function(e){return this.fold(e.Rejected,e.Resolved)};I.prototype.swap=function(){var e=this.fork,i=this.cleanup;return new I(function(u,o){return e(function(c){return o(c)},function(c){return u(c)})},i)};I.prototype.bimap=function(e,i){var u=this.fork,o=this.cleanup;return new I(function(c,f){return u(function(l){return c(e(l))},function(l){return f(i(l))})},o)};I.prototype.rejectedMap=function(e){var i=this.fork,u=this.cleanup;return new I(function(o,c){return i(function(f){return o(e(f))},function(f){return c(f)})},u)};var Ne=Qr;const Gr="https://shopper.deno.dev/",Xr={"Content-Type":"application/json"},Yr=t=>e=>i=>e(JSON.parse(JSON.stringify(i))),Zr=t=>e=>i=>e(i),bt=t=>e=>i=>u=>new Ne((o,c)=>g.request({method:t,url:Gr+i,headers:Xr,body:u,withCredentials:!1}).then(Zr()(c),Yr()(o))),tn={getTask:(t,e)=>bt("GET")(t)(e)(),postTask:(t,e,i)=>bt("POST")(t)(e)(i),putTask:(t,e,i)=>bt("PUT")(t)(e)(i),deleteTask:(t,e)=>bt("DELETE")(t)(e)()},qe=()=>"xxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,i=t=="x"?e:e&3|8;return i.toString(16)}),_e=t=>e=>(console.log(t,e),e);window.log=_e;const en=["Of Them","Boxe(s)","Can(s)","gram(s)","kilogram(s)","pound(s)","liter(s)","mliter(s)","ounce(s)"],rn=t=>{var e;return t.stores.find(Z("id",(e=t.currentStore)==null?void 0:e.id))||t.stores[0]},it=t=>{const e=f=>f.http.getTask(f,"stores"),i=f=>f.http.getTask(f,"cats"),u=f=>f.http.getTask(f,"items"),o=({stores:f,cats:l,items:p})=>{let m=l.map(w=>(w.items=p.filter(Z("catId",w.id)).sort((d,v)=>d.order-v.order).reverse(),w)).sort((w,d)=>w.order-d.order);return{cats:m,stores:f.map(w=>(w.cats=m.filter(Z("storeId",w.id)).sort((d,v)=>d.order-v.order),w)),items:p}},c=({stores:f,cats:l,items:p})=>{t.stores=f,t.cats=l,t.items=p.reverse(),t.currentStore=rn(t)};Ne.of(f=>l=>p=>o({stores:f,cats:l,items:p})).ap(e(t)).ap(i(t)).ap(u(t)).fork(_e("error"),c)},nn=({catId:t,title:e,notes:i,quantity:u,unit:o,price:c,order:f})=>({id:qe(),title:e,notes:i,catId:t,order:f,quantity:u,unit:o,price:c,notes:i,purchased:!1}),an=(t,e=0)=>({title:t,id:qe(),order:e}),mt={state:{},http:tn,settings:{},state:{dragging:{item:"",swapItem:""},catIds:[],items:[],showModal:!1,modalContent:null},stores:[],cats:[],items:[],currentStore:null},un=(t,e)=>{let i=an(e.title);const u=log("error"),o=c=>{e.title="",t.state.showModal=!1,t.state.modalContent=null,it(t)};t.http.postTask(t,"stores",i).fork(u,o)},$e=()=>{const t={title:""};return{view:({attrs:{mdl:e}})=>g("form.w3-container.w3-card.w3-white.w3-animate-zoom",{onsubmit:i=>i.preventDefault()},g("div.w3-section",g("label",g("b","Store Title")),g("input.w3-input.w3-border-bottom",{oncreate:({dom:i})=>{i.select(),i.focus()},type:"text",value:t.title,oninput:i=>t.title=i.target.value})),g("button.w3-button.w3-block.w3-orange.w3-section.w3-padding",{onclick:()=>un(e,t)},"add"))}},on=(t,e)=>t.cats.find(Z("id",e)).items.length,fn=(t,e,i)=>{const{catId:u,title:o,notes:c,order:f,quantity:l,unit:p,price:m,id:w}=e;let d=i?{catId:u,title:o,notes:c,order:f,quantity:l,unit:p,price:m,id:w}:nn({catId:u,title:o,notes:c,order:on(t,u),quantity:l,unit:p,price:m});const v=S=>{e={catId:u,title:"",notes:"",order:0,quantity:"",unit:"",price:0},it(t),t.state.showModal=!1,t.state.modalContent=null};return((S,T)=>i?S.http.postTask(S,"items",T):S.http.putTask(S,`items/${T.id}`,T))(t,d).fork(log("error"),v)},Kt=({attrs:{mdl:t,catId:e,item:i,isEdit:u}})=>{const o={catId:e,catTitle:"",title:"",notes:"",order:0,quantity:0,unit:"",price:0};return e&&(o.catTitle=t.cats.find(Z("id",e)).title),u&&(o.catId=i.catId,o.title=i.title,o.notes=i.notes,o.order=i.order,o.quantity=i.quantity,o.unit=i.unit,o.price=i.price,o.id=i.id),{view:({attrs:{mdl:c}})=>{var f;return g("form.w3-container.w3-card.w3-white.w3-animate-zoom",{onsubmit:l=>l.preventDefault()},g("div.w3-section",g("label",g("b","Title")),g("input.w3-input.w3-border-bottom",{oncreate:({dom:l})=>{l.select(),l.focus()},type:"text",value:o.title,oninput:l=>o.title=l.target.value})),g("div.w3-section",g("label",g("b","Category")),g("select.w3-input.w3-border-bottom",{value:((f=c.cats.find(Z("id",o.catId)))==null?void 0:f.title)||"",onchange:l=>{o.catTitle=l.target.value,o.catId=c.cats.find(Z("title",o.catTitle)).id}},c.cats.map(l=>g(`option#${l.id}`,l.title)))),g("div.w3-section",g("label",g("b","Quantity")),g("input.w3-input.w3-border-bottom",{type:"number",value:o.quantity,oninput:l=>o.quantity=l.target.value})),g("div.w3-section",g("label",g("b","Unit")),g("select.w3-input.w3-border-bottom",{value:o.unit,onchange:l=>o.unit=l.target.value},en.map(l=>g("option",l)))),g("div.w3-section",g("label",g("b","Price")),g("input.w3-input.w3-border-bottom",{type:"number",value:o.price,oninput:l=>o.price=l.target.value})),g("div.w3-section",g("label",g("b","Notes")),g("textarea.w3-input.w3-border-bottom",{oninput:l=>o.notes=l.target.value},o.notes)),g("button.w3-button.w3-block.w3-orange.w3-section.w3-padding",{onclick:()=>fn(c,o,u)},"add"))}}},ht=new Set,cn=(t,e)=>{t.http.deleteTask(t,`stores/${e}`).fork(log("error deleteing"),()=>it(t))},ln=(t,e)=>{t.http.deleteTask(t,`cats/${e}`).fork(log("error deleteing"),()=>it(t))},sn=(t,e)=>Promise.resolve(t.setCat(e)),me=(t,e,i)=>Promise.resolve(t.currentStore=i).then(()=>e.toggleSideBar(e)),pn=()=>({view:({attrs:{mdl:t,state:e}})=>g(".w3-sidebar#sidebar.w3-bar-block.w3-collapse.w3-card.w3-animate-left",{style:{width:t.settings.profile=="desktop"?"300px":"90%",display:e.sidebar.open?"block":"none"}},t.settings.profile!="desktop"&&g("button.w3-bar-item.w3-button.w3-large",{onclick:()=>e.toggleSideBar(e)},"Close "),g("button.w3-button.w3-orange",{onclick:()=>{t.state.modalContent=g($e,{mdl:t}),t.state.showModal=!0}},"New Store"),t.stores.map((i,u)=>g(".w3-right-align.w3-row",{key:i.id},g("button.w3-button.w3-left-align.w3-col",{class:t.currentStore.id==i.id?"w3-leftbar w3-border-orange w3-border-10":"",onclick:o=>{o.stopPropagation(),me(t,e,i)}},g(".w3-left-align.w3-col.s4",g("button.pointer.w3-badge.w3-pink.w3-border-0.w3-circle.w3-hover-red.w3-left-align",{onclick:o=>{o.stopPropagation(),cn(t,i.id)}},"x")),g("label.w3-label.w3-col.s4.w3-left-align.pointer",i.title),!ge(i.cats)&&g(".w3-col.s4.w3-right-align",{onclick:o=>{o.stopPropagation(),ht.has(i.id)?ht.delete(i.id):ht.add(i.id)}},g("i.w3-btn.w3-circle",ht.has(i.id)?"V":">"))),!ge(i.cats)&&g("ul.w3-list",{class:ht.has(i.id)?"w3-show":"w3-hide",id:i.id},i.cats.map((o,c)=>{var f;return g(".w3-list-item.pointer.w3-row",{key:o.id,onclick:()=>{sn(e,o.id).then(()=>me(t,e,i))}},g("button.pointer.w3-badge.w3-pink.w3-border-0.w3-circle.w3-hover-red.w3-left-align",{onclick:l=>{l.stopPropagation(),ln(t,o.id)}},"x"),g("label.w3-col s4",o.title),g(".w3-right-align.w3-col s4",g(".w3-tag w3-orange",(f=o.issues)==null?void 0:f.length)))})))))}),hn=()=>({view:({attrs:{mdl:t,state:e}})=>g("nav.w3-bar.w3-container.w3-padding.w3-fixed",g("button.w3-button.w3-hide-large.w3-border",{onclick:()=>e.toggleSideBar(e)},"MENU"),t.currentStore&&g(".w3-row w3-section",g(".m6 w3-left",g("h1.w3-title w3-col",t.currentStore.title)),g(".m3 w3-right",g("button. w3-button  w3-border w3-large w3-col",{onclick:()=>{t.state.modalContent=g(Kt,{mdl:t,catId:null}),t.state.showModal=!0}},"Add Item"))))}),gn=(t,e)=>{console.log(t,e),t.http.deleteTask(t,`items/${e}`).fork(log("err"),()=>it(t))},mn=(t,e)=>i=>{i.preventDefault();const u=()=>{it(t),e.highlight=!1,t.state.dragging.item=null,t.state.dragging.swapItem=null};return t.state.dragging.item.order=t.state.dragging.swapItem.order,t.http.putTask(t,`items/${t.state.dragging.item.id}`,t.state.dragging.item).fork(log("error"),u),t},yn=(t,e,i)=>u=>{e.highlight=!0,t.state.dragging.swapItem=i,u.preventDefault()},wn=(t,e,i)=>u=>(e.highlight=!0,t.state.dragging.swapItem=i,u.preventDefault(),!0),dn=t=>e=>(t.highlight=!1,e.preventDefault(),!0),bn=(t,e,i)=>u=>(e.highlight=!1,t.state.dragging.swapItem=i,u.preventDefault(),!0),vn=()=>{const t={highlight:!1,draggable:!1};return{view:({attrs:{item:e,mdl:i}})=>g("li.w3-list-item.w3-leftbar.w3-hover-border-orange.dragster-block",{id:e.id,draggable:!0,class:t.highlight?"w3-orange":"",ondrop:mn(i,t),ondragover:yn(i,t,e),ondragenter:wn(i,t,e),ondragend:bn(i,t,e),ondragleave:dn(t),ondragstart:()=>i.state.dragging.item=e},g(".w3-bar",e.img&&g("img.w3-bar-item.w3-circle",{src:e.img,style:{width:"85px"}}),g("p.w3-bar-item",e.title),g("button.w3-button w3-border.w3-right",{onclick:()=>gn(i,e.id)},"Delete"),g("button.w3-button w3-border.w3-right",{onmousedown:()=>t.draggable=!0,ontouchstart:()=>t.draggable=!0,onmouseup:()=>t.draggable=!1,ontouchend:()=>t.draggable=!1},"Move"),g("button.w3-button w3-border.w3-right",{onclick:()=>{i.state.showModal=!0,i.state.modalContent=g(Kt,{catId:e.catId,mdl:i,item:e,isEdit:!0})}},"Edit")),g(".w3-bar",e.quantity>1&&g("p.w3-p",`${e.quantity} ${e.unit}`)))}},Tn=({attrs:{mdl:t,cat:e}})=>{const i={catId:e.id,title:e.title,items:e.items,isSelected:!1,togglePinSection:{onclick:()=>i.isSelected=!i.isSelected}};return{view:({attrs:{cat:u,mdl:o,key:c}})=>g("section.w3-section.w3-border-left.",{key:c,id:u.id},g(".w3-panel.w3-bar",{style:{position:"-webkit-sticky",position:"sticky",top:0,backgroundColor:"white"}},g("h3.w3-left",u.title),g("button.w3-button w3-border w3-padding.w3-right",{onclick:()=>{o.state.modalContent=g(Kt,{mdl:o,catId:u.id}),o.state.showModal=!0}},"Add Item")),g(".w3-ul w3-paddings w3-border-top.dragster-region",u.items.map((f,l)=>g(vn,{key:f.id,item:f,mdl:o}))))}},kn=()=>({view:({attrs:{mdl:t,state:e}})=>g("section.w3-section.w3-row w3-ul. w3-padding-row",{onupdate:({dom:i})=>{e.setCat()&&(Array.from(i.children).find(Z("id",e.setCat())).scrollIntoView({behavior:"smooth",block:"start",inline:"center"}),e.setCat(null))},style:{height:"80dvh",overflow:"auto"}},t.currentStore?t.currentStore.cats.map((i,u)=>g(Tn,{key:u,cat:i,mdl:t,state:e})):g("section.w3-section",g("button.w3-border-0 w3-button w3-panel.w3-display-middle w3-light-grey w3-col-1",{onclick:()=>{t.state.modalContent=g($e,{mdl:t}),t.state.showModal=!0}},"Create a Store to Begin")))}),Sn=({attrs:{mdl:t}})=>({view:()=>g(".w3-modal#modal",{onclick:e=>{e.target.id=="modal"&&(t.state.showModal=!1,t.state.modalContent=null)},style:{display:t.state.showModal?"block":"none"}},g("modal.w3-modal-content",g(".w3-container",t.state.modalContent)))});M.SKIP={};M.lift=On;M.scan=Cn;M.merge=Le;M.combine=St;M.scanMerge=En;M["fantasy-land/of"]=M;var ye=!1;Object.defineProperty(M,"HALT",{get:function(){return ye||console.log("HALT is deprecated and has been renamed to SKIP"),ye=!0,M.SKIP}});function M(t){var e=[],i=[];function u(f){return arguments.length&&f!==M.SKIP&&(t=f,we(u)&&(u.changing(),u.state="active",e.forEach(function(l,p){l(i[p](t))}))),t}u.constructor=M,u.state=arguments.length&&t!==M.SKIP?"active":"pending",u.parents=[],u.changing=function(){we(u)&&(u.state="changing"),e.forEach(function(f){f.changing()})},u.map=function(f,l){var p=u.state==="active"&&l!==M.SKIP?M(f(t)):M();return p.parents.push(u),e.push(p),i.push(f),p};var o;function c(){return o=M(),o.map(function(f){return f===!0&&(u.parents.forEach(function(l){l.unregisterChild(u)}),u.state="ended",u.parents.length=e.length=i.length=0),f}),o}return u.toJSON=function(){return t!=null&&typeof t.toJSON=="function"?t.toJSON():t},u["fantasy-land/map"]=u.map,u["fantasy-land/ap"]=function(f){return St(function(l,p){return l()(p())},[f,u])},u.unregisterChild=function(f){var l=e.indexOf(f);l!==-1&&(e.splice(l,1),i.splice(l,1))},Object.defineProperty(u,"end",{get:function(){return o||c()}}),u}function St(t,e){var i=e.every(function(l){if(l.constructor!==M)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return l.state==="active"}),u=i?M(t.apply(null,e.concat([e]))):M(),o=[],c=e.map(function(l){return l.map(function(p){return o.push(l),(i||e.every(function(m){return m.state!=="pending"}))&&(i=!0,u(t.apply(null,e.concat([o]))),o=[]),p},M.SKIP)}),f=u.end.map(function(l){l===!0&&(c.forEach(function(p){p.end(!0)}),f.end(!0))});return u}function Le(t){return St(function(){return t.map(function(e){return e()})},t)}function Cn(t,e,i){var u=i.map(function(o){var c=t(e,o);return c!==M.SKIP&&(e=c),c});return u(e),u}function En(t,e){var i=t.map(function(o){return o[0]}),u=St(function(){var o=arguments[arguments.length-1];return i.forEach(function(c,f){o.indexOf(c)>-1&&(e=t[f][1](e,c()))}),e},i);return u(e),u}function On(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Le(e).map(function(i){return t.apply(void 0,i)})}function we(t){return t.state==="pending"||t.state==="active"||t.state==="changing"}const An=t=>({maxHeight:"100dvh",overflow:"hidden",marginLeft:t.settings.profile=="desktop"?"300px":"0"}),Pn=t=>{const e={sidebar:{open:!1},setCat:M(null),toggleSideBar:i=>i.sidebar.open=!i.sidebar.open};return it(t),{view:()=>g("page.w3-theme",g(Sn,{mdl:t}),g(pn,{mdl:t,state:e}),g("section.#main",{style:An(t)},g(hn,{mdl:t,state:e}),g(kn,{mdl:t,state:e})))}},In=document.body;let Me=window.innerWidth;"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(t=>{console.log("\u2699\uFE0F SW registered: ",t)}).catch(t=>{console.log("\u{1F9DF} SW registration failed: ",t)})});const Re=t=>t<=411?"phone":t<=990?"tablet":"desktop",ze=t=>{const e=window.innerWidth;if(t!==e){t=e;var i=mt.settings.profile;mt.settings.profile=Re(e),i!=mt.settings.profile&&g.redraw()}return requestAnimationFrame(ze)};mt.settings.profile=Re(Me);ze(Me);g.mount(In,Pn(mt));
