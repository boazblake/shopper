const en=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function i(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=i(s);fetch(s.href,l)}};en();var we=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Oe(e,t,i,o,s,l){return{tag:e,key:t,attrs:i,children:o,text:s,dom:l,domSize:void 0,state:void 0,events:void 0,instance:void 0}}Oe.normalize=function(e){return Array.isArray(e)?Oe("[",void 0,void 0,Oe.normalizeChildren(e),void 0,void 0):e==null||typeof e=="boolean"?null:typeof e=="object"?e:Oe("#",void 0,void 0,String(e),void 0,void 0)};Oe.normalizeChildren=function(e){var t=[];if(e.length){for(var i=e[0]!=null&&e[0].key!=null,o=1;o<e.length;o++)if((e[o]!=null&&e[o].key!=null)!==i)throw new TypeError(i&&(e[o]!=null||typeof e[o]=="boolean")?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var o=0;o<e.length;o++)t[o]=Oe.normalize(e[o])}return t};var ve=Oe,tn=ve,Dt=function(){var e=arguments[this],t=this+1,i;if(e==null?e={}:(typeof e!="object"||e.tag!=null||Array.isArray(e))&&(e={},t=this),arguments.length===t+1)i=arguments[t],Array.isArray(i)||(i=[i]);else for(i=[];t<arguments.length;)i.push(arguments[t++]);return tn("",e.key,e,i)},Ye={}.hasOwnProperty,nn=ve,rn=Dt,Ne=Ye,an=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,_t={};function ct(e){for(var t in e)if(Ne.call(e,t))return!1;return!0}function on(e){for(var t,i="div",o=[],s={};t=an.exec(e);){var l=t[1],u=t[2];if(l===""&&u!=="")i=u;else if(l==="#")s.id=u;else if(l===".")o.push(u);else if(t[3][0]==="["){var c=t[6];c&&(c=c.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),t[4]==="class"?o.push(c):s[t[4]]=c===""?c:c||!0}}return o.length>0&&(s.className=o.join(" ")),_t[e]={tag:i,attrs:s}}function sn(e,t){var i=t.attrs,o=Ne.call(i,"class"),s=o?i.class:i.className;if(t.tag=e.tag,t.attrs={},!ct(e.attrs)&&!ct(i)){var l={};for(var u in i)Ne.call(i,u)&&(l[u]=i[u]);i=l}for(var u in e.attrs)Ne.call(e.attrs,u)&&u!=="className"&&!Ne.call(i,u)&&(i[u]=e.attrs[u]);(s!=null||e.attrs.className!=null)&&(i.className=s!=null?e.attrs.className!=null?String(e.attrs.className)+" "+String(s):s:e.attrs.className!=null?e.attrs.className:null),o&&(i.class=null);for(var u in i)if(Ne.call(i,u)&&u!=="key"){t.attrs=i;break}return t}function un(e){if(e==null||typeof e!="string"&&typeof e!="function"&&typeof e.view!="function")throw Error("The selector must be either a string or a component.");var t=rn.apply(1,arguments);return typeof e=="string"&&(t.children=nn.normalizeChildren(t.children),e!=="[")?sn(_t[e]||on(e),t):(t.tag=e,t)}var It=un,ln=ve,cn=function(e){return e==null&&(e=""),ln("<",void 0,void 0,e,void 0,void 0)},fn=ve,pn=Dt,hn=function(){var e=pn.apply(0,arguments);return e.tag="[",e.children=fn.normalizeChildren(e.children),e},tt=It;tt.trust=cn;tt.fragment=hn;var dn=tt,Fe={exports:{}},ne=function(e){if(!(this instanceof ne))throw new Error("Promise must be called with 'new'.");if(typeof e!="function")throw new TypeError("executor must be a function.");var t=this,i=[],o=[],s=g(i,!0),l=g(o,!1),u=t._instance={resolvers:i,rejectors:o},c=typeof setImmediate=="function"?setImmediate:setTimeout;function g(C,T){return function k(D){var _;try{if(T&&D!=null&&(typeof D=="object"||typeof D=="function")&&typeof(_=D.then)=="function"){if(D===t)throw new TypeError("Promise can't be resolved with itself.");b(_.bind(D))}else c(function(){!T&&C.length===0&&console.error("Possible unhandled promise rejection:",D);for(var A=0;A<C.length;A++)C[A](D);i.length=0,o.length=0,u.state=T,u.retry=function(){k(D)}})}catch(A){l(A)}}}function b(C){var T=0;function k(_){return function(A){T++>0||_(A)}}var D=k(l);try{C(k(s),D)}catch(_){D(_)}}b(e)};ne.prototype.then=function(e,t){var i=this,o=i._instance;function s(g,b,C,T){b.push(function(k){if(typeof g!="function")C(k);else try{l(g(k))}catch(D){u&&u(D)}}),typeof o.retry=="function"&&T===o.state&&o.retry()}var l,u,c=new ne(function(g,b){l=g,u=b});return s(e,o.resolvers,l,!0),s(t,o.rejectors,u,!1),c};ne.prototype.catch=function(e){return this.then(null,e)};ne.prototype.finally=function(e){return this.then(function(t){return ne.resolve(e()).then(function(){return t})},function(t){return ne.resolve(e()).then(function(){return ne.reject(t)})})};ne.resolve=function(e){return e instanceof ne?e:new ne(function(t){t(e)})};ne.reject=function(e){return new ne(function(t,i){i(e)})};ne.all=function(e){return new ne(function(t,i){var o=e.length,s=0,l=[];if(e.length===0)t([]);else for(var u=0;u<e.length;u++)(function(c){function g(b){s++,l[c]=b,s===o&&t(l)}e[c]!=null&&(typeof e[c]=="object"||typeof e[c]=="function")&&typeof e[c].then=="function"?e[c].then(g,i):g(e[c])})(u)})};ne.race=function(e){return new ne(function(t,i){for(var o=0;o<e.length;o++)e[o].then(t,i)})};var Rt=ne,ze=Rt;typeof window!="undefined"?(typeof window.Promise=="undefined"?window.Promise=ze:window.Promise.prototype.finally||(window.Promise.prototype.finally=ze.prototype.finally),Fe.exports=window.Promise):typeof we!="undefined"?(typeof we.Promise=="undefined"?we.Promise=ze:we.Promise.prototype.finally||(we.Promise.prototype.finally=ze.prototype.finally),Fe.exports=we.Promise):Fe.exports=ze;var Qe=ve,gn=function(e){var t=e&&e.document,i,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function s(r){return r.attrs&&r.attrs.xmlns||o[r.tag]}function l(r,n){if(r.state!==n)throw new Error("'vnode.state' must not be modified.")}function u(r){var n=r.state;try{return this.apply(n,arguments)}finally{l(r,n)}}function c(){try{return t.activeElement}catch{return null}}function g(r,n,a,d,m,E,x){for(var U=a;U<d;U++){var L=n[U];L!=null&&b(r,L,m,x,E)}}function b(r,n,a,d,m){var E=n.tag;if(typeof E=="string")switch(n.state={},n.attrs!=null&&ye(n.attrs,n,a),E){case"#":C(r,n,m);break;case"<":k(r,n,d,m);break;case"[":D(r,n,a,d,m);break;default:_(r,n,a,d,m)}else q(r,n,a,d,m)}function C(r,n,a){n.dom=t.createTextNode(n.children),G(r,n.dom,a)}var T={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function k(r,n,a,d){var m=n.children.match(/^\s*?<(\w+)/im)||[],E=t.createElement(T[m[1]]||"div");a==="http://www.w3.org/2000/svg"?(E.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+n.children+"</svg>",E=E.firstChild):E.innerHTML=n.children,n.dom=E.firstChild,n.domSize=E.childNodes.length,n.instance=[];for(var x=t.createDocumentFragment(),U;U=E.firstChild;)n.instance.push(U),x.appendChild(U);G(r,x,d)}function D(r,n,a,d,m){var E=t.createDocumentFragment();if(n.children!=null){var x=n.children;g(E,x,0,x.length,a,null,d)}n.dom=E.firstChild,n.domSize=E.childNodes.length,G(r,E,m)}function _(r,n,a,d,m){var E=n.tag,x=n.attrs,U=x&&x.is;d=s(n)||d;var L=d?U?t.createElementNS(d,E,{is:U}):t.createElementNS(d,E):U?t.createElement(E,{is:U}):t.createElement(E);if(n.dom=L,x!=null&&De(n,x,d),G(r,L,m),!X(n)&&n.children!=null){var K=n.children;g(L,K,0,K.length,a,null,d),n.tag==="select"&&x!=null&&te(n,x)}}function A(r,n){var a;if(typeof r.tag.view=="function"){if(r.state=Object.create(r.tag),a=r.state.view,a.$$reentrantLock$$!=null)return;a.$$reentrantLock$$=!0}else{if(r.state=void 0,a=r.tag,a.$$reentrantLock$$!=null)return;a.$$reentrantLock$$=!0,r.state=r.tag.prototype!=null&&typeof r.tag.prototype.view=="function"?new r.tag(r):r.tag(r)}if(ye(r.state,r,n),r.attrs!=null&&ye(r.attrs,r,n),r.instance=Qe.normalize(u.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");a.$$reentrantLock$$=null}function q(r,n,a,d,m){A(n,a),n.instance!=null?(b(r,n.instance,a,d,m),n.dom=n.instance.dom,n.domSize=n.dom!=null?n.instance.domSize:0):n.domSize=0}function V(r,n,a,d,m,E){if(!(n===a||n==null&&a==null))if(n==null||n.length===0)g(r,a,0,a.length,d,m,E);else if(a==null||a.length===0)ce(r,n,0,n.length);else{var x=n[0]!=null&&n[0].key!=null,U=a[0]!=null&&a[0].key!=null,L=0,K=0;if(!x)for(;K<n.length&&n[K]==null;)K++;if(!U)for(;L<a.length&&a[L]==null;)L++;if(x!==U)ce(r,n,K,n.length),g(r,a,L,a.length,d,m,E);else if(U){for(var p=n.length-1,P=a.length-1,O,I,M,B,j,oe;p>=K&&P>=L&&(B=n[p],j=a[P],B.key===j.key);)B!==j&&Y(r,B,j,d,m,E),j.dom!=null&&(m=j.dom),p--,P--;for(;p>=K&&P>=L&&(I=n[K],M=a[L],I.key===M.key);)K++,L++,I!==M&&Y(r,I,M,d,h(n,K,m),E);for(;p>=K&&P>=L&&!(L===P||I.key!==j.key||B.key!==M.key);)oe=h(n,K,m),v(r,B,oe),B!==M&&Y(r,B,M,d,oe,E),++L<=--P&&v(r,I,m),I!==j&&Y(r,I,j,d,m,E),j.dom!=null&&(m=j.dom),K++,p--,B=n[p],j=a[P],I=n[K],M=a[L];for(;p>=K&&P>=L&&B.key===j.key;)B!==j&&Y(r,B,j,d,m,E),j.dom!=null&&(m=j.dom),p--,P--,B=n[p],j=a[P];if(L>P)ce(r,n,K,p+1);else if(K>p)g(r,a,L,P+1,d,m,E);else{var he=m,He=P-L+1,Ce=new Array(He),$e=0,J=0,Te=2147483647,Re=0,O,Ue;for(J=0;J<He;J++)Ce[J]=-1;for(J=P;J>=L;J--){O==null&&(O=S(n,K,p+1)),j=a[J];var de=O[j.key];de!=null&&(Te=de<Te?de:-1,Ce[J-L]=de,B=n[de],n[de]=null,B!==j&&Y(r,B,j,d,m,E),j.dom!=null&&(m=j.dom),Re++)}if(m=he,Re!==p-K+1&&ce(r,n,K,p+1),Re===0)g(r,a,L,P+1,d,m,E);else if(Te===-1)for(Ue=f(Ce),$e=Ue.length-1,J=P;J>=L;J--)M=a[J],Ce[J-L]===-1?b(r,M,d,E,m):Ue[$e]===J-L?$e--:v(r,M,m),M.dom!=null&&(m=a[J].dom);else for(J=P;J>=L;J--)M=a[J],Ce[J-L]===-1&&b(r,M,d,E,m),M.dom!=null&&(m=a[J].dom)}}else{var ae=n.length<a.length?n.length:a.length;for(L=L<K?L:K;L<ae;L++)I=n[L],M=a[L],!(I===M||I==null&&M==null)&&(I==null?b(r,M,d,E,h(n,L+1,m)):M==null?ue(r,I):Y(r,I,M,d,h(n,L+1,m),E));n.length>ae&&ce(r,n,L,n.length),a.length>ae&&g(r,a,L,a.length,d,m,E)}}}function Y(r,n,a,d,m,E){var x=n.tag,U=a.tag;if(x===U){if(a.state=n.state,a.events=n.events,qe(a,n))return;if(typeof x=="string")switch(a.attrs!=null&&Se(a.attrs,a,d),x){case"#":z(n,a);break;case"<":R(r,n,a,E,m);break;case"[":$(r,n,a,d,m,E);break;default:N(n,a,d,E)}else W(r,n,a,d,m,E)}else ue(r,n),b(r,a,d,E,m)}function z(r,n){r.children.toString()!==n.children.toString()&&(r.dom.nodeValue=n.children),n.dom=r.dom}function R(r,n,a,d,m){n.children!==a.children?(fe(r,n),k(r,a,d,m)):(a.dom=n.dom,a.domSize=n.domSize,a.instance=n.instance)}function $(r,n,a,d,m,E){V(r,n.children,a.children,d,m,E);var x=0,U=a.children;if(a.dom=null,U!=null){for(var L=0;L<U.length;L++){var K=U[L];K!=null&&K.dom!=null&&(a.dom==null&&(a.dom=K.dom),x+=K.domSize||1)}x!==1&&(a.domSize=x)}}function N(r,n,a,d){var m=n.dom=r.dom;d=s(n)||d,n.tag==="textarea"&&n.attrs==null&&(n.attrs={}),Ie(n,r.attrs,n.attrs,d),X(n)||V(m,r.children,n.children,a,null,d)}function W(r,n,a,d,m,E){if(a.instance=Qe.normalize(u.call(a.state.view,a)),a.instance===a)throw Error("A view cannot return the vnode it received as argument");Se(a.state,a,d),a.attrs!=null&&Se(a.attrs,a,d),a.instance!=null?(n.instance==null?b(r,a.instance,d,E,m):Y(r,n.instance,a.instance,d,m,E),a.dom=a.instance.dom,a.domSize=a.instance.domSize):n.instance!=null?(ue(r,n.instance),a.dom=void 0,a.domSize=0):(a.dom=n.dom,a.domSize=n.domSize)}function S(r,n,a){for(var d=Object.create(null);n<a;n++){var m=r[n];if(m!=null){var E=m.key;E!=null&&(d[E]=n)}}return d}var w=[];function f(r){for(var n=[0],a=0,d=0,m=0,E=w.length=r.length,m=0;m<E;m++)w[m]=r[m];for(var m=0;m<E;++m)if(r[m]!==-1){var x=n[n.length-1];if(r[x]<r[m]){w[m]=x,n.push(m);continue}for(a=0,d=n.length-1;a<d;){var U=(a>>>1)+(d>>>1)+(a&d&1);r[n[U]]<r[m]?a=U+1:d=U}r[m]<r[n[a]]&&(a>0&&(w[m]=n[a-1]),n[a]=m)}for(a=n.length,d=n[a-1];a-- >0;)n[a]=d,d=w[d];return w.length=0,n}function h(r,n,a){for(;n<r.length;n++)if(r[n]!=null&&r[n].dom!=null)return r[n].dom;return a}function v(r,n,a){var d=t.createDocumentFragment();H(r,d,n),G(r,d,a)}function H(r,n,a){for(;a.dom!=null&&a.dom.parentNode===r;){if(typeof a.tag!="string"){if(a=a.instance,a!=null)continue}else if(a.tag==="<")for(var d=0;d<a.instance.length;d++)n.appendChild(a.instance[d]);else if(a.tag!=="[")n.appendChild(a.dom);else if(a.children.length===1){if(a=a.children[0],a!=null)continue}else for(var d=0;d<a.children.length;d++){var m=a.children[d];m!=null&&H(r,n,m)}break}}function G(r,n,a){a!=null?r.insertBefore(n,a):r.appendChild(n)}function X(r){if(r.attrs==null||r.attrs.contenteditable==null&&r.attrs.contentEditable==null)return!1;var n=r.children;if(n!=null&&n.length===1&&n[0].tag==="<"){var a=n[0].children;r.dom.innerHTML!==a&&(r.dom.innerHTML=a)}else if(n!=null&&n.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function ce(r,n,a,d){for(var m=a;m<d;m++){var E=n[m];E!=null&&ue(r,E)}}function ue(r,n){var a=0,d=n.state,m,E;if(typeof n.tag!="string"&&typeof n.state.onbeforeremove=="function"){var x=u.call(n.state.onbeforeremove,n);x!=null&&typeof x.then=="function"&&(a=1,m=x)}if(n.attrs&&typeof n.attrs.onbeforeremove=="function"){var x=u.call(n.attrs.onbeforeremove,n);x!=null&&typeof x.then=="function"&&(a|=2,E=x)}if(l(n,d),!a)ge(n),ie(r,n);else{if(m!=null){var U=function(){a&1&&(a&=2,a||L())};m.then(U,U)}if(E!=null){var U=function(){a&2&&(a&=1,a||L())};E.then(U,U)}}function L(){l(n,d),ge(n),ie(r,n)}}function fe(r,n){for(var a=0;a<n.instance.length;a++)r.removeChild(n.instance[a])}function ie(r,n){for(;n.dom!=null&&n.dom.parentNode===r;){if(typeof n.tag!="string"){if(n=n.instance,n!=null)continue}else if(n.tag==="<")fe(r,n);else{if(n.tag!=="["&&(r.removeChild(n.dom),!Array.isArray(n.children)))break;if(n.children.length===1){if(n=n.children[0],n!=null)continue}else for(var a=0;a<n.children.length;a++){var d=n.children[a];d!=null&&ie(r,d)}}break}}function ge(r){if(typeof r.tag!="string"&&typeof r.state.onremove=="function"&&u.call(r.state.onremove,r),r.attrs&&typeof r.attrs.onremove=="function"&&u.call(r.attrs.onremove,r),typeof r.tag!="string")r.instance!=null&&ge(r.instance);else{var n=r.children;if(Array.isArray(n))for(var a=0;a<n.length;a++){var d=n[a];d!=null&&ge(d)}}}function De(r,n,a){r.tag==="input"&&n.type!=null&&r.dom.setAttribute("type",n.type);var d=n!=null&&r.tag==="input"&&n.type==="file";for(var m in n)Q(r,m,null,n[m],a,d)}function Q(r,n,a,d,m,E){if(!(n==="key"||n==="is"||d==null||be(n)||a===d&&!xe(r,n)&&typeof d!="object"||n==="type"&&r.tag==="input")){if(n[0]==="o"&&n[1]==="n")return Pe(r,n,d);if(n.slice(0,6)==="xlink:")r.dom.setAttributeNS("http://www.w3.org/1999/xlink",n.slice(6),d);else if(n==="style")je(r.dom,a,d);else if(Ee(r,n,m)){if(n==="value"){if((r.tag==="input"||r.tag==="textarea")&&r.dom.value===""+d&&(E||r.dom===c())||r.tag==="select"&&a!==null&&r.dom.value===""+d||r.tag==="option"&&a!==null&&r.dom.value===""+d)return;if(E&&""+d!=""){console.error("`value` is read-only on file inputs!");return}}r.dom[n]=d}else typeof d=="boolean"?d?r.dom.setAttribute(n,""):r.dom.removeAttribute(n):r.dom.setAttribute(n==="className"?"class":n,d)}}function _e(r,n,a,d){if(!(n==="key"||n==="is"||a==null||be(n)))if(n[0]==="o"&&n[1]==="n")Pe(r,n,void 0);else if(n==="style")je(r.dom,a,null);else if(Ee(r,n,d)&&n!=="className"&&n!=="title"&&!(n==="value"&&(r.tag==="option"||r.tag==="select"&&r.dom.selectedIndex===-1&&r.dom===c()))&&!(r.tag==="input"&&n==="type"))r.dom[n]=null;else{var m=n.indexOf(":");m!==-1&&(n=n.slice(m+1)),a!==!1&&r.dom.removeAttribute(n==="className"?"class":n)}}function te(r,n){if("value"in n)if(n.value===null)r.dom.selectedIndex!==-1&&(r.dom.value=null);else{var a=""+n.value;(r.dom.value!==a||r.dom.selectedIndex===-1)&&(r.dom.value=a)}"selectedIndex"in n&&Q(r,"selectedIndex",null,n.selectedIndex,void 0)}function Ie(r,n,a,d){if(n&&n===a&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),a!=null){r.tag==="input"&&a.type!=null&&r.dom.setAttribute("type",a.type);var m=r.tag==="input"&&a.type==="file";for(var E in a)Q(r,E,n&&n[E],a[E],d,m)}var x;if(n!=null)for(var E in n)(x=n[E])!=null&&(a==null||a[E]==null)&&_e(r,E,x,d)}function xe(r,n){return n==="value"||n==="checked"||n==="selectedIndex"||n==="selected"&&r.dom===c()||r.tag==="option"&&r.dom.parentNode===t.activeElement}function be(r){return r==="oninit"||r==="oncreate"||r==="onupdate"||r==="onremove"||r==="onbeforeremove"||r==="onbeforeupdate"}function Ee(r,n,a){return a===void 0&&(r.tag.indexOf("-")>-1||r.attrs!=null&&r.attrs.is||n!=="href"&&n!=="list"&&n!=="form"&&n!=="width"&&n!=="height")&&n in r.dom}var Me=/[A-Z]/g;function We(r){return"-"+r.toLowerCase()}function me(r){return r[0]==="-"&&r[1]==="-"?r:r==="cssFloat"?"float":r.replace(Me,We)}function je(r,n,a){if(n!==a)if(a==null)r.style.cssText="";else if(typeof a!="object")r.style.cssText=a;else if(n==null||typeof n!="object"){r.style.cssText="";for(var d in a){var m=a[d];m!=null&&r.style.setProperty(me(d),String(m))}}else{for(var d in a){var m=a[d];m!=null&&(m=String(m))!==String(n[d])&&r.style.setProperty(me(d),m)}for(var d in n)n[d]!=null&&a[d]==null&&r.style.removeProperty(me(d))}}function le(){this._=i}le.prototype=Object.create(null),le.prototype.handleEvent=function(r){var n=this["on"+r.type],a;typeof n=="function"?a=n.call(r.currentTarget,r):typeof n.handleEvent=="function"&&n.handleEvent(r),this._&&r.redraw!==!1&&(0,this._)(),a===!1&&(r.preventDefault(),r.stopPropagation())};function Pe(r,n,a){if(r.events!=null){if(r.events._=i,r.events[n]===a)return;a!=null&&(typeof a=="function"||typeof a=="object")?(r.events[n]==null&&r.dom.addEventListener(n.slice(2),r.events,!1),r.events[n]=a):(r.events[n]!=null&&r.dom.removeEventListener(n.slice(2),r.events,!1),r.events[n]=void 0)}else a!=null&&(typeof a=="function"||typeof a=="object")&&(r.events=new le,r.dom.addEventListener(n.slice(2),r.events,!1),r.events[n]=a)}function ye(r,n,a){typeof r.oninit=="function"&&u.call(r.oninit,n),typeof r.oncreate=="function"&&a.push(u.bind(r.oncreate,n))}function Se(r,n,a){typeof r.onupdate=="function"&&a.push(u.bind(r.onupdate,n))}function qe(r,n){do{if(r.attrs!=null&&typeof r.attrs.onbeforeupdate=="function"){var a=u.call(r.attrs.onbeforeupdate,r,n);if(a!==void 0&&!a)break}if(typeof r.tag!="string"&&typeof r.state.onbeforeupdate=="function"){var a=u.call(r.state.onbeforeupdate,r,n);if(a!==void 0&&!a)break}return!1}while(!1);return r.dom=n.dom,r.domSize=n.domSize,r.instance=n.instance,r.attrs=n.attrs,r.children=n.children,r.text=n.text,!0}var pe;return function(r,n,a){if(!r)throw new TypeError("DOM element being rendered to does not exist.");if(pe!=null&&r.contains(pe))throw new TypeError("Node is currently being rendered to and thus is locked.");var d=i,m=pe,E=[],x=c(),U=r.namespaceURI;pe=r,i=typeof a=="function"?a:void 0;try{r.vnodes==null&&(r.textContent=""),n=Qe.normalizeChildren(Array.isArray(n)?n:[n]),V(r,r.vnodes,n,E,null,U==="http://www.w3.org/1999/xhtml"?void 0:U),r.vnodes=n,x!=null&&c()!==x&&typeof x.focus=="function"&&x.focus();for(var L=0;L<E.length;L++)E[L]()}finally{i=d,pe=m}}},Nt=gn(typeof window!="undefined"?window:null),ft=ve,mn=function(e,t,i){var o=[],s=!1,l=-1;function u(){for(l=0;l<o.length;l+=2)try{e(o[l],ft(o[l+1]),c)}catch(b){i.error(b)}l=-1}function c(){s||(s=!0,t(function(){s=!1,u()}))}c.sync=u;function g(b,C){if(C!=null&&C.view==null&&typeof C!="function")throw new TypeError("m.mount expects a component, not a vnode.");var T=o.indexOf(b);T>=0&&(o.splice(T,2),T<=l&&(l-=2),e(b,[])),C!=null&&(o.push(b,C),e(b,ft(C),c))}return{mount:g,redraw:c}},yn=Nt,nt=mn(yn,typeof requestAnimationFrame!="undefined"?requestAnimationFrame:null,typeof console!="undefined"?console:null),xt=function(e){if(Object.prototype.toString.call(e)!=="[object Object]")return"";var t=[];for(var i in e)o(i,e[i]);return t.join("&");function o(s,l){if(Array.isArray(l))for(var u=0;u<l.length;u++)o(s+"["+u+"]",l[u]);else if(Object.prototype.toString.call(l)==="[object Object]")for(var u in l)o(s+"["+u+"]",l[u]);else t.push(encodeURIComponent(s)+(l!=null&&l!==""?"="+encodeURIComponent(l):""))}},wn=Ye,Mt=Object.assign||function(e,t){for(var i in t)wn.call(t,i)&&(e[i]=t[i])},vn=xt,bn=Mt,rt=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(t==null)return e;var i=e.indexOf("?"),o=e.indexOf("#"),s=o<0?e.length:o,l=i<0?s:i,u=e.slice(0,l),c={};bn(c,t);var g=u.replace(/:([^\/\.-]+)(\.{3})?/g,function(A,q,V){return delete c[q],t[q]==null?A:V?t[q]:encodeURIComponent(String(t[q]))}),b=g.indexOf("?"),C=g.indexOf("#"),T=C<0?g.length:C,k=b<0?T:b,D=g.slice(0,k);i>=0&&(D+=e.slice(i,s)),b>=0&&(D+=(i<0?"?":"&")+g.slice(b,T));var _=vn(c);return _&&(D+=(i<0&&b<0?"?":"&")+_),o>=0&&(D+=e.slice(o)),C>=0&&(D+=(o<0?"":"&")+g.slice(C)),D},En=rt,pt=Ye,Pn=function(e,t,i){var o=0;function s(c){return new t(c)}s.prototype=t.prototype,s.__proto__=t;function l(c){return function(g,b){typeof g!="string"?(b=g,g=g.url):b==null&&(b={});var C=new t(function(_,A){c(En(g,b.params),b,function(q){if(typeof b.type=="function")if(Array.isArray(q))for(var V=0;V<q.length;V++)q[V]=new b.type(q[V]);else q=new b.type(q);_(q)},A)});if(b.background===!0)return C;var T=0;function k(){--T===0&&typeof i=="function"&&i()}return D(C);function D(_){var A=_.then;return _.constructor=s,_.then=function(){T++;var q=A.apply(_,arguments);return q.then(k,function(V){if(k(),T===0)throw V}),D(q)},_}}}function u(c,g){for(var b in c.headers)if(pt.call(c.headers,b)&&b.toLowerCase()===g)return!0;return!1}return{request:l(function(c,g,b,C){var T=g.method!=null?g.method.toUpperCase():"GET",k=g.body,D=(g.serialize==null||g.serialize===JSON.serialize)&&!(k instanceof e.FormData||k instanceof e.URLSearchParams),_=g.responseType||(typeof g.extract=="function"?"":"json"),A=new e.XMLHttpRequest,q=!1,V=!1,Y=A,z,R=A.abort;A.abort=function(){q=!0,R.call(this)},A.open(T,c,g.async!==!1,typeof g.user=="string"?g.user:void 0,typeof g.password=="string"?g.password:void 0),D&&k!=null&&!u(g,"content-type")&&A.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof g.deserialize!="function"&&!u(g,"accept")&&A.setRequestHeader("Accept","application/json, text/*"),g.withCredentials&&(A.withCredentials=g.withCredentials),g.timeout&&(A.timeout=g.timeout),A.responseType=_;for(var $ in g.headers)pt.call(g.headers,$)&&A.setRequestHeader($,g.headers[$]);A.onreadystatechange=function(N){if(!q&&N.target.readyState===4)try{var W=N.target.status>=200&&N.target.status<300||N.target.status===304||/^file:\/\//i.test(c),S=N.target.response,w;if(_==="json"){if(!N.target.responseType&&typeof g.extract!="function")try{S=JSON.parse(N.target.responseText)}catch{S=null}}else(!_||_==="text")&&S==null&&(S=N.target.responseText);if(typeof g.extract=="function"?(S=g.extract(N.target,g),W=!0):typeof g.deserialize=="function"&&(S=g.deserialize(S)),W)b(S);else{var f=function(){try{w=N.target.responseText}catch{w=S}var h=new Error(w);h.code=N.target.status,h.response=S,C(h)};A.status===0?setTimeout(function(){V||f()}):f()}}catch(h){C(h)}},A.ontimeout=function(N){V=!0;var W=new Error("Request timed out");W.code=N.target.status,C(W)},typeof g.config=="function"&&(A=g.config(A,g,c)||A,A!==Y&&(z=A.abort,A.abort=function(){q=!0,z.call(this)})),k==null?A.send():typeof g.serialize=="function"?A.send(g.serialize(k)):k instanceof e.FormData||k instanceof e.URLSearchParams?A.send(k):A.send(JSON.stringify(k))}),jsonp:l(function(c,g,b,C){var T=g.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+o++,k=e.document.createElement("script");e[T]=function(D){delete e[T],k.parentNode.removeChild(k),b(D)},k.onerror=function(){delete e[T],k.parentNode.removeChild(k),C(new Error("JSONP request failed"))},k.src=c+(c.indexOf("?")<0?"?":"&")+encodeURIComponent(g.callbackKey||"callback")+"="+encodeURIComponent(T),e.document.documentElement.appendChild(k)})}},Sn=Fe.exports,Cn=nt,Tn=Pn(typeof window!="undefined"?window:null,Sn,Cn.redraw);function ht(e){try{return decodeURIComponent(e)}catch{return e}}var jt=function(e){if(e===""||e==null)return{};e.charAt(0)==="?"&&(e=e.slice(1));for(var t=e.split("&"),i={},o={},s=0;s<t.length;s++){var l=t[s].split("="),u=ht(l[0]),c=l.length===2?ht(l[1]):"";c==="true"?c=!0:c==="false"&&(c=!1);var g=u.split(/\]\[?|\[/),b=o;u.indexOf("[")>-1&&g.pop();for(var C=0;C<g.length;C++){var T=g[C],k=g[C+1],D=k==""||!isNaN(parseInt(k,10));if(T===""){var u=g.slice(0,C).join();i[u]==null&&(i[u]=Array.isArray(b)?b.length:0),T=i[u]++}else if(T==="__proto__")break;if(C===g.length-1)b[T]=c;else{var _=Object.getOwnPropertyDescriptor(b,T);_!=null&&(_=_.value),_==null&&(b[T]=_=D?[]:{}),b=_}}}return o},kn=jt,it=function(e){var t=e.indexOf("?"),i=e.indexOf("#"),o=i<0?e.length:i,s=t<0?o:t,l=e.slice(0,s).replace(/\/{2,}/g,"/");return l?(l[0]!=="/"&&(l="/"+l),l.length>1&&l[l.length-1]==="/"&&(l=l.slice(0,-1))):l="/",{path:l,params:t<0?{}:kn(e.slice(t+1,o))}},On=it,Ln=function(e){var t=On(e),i=Object.keys(t.params),o=[],s=new RegExp("^"+t.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(l,u,c){return u==null?"\\"+l:(o.push({k:u,r:c==="..."}),c==="..."?"(.*)":c==="."?"([^/]+)\\.":"([^/]+)"+(c||""))})+"$");return function(l){for(var u=0;u<i.length;u++)if(t.params[i[u]]!==l.params[i[u]])return!1;if(!o.length)return s.test(l.path);var c=s.exec(l.path);if(c==null)return!1;for(var u=0;u<o.length;u++)l.params[o[u].k]=o[u].r?c[u+1]:decodeURIComponent(c[u+1]);return!0}},dt=Ye,gt=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$"),qt=function(e,t){var i={};if(t!=null)for(var o in e)dt.call(e,o)&&!gt.test(o)&&t.indexOf(o)<0&&(i[o]=e[o]);else for(var o in e)dt.call(e,o)&&!gt.test(o)&&(i[o]=e[o]);return i},An=ve,Dn=It,_n=Fe.exports,mt=rt,yt=it,In=Ln,Rn=Mt,Nn=qt,Ze={};function xn(e){try{return decodeURIComponent(e)}catch{return e}}var Mn=function(e,t){var i=e==null?null:typeof e.setImmediate=="function"?e.setImmediate:e.setTimeout,o=_n.resolve(),s=!1,l=!1,u=0,c,g,b=Ze,C,T,k,D,_={onbeforeupdate:function(){return u=u?2:1,!(!u||Ze===b)},onremove:function(){e.removeEventListener("popstate",V,!1),e.removeEventListener("hashchange",q,!1)},view:function(){if(!(!u||Ze===b)){var R=[An(C,T.key,T)];return b&&(R=b.render(R[0])),R}}},A=z.SKIP={};function q(){s=!1;var R=e.location.hash;z.prefix[0]!=="#"&&(R=e.location.search+R,z.prefix[0]!=="?"&&(R=e.location.pathname+R,R[0]!=="/"&&(R="/"+R)));var $=R.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,xn).slice(z.prefix.length),N=yt($);Rn(N.params,e.history.state);function W(w){console.error(w),Y(g,null,{replace:!0})}S(0);function S(w){for(;w<c.length;w++)if(c[w].check(N)){var f=c[w].component,h=c[w].route,v=f,H=D=function(G){if(H===D){if(G===A)return S(w+1);C=G!=null&&(typeof G.view=="function"||typeof G=="function")?G:"div",T=N.params,k=$,D=null,b=f.render?f:null,u===2?t.redraw():(u=2,t.redraw.sync())}};f.view||typeof f=="function"?(f={},H(v)):f.onmatch?o.then(function(){return f.onmatch(N.params,$,h)}).then(H,$===g?null:W):H("div");return}if($===g)throw new Error("Could not resolve default route "+g+".");Y(g,null,{replace:!0})}}function V(){s||(s=!0,i(q))}function Y(R,$,N){if(R=mt(R,$),l){V();var W=N?N.state:null,S=N?N.title:null;N&&N.replace?e.history.replaceState(W,S,z.prefix+R):e.history.pushState(W,S,z.prefix+R)}else e.location.href=z.prefix+R}function z(R,$,N){if(!R)throw new TypeError("DOM element being rendered to does not exist.");if(c=Object.keys(N).map(function(S){if(S[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(S))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:S,component:N[S],check:In(S)}}),g=$,$!=null){var W=yt($);if(!c.some(function(S){return S.check(W)}))throw new ReferenceError("Default route doesn't match any known routes.")}typeof e.history.pushState=="function"?e.addEventListener("popstate",V,!1):z.prefix[0]==="#"&&e.addEventListener("hashchange",q,!1),l=!0,t.mount(R,_),q()}return z.set=function(R,$,N){D!=null&&(N=N||{},N.replace=!0),D=null,Y(R,$,N)},z.get=function(){return k},z.prefix="#!",z.Link={view:function(R){var $=Dn(R.attrs.selector||"a",Nn(R.attrs,["options","params","selector","onclick"]),R.children),N,W,S;return($.attrs.disabled=Boolean($.attrs.disabled))?($.attrs.href=null,$.attrs["aria-disabled"]="true"):(N=R.attrs.options,W=R.attrs.onclick,S=mt($.attrs.href,R.attrs.params),$.attrs.href=z.prefix+S,$.attrs.onclick=function(w){var f;typeof W=="function"?f=W.call(w.currentTarget,w):W==null||typeof W!="object"||typeof W.handleEvent=="function"&&W.handleEvent(w),f!==!1&&!w.defaultPrevented&&(w.button===0||w.which===0||w.which===1)&&(!w.currentTarget.target||w.currentTarget.target==="_self")&&!w.ctrlKey&&!w.metaKey&&!w.shiftKey&&!w.altKey&&(w.preventDefault(),w.redraw=!1,z.set(S,null,N))}),$}},z.param=function(R){return T&&R!=null?T[R]:T},z},jn=nt,qn=Mn(typeof window!="undefined"?window:null,jn),Ge=dn,Ht=Tn,$t=nt,re=function(){return Ge.apply(this,arguments)};re.m=Ge;re.trust=Ge.trust;re.fragment=Ge.fragment;re.Fragment="[";re.mount=$t.mount;re.route=qn;re.render=Nt;re.redraw=$t.redraw;re.request=Ht.request;re.jsonp=Ht.jsonp;re.parseQueryString=jt;re.buildQueryString=xt;re.parsePathname=it;re.buildPathname=rt;re.vnode=ve;re.PromisePolyfill=Rt;re.censor=qt;var y=re;function Z(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function se(e){return function t(i){return arguments.length===0||Z(i)?t:e.apply(this,arguments)}}function ke(e){return function t(i,o){switch(arguments.length){case 0:return t;case 1:return Z(i)?t:se(function(s){return e(i,s)});default:return Z(i)&&Z(o)?t:Z(i)?se(function(s){return e(s,o)}):Z(o)?se(function(s){return e(i,s)}):e(i,o)}}}function Hn(e){return function t(i,o,s){switch(arguments.length){case 0:return t;case 1:return Z(i)?t:ke(function(l,u){return e(i,l,u)});case 2:return Z(i)&&Z(o)?t:Z(i)?ke(function(l,u){return e(l,o,u)}):Z(o)?ke(function(l,u){return e(i,l,u)}):se(function(l){return e(i,o,l)});default:return Z(i)&&Z(o)&&Z(s)?t:Z(i)&&Z(o)?ke(function(l,u){return e(l,u,s)}):Z(i)&&Z(s)?ke(function(l,u){return e(l,o,u)}):Z(o)&&Z(s)?ke(function(l,u){return e(i,l,u)}):Z(i)?se(function(l){return e(l,o,s)}):Z(o)?se(function(l){return e(i,l,s)}):Z(s)?se(function(l){return e(i,o,l)}):e(i,o,s)}}}var $n=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function Un(e){return Object.prototype.toString.call(e)==="[object String]"}function Je(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var wt=Object.prototype.toString,zn=function(){return wt.call(arguments)==="[object Arguments]"?function(t){return wt.call(t)==="[object Arguments]"}:function(t){return Je("callee",t)}}(),Ut=zn,Bn=!{toString:null}.propertyIsEnumerable("toString"),vt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],bt=function(){return arguments.propertyIsEnumerable("length")}(),Fn=function(t,i){for(var o=0;o<t.length;){if(t[o]===i)return!0;o+=1}return!1},Kn=se(typeof Object.keys=="function"&&!bt?function(t){return Object(t)!==t?[]:Object.keys(t)}:function(t){if(Object(t)!==t)return[];var i,o,s=[],l=bt&&Ut(t);for(i in t)Je(i,t)&&(!l||i!=="length")&&(s[s.length]=i);if(Bn)for(o=vt.length-1;o>=0;)i=vt[o],Je(i,t)&&!Fn(s,i)&&(s[s.length]=i),o-=1;return s}),Et=Kn,Wn=se(function(t){return t===null?"Null":t===void 0?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}),Pt=Wn;function St(e){for(var t=[],i;!(i=e.next()).done;)t.push(i.value);return t}function Ct(e,t,i){for(var o=0,s=i.length;o<s;){if(e(t,i[o]))return!0;o+=1}return!1}function Vn(e){var t=String(e).match(/^function (\w*)/);return t==null?"":t[1]}function Jn(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var et=typeof Object.is=="function"?Object.is:Jn;function Tt(e,t,i,o){var s=St(e),l=St(t);function u(c,g){return at(c,g,i.slice(),o.slice())}return!Ct(function(c,g){return!Ct(u,g,c)},l,s)}function at(e,t,i,o){if(et(e,t))return!0;var s=Pt(e);if(s!==Pt(t)||e==null||t==null)return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof t["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t)&&typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof t.equals=="function")return typeof e.equals=="function"&&e.equals(t)&&typeof t.equals=="function"&&t.equals(e);switch(s){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&Vn(e.constructor)==="Promise")return e===t;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof t&&et(e.valueOf(),t.valueOf())))return!1;break;case"Date":if(!et(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(!(e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode))return!1;break}for(var l=i.length-1;l>=0;){if(i[l]===e)return o[l]===t;l-=1}switch(s){case"Map":return e.size!==t.size?!1:Tt(e.entries(),t.entries(),i.concat([e]),o.concat([t]));case"Set":return e.size!==t.size?!1:Tt(e.values(),t.values(),i.concat([e]),o.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=Et(e);if(u.length!==Et(t).length)return!1;var c=i.concat([e]),g=o.concat([t]);for(l=u.length-1;l>=0;){var b=u[l];if(!(Je(b,t)&&at(t[b],e[b],c,g)))return!1;l-=1}return!0}var Yn=ke(function(t,i){return at(t,i,[],[])}),zt=Yn;function Gn(e){return Object.prototype.toString.call(e)==="[object Object]"}var Xn=se(function(t){return t!=null&&typeof t["fantasy-land/empty"]=="function"?t["fantasy-land/empty"]():t!=null&&t.constructor!=null&&typeof t.constructor["fantasy-land/empty"]=="function"?t.constructor["fantasy-land/empty"]():t!=null&&typeof t.empty=="function"?t.empty():t!=null&&t.constructor!=null&&typeof t.constructor.empty=="function"?t.constructor.empty():$n(t)?[]:Un(t)?"":Gn(t)?{}:Ut(t)?function(){return arguments}():void 0}),Qn=Xn,Zn=se(function(t){return t!=null&&zt(t,Qn(t))}),kt=Zn,er=Hn(function(t,i,o){return zt(i,o[t])}),Le=er,Bt=typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout,tr=F;function F(e,t){this.fork=e,this.cleanup=t||function(){}}F.prototype.of=function(t){return new F(function(i,o){return o(t)})};F.of=F.prototype.of;F.prototype.rejected=function(t){return new F(function(i){return i(t)})};F.rejected=F.prototype.rejected;F.prototype.map=function(t){var i=this.fork,o=this.cleanup;return new F(function(s,l){return i(function(u){return s(u)},function(u){return l(t(u))})},o)};F.prototype.chain=function(t){var i=this.fork,o=this.cleanup;return new F(function(s,l){return i(function(u){return s(u)},function(u){return t(u).fork(s,l)})},o)};F.prototype.ap=function(t){var i=this.fork,o=t.fork,s=this.cleanup,l=t.cleanup;function u(c){s(c[0]),l(c[1])}return new F(function(c,g){var b,C=!1,T,k=!1,D=!1,_,A=i(Y,V(function(z){C=!0,b=z})),q=o(Y,V(function(z){k=!0,T=z}));function V(z){return function(R){if(!D)return z(R),C&&k?(Bt(function(){u(_)}),g(b(T))):R}}function Y(z){if(!D)return D=!0,c(z)}return _=[A,q]},u)};F.prototype.concat=function(t){var i=this.fork,o=t.fork,s=this.cleanup,l=t.cleanup;function u(c){s(c[0]),l(c[1])}return new F(function(c,g){var b=!1,C,T=i(D(c),D(g)),k=o(D(c),D(g));return C=[T,k];function D(_){return function(A){if(!b)return b=!0,Bt(function(){u(C)}),_(A)}}},u)};F.empty=function(){return new F(function(){})};F.prototype.empty=F.empty;F.prototype.toString=function(){return"Task"};F.prototype.orElse=function(t){var i=this.fork,o=this.cleanup;return new F(function(s,l){return i(function(u){return t(u).fork(s,l)},function(u){return l(u)})},o)};F.prototype.fold=function(t,i){var o=this.fork,s=this.cleanup;return new F(function(l,u){return o(function(c){return u(t(c))},function(c){return u(i(c))})},s)};F.prototype.cata=function(t){return this.fold(t.Rejected,t.Resolved)};F.prototype.swap=function(){var t=this.fork,i=this.cleanup;return new F(function(o,s){return t(function(l){return s(l)},function(l){return o(l)})},i)};F.prototype.bimap=function(t,i){var o=this.fork,s=this.cleanup;return new F(function(l,u){return o(function(c){return l(t(c))},function(c){return u(i(c))})},s)};F.prototype.rejectedMap=function(t){var i=this.fork,o=this.cleanup;return new F(function(s,l){return i(function(u){return s(t(u))},function(u){return l(u)})},o)};var Ft=tr;const nr="https://shopper.deno.dev/",rr={"Content-Type":"application/json"},ir=e=>t=>i=>t(JSON.parse(JSON.stringify(i))),ar=e=>t=>i=>t(i),Ve=e=>t=>i=>o=>new Ft((s,l)=>y.request({method:e,url:nr+i,headers:rr,body:o,withCredentials:!1}).then(ar()(l),ir()(s))),or={getTask:(e,t)=>Ve("GET")(e)(t)(),postTask:(e,t,i)=>Ve("POST")(e)(t)(i),putTask:(e,t,i)=>Ve("PUT")(e)(t)(i),deleteTask:(e,t)=>Ve("DELETE")(e)(t)()},Kt=()=>"xxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,i=e=="x"?t:t&3|8;return i.toString(16)}),Wt=e=>t=>(console.log(e,t),t);window.log=Wt;const sr=["Of Them","Boxe(s)","Can(s)","gram(s)","kilogram(s)","pound(s)","liter(s)","mliter(s)","ounce(s)"],ur=e=>{var t;return e.stores.find(Le("id",(t=e.currentStore)==null?void 0:t.id))||e.stores[0]},Ae=e=>{const t=u=>u.http.getTask(u,"stores"),i=u=>u.http.getTask(u,"cats"),o=u=>u.http.getTask(u,"items"),s=({stores:u,cats:c,items:g})=>{let b=c.map(C=>(C.items=g.filter(Le("catId",C.id)).sort((T,k)=>T.order-k.order).reverse(),C)).sort((C,T)=>C.order-T.order);return{cats:b,stores:u.map(C=>(C.cats=b.filter(Le("storeId",C.id)).sort((T,k)=>T.order-k.order),C)),items:g}},l=({stores:u,cats:c,items:g})=>{e.stores=u,e.cats=c,e.items=g.reverse(),e.currentStore=ur(e)};Ft.of(u=>c=>g=>s({stores:u,cats:c,items:g})).ap(t(e)).ap(i(e)).ap(o(e)).fork(Wt("error"),l)},lr=({catId:e,title:t,notes:i,quantity:o,unit:s,price:l,order:u})=>({id:Kt(),title:t,notes:i,catId:e,order:u,quantity:o,unit:s,price:l,notes:i,purchased:!1}),cr=(e,t=0)=>({title:e,id:Kt(),order:t}),Ke={state:{},http:or,settings:{},state:{dragging:{isDragging:!1,item:"",swapItem:""},catIds:[],items:[],showModal:!1,modalContent:null},stores:[],cats:[],items:[],currentStore:null},ot=e=>{e.state.showModal=!1,e.state.modalContent=null},fr=(e,t)=>{let i=cr(t.title);const o=log("error"),s=l=>{t.title="",e.state.showModal=!1,e.state.modalContent=null,Ae(e)};e.http.postTask(e,"stores",i).fork(o,s)},Vt=()=>{const e={title:""};return{view:({attrs:{mdl:t}})=>y("form.w3-container.w3-card.w3-white.w3-animate-zoom",{onsubmit:i=>i.preventDefault()},y(".w3-section",y("label",y("b","Store Title")),y("input.w3-input.w3-border-bottom",{oncreate:({dom:i})=>{i.select(),i.focus()},type:"text",value:e.title,oninput:i=>e.title=i.target.value})),y("button.w3-button.w3-block.w3-orange.w3-section.w3-padding",{onclick:()=>fr(t,e)},"add"))}},pr=(e,t)=>e.cats.find(Le("id",t)).items.length,hr=(e,t,i)=>{const{catId:o,title:s,notes:l,order:u,quantity:c,unit:g,price:b,id:C}=t;let T=i?{catId:o,title:s,notes:l,order:u,quantity:c,unit:g,price:b,id:C}:lr({catId:o,title:s,notes:l,order:pr(e,o),quantity:c,unit:g,price:b});const k=_=>{t={catId:o,title:"",notes:"",order:0,quantity:"",unit:"",price:0},Ae(e),ot(e)};return((_,A)=>i?_.http.postTask(_,"items",A):_.http.putTask(_,`items/${A.id}`,A))(e,T).fork(log("error"),k)},dr=(e,t)=>e.http.deleteTask(e,`items/${t}`).fork(log("err"),()=>{Ae(e),ot(e)}),st=({attrs:{mdl:e,catId:t,item:i,isEdit:o}})=>{const s={catId:t,catTitle:"",title:"",notes:"",order:"",quantity:"",unit:"",price:""};return t&&(s.catTitle=e.cats.find(Le("id",t)).title),o&&(s.catId=i.catId,s.title=i.title,s.notes=i.notes,s.order=i.order,s.quantity=i.quantity,s.unit=i.unit,s.price=i.price,s.id=i.id),{view:({attrs:{mdl:l}})=>{var u;return y("form.w3-container.w3-card.w3-white.w3-animate-zoom",{onsubmit:c=>c.preventDefault()},y(".w3-section",y("button.w3-button.w3-black.w3-border-black.w3-text-white",{style:{position:"absolute",top:"-50px"},onclick:()=>ot(l)},y.trust("&#10005;"))),y(".w3-section",y("label",y("b","Title")),y("input.w3-input.w3-border-bottom",{oncreate:({dom:c})=>{c.select(),c.focus()},type:"text",value:s.title,oninput:c=>s.title=c.target.value})),y(".w3-section",y("label",y("b","Category")),y("select.w3-input.w3-border-bottom",{value:((u=l.cats.find(Le("id",s.catId)))==null?void 0:u.title)||"",onchange:c=>{s.catTitle=c.target.value,s.catId=l.cats.find(Le("title",s.catTitle)).id}},l.cats.map(c=>y(`option#${c.id}`,c.title)))),y(".w3-section",y("label",y("b","Quantity")),y("input.w3-input.w3-border-bottom",{type:"number",value:s.quantity,pattern:"[0-9]*",inputmode:"numeric",oninput:c=>s.quantity=c.target.value})),y(".w3-section",y("label",y("b","Unit")),y("select.w3-input.w3-border-bottom",{value:s.unit,onchange:c=>s.unit=c.target.value},sr.map(c=>y("option",c)))),y(".w3-section",y("label",y("b","Price")),y("input.w3-input.w3-border-bottom",{pattern:"[0-9]*",inputmode:"numeric",value:s.price,oninput:c=>s.price=c.target.value})),y(".w3-section",y("label",y("b","Notes")),y("textarea.w3-input.w3-border-bottom",{oninput:c=>s.notes=c.target.value},s.notes)),y("button.w3-button.w3-block.w3-orange.w3-margin-bottom",{onclick:()=>hr(l,s,o)},o?"Update":"Add"),o&&y("button.w3-button.w3-red.w3-margin-top.w3-left",{onclick:()=>dr(l,i.id)},"Delete"))}}},Be=new Set,gr=(e,t)=>{e.http.deleteTask(e,`stores/${t}`).fork(log("error deleteing"),()=>Ae(e))},mr=(e,t)=>{e.http.deleteTask(e,`cats/${t}`).fork(log("error deleteing"),()=>Ae(e))},yr=(e,t)=>Promise.resolve(e.setCat(t)),Ot=(e,t,i)=>Promise.resolve(e.currentStore=i).then(()=>t.toggleSideBar(t)),wr=()=>({view:({attrs:{mdl:e,state:t}})=>y(".w3-sidebar#sidebar.w3-bar-block.w3-collapse.w3-card.w3-animate-left",{style:{width:e.settings.profile=="desktop"?"300px":"90%",display:t.sidebar.open?"block":"none"}},e.settings.profile!="desktop"&&y("button.w3-bar-item.w3-button.w3-large",{onclick:()=>t.toggleSideBar(t)},"Close "),y("button.w3-button.w3-orange",{onclick:()=>{e.state.modalContent=y(Vt,{mdl:e}),e.state.showModal=!0}},"New Store"),e.stores.map((i,o)=>y(".w3-right-align.w3-row",{key:i.id},y("button.w3-button.w3-left-align.w3-col",{class:e.currentStore.id==i.id?"w3-leftbar w3-border-orange w3-border-10":"",onclick:s=>{s.stopPropagation(),Ot(e,t,i)}},y(".w3-left-align.w3-col.s4",y("button.pointer.w3-badge.w3-pink.w3-border-0.w3-circle.w3-hover-red.w3-left-align",{onclick:s=>{s.stopPropagation(),gr(e,i.id)}},"x")),y("label.w3-label.w3-col.s4.w3-left-align.pointer",i.title),!kt(i.cats)&&y(".w3-col.s4.w3-right-align",{onclick:s=>{s.stopPropagation(),Be.has(i.id)?Be.delete(i.id):Be.add(i.id)}},y("i.w3-btn.w3-circle",Be.has(i.id)?"V":">"))),!kt(i.cats)&&y("ul.w3-list",{class:Be.has(i.id)?"w3-show":"w3-hide",id:i.id},i.cats.map((s,l)=>{var u;return y(".w3-list-item.pointer.w3-row",{key:s.id,onclick:()=>{yr(t,s.id).then(()=>Ot(e,t,i))}},y("button.pointer.w3-badge.w3-pink.w3-border-0.w3-circle.w3-hover-red.w3-left-align",{onclick:c=>{c.stopPropagation(),mr(e,s.id)}},"x"),y("label.w3-col s4",s.title),y(".w3-right-align.w3-col s4",y(".w3-tag w3-orange",(u=s.issues)==null?void 0:u.length)))})))))}),vr=()=>({view:({attrs:{mdl:e,state:t}})=>y("nav.w3-fixed.w3-container",e.currentStore&&y(".w3-bar",y("button.w3-button.w3-hide-large.w3-border.w3-bar-item.w3-left",{onclick:()=>t.toggleSideBar(t)},"MENU"),y(".w3-bar-item",e.currentStore.title),y("button.w3-button.w3-border.w3-bar-item.w3-right",{onclick:()=>{e.state.modalContent=y(st,{mdl:e,catId:null}),e.state.showModal=!0}},"Add an Item"),e.state.dragging.isDragging&&y("button.w3-block.w3-button.w3-green",{onclick:()=>e.state.dragging.isDragging=!1},"Save Changes")))});var br={exports:{}};(function(e,t){(function(i,o){e.exports=o()})(we,function(){function i(w){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(w)}function o(w,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(f&&f.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),f&&s(w,f)}function s(w,f){return(s=Object.setPrototypeOf||function(h,v){return h.__proto__=v,h})(w,f)}function l(w){var f=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var h,v=u(w);return h=f?(h=u(this).constructor,Reflect.construct(v,arguments,h)):v.apply(this,arguments),v=this,!(h=h)||i(h)!=="object"&&typeof h!="function"?function(H){if(H!==void 0)return H;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(v):h}}function u(w){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(w)}function c(w,f){if(!(w instanceof f))throw new TypeError("Cannot call a class as a function")}function g(w,f){for(var h=0;h<f.length;h++){var v=f[h];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(w,v.key,v)}}function b(w,f,h){return f&&g(w.prototype,f),h&&g(w,h),w}var C={set:function(w,f,h){V(w,f,h)},config:function(w){q.set(w)},map:function(){return z.apply(null,arguments)}},T=function(){function w(f,h,v){c(this,w),this.routeEvents(f,h,v),this.preventSelect(f,v)}return b(w,[{key:"routeEvents",value:function(f,h,v){var H=q.get("only",v);this.adapter=!R||H!=="mouse"&&H!==null?!N||H!=="pointer"&&H!==null?!$||H!=="touch"&&H!==null?new k(f,h).bindUnsupportedEvent():new _(f,h,v).bindEvents():new A(f,h,v).bindEvents():new D(f,h,v).bindEvents()}},{key:"preventSelect",value:function(f,h){q.get("preventSelect",h)&&(f.style.webkitTouchCallout="none",f.style.webkitUserSelect="none",f.style.khtmlUserSelect="none",f.style.MozUserSelect="none",f.style.msUserSelect="none",f.style.userSelect="none")}}]),w}(),k=function(){function w(f,h,v){c(this,w),this.el=f,this.block=h,this.options=v,this.pressed=!1,this.deepPressed=!1,this.nativeSupport=!1,this.runningPolyfill=!1,this.runKey=Math.random()}return b(w,[{key:"setPressed",value:function(f){this.pressed=f}},{key:"setDeepPressed",value:function(f){this.deepPressed=f}},{key:"isPressed",value:function(){return this.pressed}},{key:"isDeepPressed",value:function(){return this.deepPressed}},{key:"add",value:function(f,h){this.el.addEventListener(f,h,!1)}},{key:"runClosure",value:function(f){f in this.block&&this.block[f].apply(this.el,Array.prototype.slice.call(arguments,1))}},{key:"fail",value:function(f,h){q.get("polyfill",this.options)?this.runKey===h&&this.runPolyfill(f):this.runClosure("unsupported",f)}},{key:"bindUnsupportedEvent",value:function(){var f=this;this.add($?"touchstart":"mousedown",function(h){return f.runClosure("unsupported",h)})}},{key:"_startPress",value:function(f){this.isPressed()===!1&&(this.runningPolyfill=!1,this.setPressed(!0),this.runClosure("start",f))}},{key:"_startDeepPress",value:function(f){this.isPressed()&&this.isDeepPressed()===!1&&(this.setDeepPressed(!0),this.runClosure("startDeepPress",f))}},{key:"_changePress",value:function(f,h){this.nativeSupport=!0,this.runClosure("change",f,h)}},{key:"_endDeepPress",value:function(){this.isPressed()&&this.isDeepPressed()&&(this.setDeepPressed(!1),this.runClosure("endDeepPress"))}},{key:"_endPress",value:function(){this.runningPolyfill===!1?(this.isPressed()&&(this._endDeepPress(),this.setPressed(!1),this.runClosure("end")),this.runKey=Math.random(),this.nativeSupport=!1):this.setPressed(!1)}},{key:"deepPress",value:function(f,h){.5<=f?this._startDeepPress(h):this._endDeepPress()}},{key:"runPolyfill",value:function(f){this.increment=q.get("polyfillSpeedUp",this.options)===0?1:10/q.get("polyfillSpeedUp",this.options),this.decrement=q.get("polyfillSpeedDown",this.options)===0?1:10/q.get("polyfillSpeedDown",this.options),this.setPressed(!0),this.runClosure("start",f),this.runningPolyfill===!1&&this.loopPolyfillForce(0,f)}},{key:"loopPolyfillForce",value:function(f,h){this.nativeSupport===!1&&(this.isPressed()?(this.runningPolyfill=!0,f=1<f+this.increment?1:f+this.increment,this.runClosure("change",f,h),this.deepPress(f,h),setTimeout(this.loopPolyfillForce.bind(this,f,h),10)):((f=f-this.decrement<0?0:f-this.decrement)<.5&&this.isDeepPressed()&&(this.setDeepPressed(!1),this.runClosure("endDeepPress")),f===0?(this.runningPolyfill=!1,this.setPressed(!0),this._endPress()):(this.runClosure("change",f,h),this.deepPress(f,h),setTimeout(this.loopPolyfillForce.bind(this,f,h),10))))}}]),w}(),D=function(){o(f,k);var w=l(f);function f(h,v,H){return c(this,f),w.call(this,h,v,H)}return b(f,[{key:"bindEvents",value:function(){this.add("webkitmouseforcewillbegin",this._startPress.bind(this)),this.add("mousedown",this.support.bind(this)),this.add("webkitmouseforcechanged",this.change.bind(this)),this.add("webkitmouseforcedown",this._startDeepPress.bind(this)),this.add("webkitmouseforceup",this._endDeepPress.bind(this)),this.add("mouseleave",this._endPress.bind(this)),this.add("mouseup",this._endPress.bind(this))}},{key:"support",value:function(h){this.isPressed()===!1&&this.fail(h,this.runKey)}},{key:"change",value:function(h){this.isPressed()&&0<h.webkitForce&&this._changePress(this.normalizeForce(h.webkitForce),h)}},{key:"normalizeForce",value:function(h){return this.reachOne(z(h,1,3,0,1))}},{key:"reachOne",value:function(h){return .995<h?1:h}}]),f}(),_=function(){o(f,k);var w=l(f);function f(h,v,H){return c(this,f),w.call(this,h,v,H)}return b(f,[{key:"bindEvents",value:function(){S?(this.add("touchforcechange",this.start.bind(this)),this.add("touchstart",this.support.bind(this,0))):this.add("touchstart",this.startLegacy.bind(this)),this.add("touchend",this._endPress.bind(this))}},{key:"start",value:function(h){0<h.touches.length&&(this._startPress(h),this.touch=this.selectTouch(h),this.touch&&this._changePress(this.touch.force,h))}},{key:"support",value:function(h,v,H){H=2<arguments.length&&H!==void 0?H:this.runKey,this.isPressed()===!1&&(h<=6?(h++,setTimeout(this.support.bind(this,h,v,H),10)):this.fail(v,H))}},{key:"startLegacy",value:function(h){this.initialForce=h.touches[0].force,this.supportLegacy(0,h,this.runKey,this.initialForce)}},{key:"supportLegacy",value:function(h,v,H,G){G!==this.initialForce?(this._startPress(v),this.loopForce(v)):h<=6?(h++,setTimeout(this.supportLegacy.bind(this,h,v,H,G),10)):this.fail(v,H)}},{key:"loopForce",value:function(h){this.isPressed()&&(this.touch=this.selectTouch(h),setTimeout(this.loopForce.bind(this,h),10),this._changePress(this.touch.force,h))}},{key:"selectTouch",value:function(h){if(h.touches.length===1)return this.returnTouch(h.touches[0],h);for(var v=0;v<h.touches.length;v++)if(h.touches[v].target===this.el||this.el.contains(h.touches[v].target))return this.returnTouch(h.touches[v],h)}},{key:"returnTouch",value:function(h,v){return this.deepPress(h.force,v),h}}]),f}(),A=function(){o(f,k);var w=l(f);function f(h,v,H){return c(this,f),w.call(this,h,v,H)}return b(f,[{key:"bindEvents",value:function(){this.add("pointerdown",this.support.bind(this)),this.add("pointermove",this.change.bind(this)),this.add("pointerup",this._endPress.bind(this)),this.add("pointerleave",this._endPress.bind(this))}},{key:"support",value:function(h){this.isPressed()===!1&&(h.pressure===0||h.pressure===.5||1<h.pressure?this.fail(h,this.runKey):(this._startPress(h),this._changePress(h.pressure,h)))}},{key:"change",value:function(h){this.isPressed()&&0<h.pressure&&h.pressure!==.5&&(this._changePress(h.pressure,h),this.deepPress(h.pressure,h))}}]),f}(),q={polyfill:!0,polyfillSpeedUp:1e3,polyfillSpeedDown:0,preventSelect:!0,only:null,get:function(w,f){return(f.hasOwnProperty(w)?f:this)[w]},set:function(w){for(var f in w)w.hasOwnProperty(f)&&this.hasOwnProperty(f)&&f!="get"&&f!="set"&&(this[f]=w[f])}},V=function(w,f,h){var v=2<arguments.length&&h!==void 0?h:{};if(typeof w=="string"||w instanceof String)for(var H=document.querySelectorAll(w),G=0;G<H.length;G++)new T(H[G],f,v);else if(Y(w))new T(w,f,v);else for(G=0;G<w.length;G++)new T(w[G],f,v)},Y=function(w){return(typeof HTMLElement=="undefined"?"undefined":i(HTMLElement))==="object"?w instanceof HTMLElement:w&&i(w)==="object"&&w!==null&&w.nodeType===1&&typeof w.nodeName=="string"},z=function(w,f,h,v,H){return(w-f)*(H-v)/(h-f)+v},R=!1,$=!1,N=!1,W=!1,S=!1;if(typeof window!="undefined"){if(typeof Touch!="undefined")try{(Touch.prototype.hasOwnProperty("force")||"force"in new Touch)&&(W=!0)}catch{}$="ontouchstart"in window.document&&W,R="onmousemove"in window.document&&"onwebkitmouseforcechanged"in window.document&&!$,N="onpointermove"in window.document,S="ontouchforcechange"in window.document}return C})})(br);const Er=(e,t)=>{let i="";return t.highlight&&(i+="w3-orange"),e.state.dragging.isDragging&&(i+="is-dragging"),console.log(i),i},Pr=(e,t)=>i=>{i.preventDefault();const o=()=>{Ae(e),t.highlight=!1,e.state.dragging.item=null,e.state.dragging.swapItem=null};return e.state.dragging.item.order=e.state.dragging.swapItem.order,e.http.putTask(e,`items/${e.state.dragging.item.id}`,e.state.dragging.item).fork(log("error"),o),e},Sr=(e,t,i)=>o=>{t.highlight=!0,e.state.dragging.swapItem=i,o.preventDefault()},Cr=(e,t,i)=>o=>(t.highlight=!0,e.state.dragging.swapItem=i,o.preventDefault(),!0),Tr=e=>t=>(e.highlight=!1,t.preventDefault(),!0),kr=(e,t,i)=>o=>(t.highlight=!1,e.state.dragging.swapItem=i,o.preventDefault(),!0),Or=(e,t)=>{e.state.showModal=!0,e.state.modalContent=y(st,{catId:t.catId,mdl:e,item:t,isEdit:!0})},Lr=(e,t,i)=>{t.left=!0,Or(e,i),ut(e,t)},Ar=(e,t,i)=>{t.right=!0,e.state.dragging.isDragging=!e.state.dragging.isDragging,ut(e,t)},ut=(e,t,i)=>{t.left=!1,t.right=!1},Dr=e=>e.classList.contains("swipe-container"),Jt=e=>Dr(e)?e:Jt(e.parentElement),_r=({leftAction:e,rightAction:t,resetAction:i},o)=>{const s=Jt(o.target),l=s.clientWidth*30/100,u=s.scrollLeft-s.clientWidth;console.log(u),u<l*-1?e():u>l?t():i()},Ir=(e,t,i)=>o=>{e.state.dragging.isDragging||_r({leftAction:()=>Lr(e,t,i),rightAction:()=>Ar(e,t),resetAction:()=>ut(e,t)},o)},Rr=()=>{const e={highlight:!1};return{view:({attrs:{item:t,mdl:i}})=>(console.log(i.state.dragging.isDragging),y("li.w3-li.w3-leftbar.w3-border-bottom",{id:t.id,draggable:i.state.dragging.isDragging,class:Er(i,e),style:{height:"80px"},ondrop:Pr(i,e),ondragover:Sr(i,e,t),ondragenter:Cr(i,e,t),ondragend:kr(i,e,t),ondragleave:Tr(e),ondragstart:()=>i.state.dragging.item=t},y(".swipe-container",{ontouchend:Ir(i,e,t)},y(".swipe-action.swipe-left",y("icon",y.trust("&#9997;"))),y(".swipe-element",y("img.w3-left",{src:t.img,style:{maxWidth:"85px"}}),y(".w3-block",{style:{fontSize:"1.2rem"}},t.title),y(".w3-bar",y(".w3-bar-item",t.quantity>0&&y("",`${t.quantity} ${t.unit}`)),y(".w3-bar-item",t.price>0&&y("",`$ ${t.price}`)))),y(".swipe-action.swipe-right",y("icon",y.trust("&#9888;"))))))}};var Yt={exports:{}};/*@preserve
 * Dragster - drag'n'drop library v1.6.2
 * https://github.com/sunpietro/dragster
 *
 * Copyright 2015-2017 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/dragster/blob/master/LICENSE
 *
 * Date: 2017-06-28T22:30Z
 */(function(e,t){(function(i,o,s){e.exports=s()})(we,"Dragster",function(){var i=function(o){var s="dragster-",l="is-dragging",u="is-drag-over",c=s+"draggable",g=s+"drag-region",b=s+"drop-placeholder",C=s+"temp",T=C+"-container",k=s+"is-hidden",D=s+"replacable",_="touchstart",A="touchmove",q="touchend",V="mousedown",Y="mousemove",z="mouseup",R="top",$="bottom",N="px",W="div",S=!1,w=!0,f=null,h=function(){},v={elementSelector:".dragster-block",regionSelector:".dragster-region",dragHandleCssClass:S,dragOnlyRegionCssClass:s+"region--drag-only",replaceElements:S,updateRegionsHeight:w,minimumRegionHeight:60,onBeforeDragStart:h,onAfterDragStart:h,onBeforeDragMove:h,onAfterDragMove:h,onBeforeDragEnd:h,onAfterDragEnd:h,onAfterDragDrop:h,scrollWindowOnDrag:S,dragOnlyRegionsEnabled:S,cloneElements:S,wrapDraggableElements:w,shadowElementUnderMouse:S},H={top:S,bottom:S},G={drag:{node:f},drop:{node:f},shadow:{node:f,top:0,left:0},placeholder:{node:f,position:f},dropped:f,clonedFrom:f,clonedTo:f},X={},ce,ue,fe,ie,ge,De,Q,_e,te,Ie,xe,be,Ee,Me,We,me,je,le,Pe,ye,Se,qe,pe,r,n,a,d,m,E,x,U,L,K=window.innerHeight,ae=Math.floor((1+Math.random())*65536).toString(16);for(ce in o)o.hasOwnProperty(ce)&&(v[ce]=o[ce]);return Se=function(){return[].slice.call(document.querySelectorAll(v.elementSelector))},qe=function(){return[].slice.call(document.querySelectorAll(v.regionSelector))},pe=function(p){if(v.wrapDraggableElements===S)return console.warn(`You have disabled the default behavior of wrapping the draggable elements. If you want Dragster.js to work properly you still will have to do this manually.

More info: https://github.com/sunpietro/dragster/blob/master/README.md#user-content-wrapdraggableelements---boolean`),S;p.forEach(function(P){var O=Me(),I=P.parentNode;if(I.classList.contains(c))return S;I.insertBefore(O,P),I.removeChild(P),O.appendChild(P)})},_e=Se(),ue=qe(),v.replaceElements&&(De=document.createElement(W),De.classList.add(k),De.classList.add(T),document.body.appendChild(De)),fe=function(p,P){var O=p.parentNode;if(!(!O||p.classList&&p.classList.contains(g)&&!p.classList.contains(v.dragOnlyRegionCssClass)))return P(p)?p:P(O)?O:fe(O,P)},le=function(p){var P=[].slice.call(document.getElementsByClassName(p));P.forEach(function(O){O.dataset.dragsterId===ae&&O.parentNode.removeChild(O)})},Pe=function(p,P){P&&(ue.forEach(function(O){O.removeEventListener(P,te.mousemove)}),document.body.removeEventListener(P,te.mousemove)),p&&p.classList.remove(l),[].slice.call(document.getElementsByClassName(c)).forEach(function(O){O.firstChild||O.parentNode.removeChild(O)}),le(b),le(C),r()},ye=function(){[].slice.call(document.getElementsByClassName(D)).forEach(function(p){p.classList.remove(D)})},Me=function(){var p=document.createElement(W);return p.classList.add(c),p.dataset.dragsterId=ae,p},me=function(){var p=document.createElement(W);return p.classList.add(b),p.dataset.dragsterId=ae,p},We=function(){var p=document.createElement(W);return p.classList.add(C),p.classList.add(k),p.style.position="fixed",p.dataset.dragsterId=ae,document.body.appendChild(p),p},be=function(p,P){if(p&&p.parentNode){var O=v.wrapDraggableElements===S?p:p.nextSibling;p.parentNode.insertBefore(P,O)}},Ee=function(p,P){p&&p.parentNode&&p.parentNode.insertBefore(P,p)},Ie=function(p){return p.classList&&p.classList.contains(c)&&p.dataset.dragsterId===ae},xe=function(p){return p.classList&&p.classList.contains(v.dragOnlyRegionCssClass)},r=function(){if(v.updateRegionsHeight){var p=[].slice.call(document.getElementsByClassName(g));p.forEach(function(P){var O=[].slice.call(P.querySelectorAll(v.elementSelector)),I=v.minimumRegionHeight;!O.length||(O.forEach(function(M){var B=window.getComputedStyle(M);I+=M.offsetHeight+parseInt(B.marginTop,10)+parseInt(B.marginBottom,10)}),P.style.height=I+N)})}},d=function(p,P){Pe(Q,p),Pe(Q,P)},te={mousedown:function(p){if(v.dragHandleCssClass&&(typeof v.dragHandleCssClass!="string"||!p.target.classList.contains(v.dragHandleCssClass)))return S;var P,O,I,M=p.type===_,B=p.changedTouches?p.changedTouches[0]:p;if(X=JSON.parse(JSON.stringify(G)),p.dragster=X,v.onBeforeDragStart(p)===S||p.which===3||(p.preventDefault(),Q=fe(p.target,Ie),!Q))return S;O=M?A:Y,I=M?q:z,ue.forEach(function(j){j.addEventListener(O,te.mousemove,S),j.addEventListener(I,te.mouseup,S)}),document.body.addEventListener(O,te.mousemove,S),document.body.addEventListener(I,te.mouseup,S),P=Q.getBoundingClientRect(),x=P.left-B.clientX,U=P.top-B.clientY,ie=We(),ie.innerHTML=Q.innerHTML,ie.style.width=P.width+N,ie.style.height=P.height+N,ie.dataset.dragsterId=ae,ge=ie.getBoundingClientRect(),Q.classList.add(l),X.drag.node=Q,X.shadow.node=ie,p.dragster=X,v.onAfterDragStart(p)},mousemove:function(p){if(p.dragster=X,v.onBeforeDragMove(p)===S||!ge)return S;p.preventDefault();var P=p.changedTouches?p.changedTouches[0]:p,O=P.view?P.view.pageXOffset:0,I=P.view?P.view.pageYOffset:0,M=P.clientY+I,B=P.clientX+O,j=document.elementFromPoint(P.clientX,P.clientY),oe=fe(j,Ie),he=v.shadowElementUnderMouse?P.clientY+U:P.clientY,He=v.shadowElementUnderMouse?B+x:B-ge.width/2,Ce=X.drag.node&&X.drag.node.dataset,$e=!!(oe&&fe(oe,xe)),J=j.dataset.dragsterId===ae,Te=j.classList.contains(g)&&J,Re=j.classList.contains(v.dragOnlyRegionCssClass)&&J,Ue=j.classList.contains(b),de=j.getElementsByClassName(c).length>0,lt=j.getElementsByClassName(b).length>0;clearTimeout(je),ie.style.top=he+N,ie.style.left=He+N,ie.classList.remove(k),X.shadow.top=he,X.shadow.left=He,!Ce&&!Te&&!Ue?E.removePlaceholders():oe&&oe!==Q&&!$e?(E.removePlaceholders(),E.addPlaceholderOnTarget(oe,M,I)):Te&&!Re&&!de&&!lt?(E.removePlaceholders(),E.addPlaceholderInRegion(j)):Te&&!Re&&de&&!lt&&(E.removePlaceholders(),E.addPlaceholderInRegionBelowTargets(j)),v.scrollWindowOnDrag&&n(p),r(),v.onAfterDragMove(p)},mouseup:function(p){p.dragster=X;var P=p.type===_,O=P?A:Y,I=P?q:z,M,B,j,oe,he;if(v.onBeforeDragEnd(p)===S||(M=v.replaceElements?D:b,B=document.getElementsByClassName(M)[0],oe=!!(Q&&fe(Q,xe)),he=v.cloneElements&&oe,je=setTimeout(d,200),ye(),!Q||!B))return d(O,I),S;j=fe(B,Ie),j=j||B,Q!==j&&(!v.replaceElements&&!he?(p.dragster=m.moveElement(p.dragster,B,j),v.onAfterDragDrop(p)):v.replaceElements&&!he?(p.dragster=m.replaceElements(p.dragster,j),v.onAfterDragDrop(p)):!v.replaceElements&&he&&(p.dragster=m.cloneElements(p.dragster,B,j),v.onAfterDragDrop(p)),j.classList.remove(u)),d(O,I),v.onAfterDragEnd(p)}},E={addPlaceholderOnTarget:function(p,P,O){var I=p.getBoundingClientRect(),M=me(),B=I.height/2;ye(),v.replaceElements?p.classList.add(D):P-O-I.top<B&&!H.top?(le(b),M.dataset.placeholderPosition=R,Ee(p.firstChild,M),X.placeholder.position=R):I.bottom-(P-O)<B&&!H.bottom&&(le(b),M.dataset.placeholderPosition=$,p.appendChild(M),X.placeholder.position=$),X.placeholder.node=M,X.drop.node=p},addPlaceholderInRegion:function(p){var P=me();p.appendChild(P),X.placeholder.position=$,X.placeholder.node=P,X.drop.node=p},addPlaceholderInRegionBelowTargets:function(p){var P=[].slice.call(p.getElementsByClassName(c)),O=P.filter(function(B){return B.dataset.dragsterId===ae}),I=O[O.length-1],M=me();M.dataset.placeholderPosition=$,le(b),I.appendChild(M),X.placeholder.position=$,X.placeholder.node=M,X.drop.node=I},removePlaceholders:function(){v.replaceElements?ye():le(b)}},m={moveElement:function(p,P,O){var I=v.wrapDraggableElements===S?Q:Me(),M=P.dataset.placeholderPosition;return M===R?Ee(O,I):v.wrapDraggableElements===S?be(I,O):be(O,I),Q.firstChild&&v.wrapDraggableElements===w&&I.appendChild(Q.firstChild),p.dropped=I,p},replaceElements:function(p,P){var O=document.getElementsByClassName(T)[0];return O.innerHTML=Q.innerHTML,Q.innerHTML=P.innerHTML,P.innerHTML=O.innerHTML,O.innerHTML="",p.dropped=O,p},cloneElements:function(p,P,O){var I=Q.cloneNode(!0),M=P.dataset.placeholderPosition;return M===R?Ee(O,I):be(O,I),Pe(I),p.clonedFrom=Q,p.clonedTo=I,p}},n=function(p){var P=p.changedTouches?p.changedTouches[0]:p,O=60;K-P.clientY<O?window.scrollBy(0,10):P.clientY<O&&window.scrollBy(0,-10)},a=function(){K=window.innerHeight},pe(_e),L=function(){ue.forEach(function(p){p.classList.add(g),p.dataset.dragsterId=ae,p.addEventListener(V,te.mousedown,S),p.addEventListener(_,te.mousedown,S)})},L(),window.addEventListener("resize",a,!1),{update:function(){_e=Se(),pe(_e),r(),a()},updateRegions:function(){ue=qe(),L()},destroy:function(){ue.forEach(function(p){p.classList.remove(g),p.removeEventListener(V,te.mousedown,S),p.removeEventListener(Y,te.mousemove,S),p.removeEventListener(z,te.mouseup,S),p.removeEventListener(_,te.mousedown,S),p.removeEventListener(A,te.mousemove,S),p.removeEventListener(q,te.mouseup,S)}),document.body.removeEventListener(Y,te.mousemove,S),document.body.removeEventListener(A,te.mousemove,S),document.body.removeEventListener(z,te.mouseup,S),document.body.removeEventListener(q,te.mouseup,S),window.removeEventListener("resize",a,!1)}}};return i})})(Yt);var Nr=Yt.exports;const xr=({dom:e})=>{const t=new Nr({elementSelector:".dragster-block",regionSelector:".dragster-region",dragHandleCssClass:!1,replaceElements:!1,updateRegionsHeight:!0,minimumRegionHeight:60,scrollWindowOnDrag:!0,dragOnlyRegionsEnabled:!1,cloneElements:!1,wrapDraggableElements:!0,shadowElementUnderMouse:!1});console.log(t,e)},Mr=({attrs:{mdl:e,cat:t}})=>{const i={catId:t.id,title:t.title,items:t.items,isSelected:!1,togglePinSection:{onclick:()=>i.isSelected=!i.isSelected}};return{oncreate:xr,view:({attrs:{cat:o,mdl:s,key:l}})=>y("section.w3-section.w3-border-left",{key:l,id:o.id},y(".w3-bar",{style:{position:"-webkit-sticky",position:"sticky",backgroundColor:"white"}},y("p.w3-right",{style:{padding:"0 16px"}},o.title.toUpperCase()),y("button.w3-btn w3-border-none w3-padding.w3-left",{onclick:()=>{s.state.modalContent=y(st,{mdl:s,catId:o.id}),s.state.showModal=!0}},y("strong","+"))),y(".w3-ul",o.items.map((u,c)=>y(Rr,{key:u.id,item:u,mdl:s}))))}},jr=()=>({view:({attrs:{mdl:e,state:t}})=>y("section.w3-section.w3-row w3-ul.w3-padding-row",{style:{height:"90dvh",overflowX:"hidden",overflowY:"auto"}},e.currentStore?e.currentStore.cats.map((i,o)=>y(Mr,{key:o,cat:i,mdl:e,state:t})):y("section.w3-section",y("button.w3-border w3-button w3-panel.w3-display-middle w3-light-grey w3-col-1",{onclick:()=>{e.state.modalContent=y(Vt,{mdl:e}),e.state.showModal=!0}},"Create a Store to Begin")))}),qr=({attrs:{mdl:e}})=>({view:()=>y(".w3-modal#modal",{onclick:t=>{t.target.id=="modal"&&(e.state.showModal=!1,e.state.modalContent=null)},style:{display:e.state.showModal?"block":"none"}},y("modal.w3-modal-content",y(".w3-container",e.state.modalContent)))});ee.SKIP={};ee.lift=Ur;ee.scan=Hr;ee.merge=Gt;ee.combine=Xe;ee.scanMerge=$r;ee["fantasy-land/of"]=ee;var Lt=!1;Object.defineProperty(ee,"HALT",{get:function(){return Lt||console.log("HALT is deprecated and has been renamed to SKIP"),Lt=!0,ee.SKIP}});function ee(e){var t=[],i=[];function o(u){return arguments.length&&u!==ee.SKIP&&(e=u,At(o)&&(o.changing(),o.state="active",t.forEach(function(c,g){c(i[g](e))}))),e}o.constructor=ee,o.state=arguments.length&&e!==ee.SKIP?"active":"pending",o.parents=[],o.changing=function(){At(o)&&(o.state="changing"),t.forEach(function(u){u.changing()})},o.map=function(u,c){var g=o.state==="active"&&c!==ee.SKIP?ee(u(e)):ee();return g.parents.push(o),t.push(g),i.push(u),g};var s;function l(){return s=ee(),s.map(function(u){return u===!0&&(o.parents.forEach(function(c){c.unregisterChild(o)}),o.state="ended",o.parents.length=t.length=i.length=0),u}),s}return o.toJSON=function(){return e!=null&&typeof e.toJSON=="function"?e.toJSON():e},o["fantasy-land/map"]=o.map,o["fantasy-land/ap"]=function(u){return Xe(function(c,g){return c()(g())},[u,o])},o.unregisterChild=function(u){var c=t.indexOf(u);c!==-1&&(t.splice(c,1),i.splice(c,1))},Object.defineProperty(o,"end",{get:function(){return s||l()}}),o}function Xe(e,t){var i=t.every(function(c){if(c.constructor!==ee)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return c.state==="active"}),o=i?ee(e.apply(null,t.concat([t]))):ee(),s=[],l=t.map(function(c){return c.map(function(g){return s.push(c),(i||t.every(function(b){return b.state!=="pending"}))&&(i=!0,o(e.apply(null,t.concat([s]))),s=[]),g},ee.SKIP)}),u=o.end.map(function(c){c===!0&&(l.forEach(function(g){g.end(!0)}),u.end(!0))});return o}function Gt(e){return Xe(function(){return e.map(function(t){return t()})},e)}function Hr(e,t,i){var o=i.map(function(s){var l=e(t,s);return l!==ee.SKIP&&(t=l),l});return o(t),o}function $r(e,t){var i=e.map(function(s){return s[0]}),o=Xe(function(){var s=arguments[arguments.length-1];return i.forEach(function(l,u){s.indexOf(l)>-1&&(t=e[u][1](t,l()))}),t},i);return o(t),o}function Ur(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return Gt(t).map(function(i){return e.apply(void 0,i)})}function At(e){return e.state==="pending"||e.state==="active"||e.state==="changing"}const zr=e=>({maxHeight:"100dvh",overflow:"hidden",marginLeft:e.settings.profile=="desktop"?"300px":"0"}),Br=e=>{const t={sidebar:{open:!1},setCat:ee(null),toggleSideBar:i=>i.sidebar.open=!i.sidebar.open};return Ae(e),{view:()=>y("page.w3-theme",y(qr,{mdl:e}),y(wr,{mdl:e,state:t}),y("section.#main",{style:zr(e)},y(vr,{mdl:e,state:t}),y(jr,{mdl:e,state:t})))}},Fr=document.body;let Xt=window.innerWidth;"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(e=>{console.log("\u2699\uFE0F SW registered: ",e)}).catch(e=>{console.log("\u{1F9DF} SW registration failed: ",e)})});const Qt=e=>e<=411?"phone":e<=990?"tablet":"desktop",Zt=e=>{const t=window.innerWidth;if(e!==t){e=t;var i=Ke.settings.profile;Ke.settings.profile=Qt(t),i!=Ke.settings.profile&&y.redraw()}return requestAnimationFrame(Zt)};Ke.settings.profile=Qt(Xt);Zt(Xt);y.mount(Fr,Br(Ke));
